const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./editor.main-BTJN0Ilp.js","./editor-D4zjdeIP.css"])))=>i.map(i=>d[i]);
var jy=Object.defineProperty;var $y=(e,t,s)=>t in e?jy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var Ie=(e,t,s)=>$y(e,typeof t!="symbol"?t+"":t,s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const h of a)if(h.type==="childList")for(const c of h.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const h={};return a.integrity&&(h.integrity=a.integrity),a.referrerPolicy&&(h.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?h.credentials="include":a.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(a){if(a.ep)return;a.ep=!0;const h=s(a);fetch(a.href,h)}})();function Ky(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bh={exports:{}},yn={},Oh={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function Vy(){if(D_)return ke;D_=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),c=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function C(k){return k===null||typeof k!="object"?null:(k=v&&k[v]||k["@@iterator"],typeof k=="function"?k:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,T={};function M(k,F,j){this.props=k,this.context=F,this.refs=T,this.updater=j||w}M.prototype.isReactComponent={},M.prototype.setState=function(k,F){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,F,"setState")},M.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function X(){}X.prototype=M.prototype;function ie(k,F,j){this.props=k,this.context=F,this.refs=T,this.updater=j||w}var se=ie.prototype=new X;se.constructor=ie,A(se,M.prototype),se.isPureReactComponent=!0;var W=Array.isArray,G=Object.prototype.hasOwnProperty,ee={current:null},fe={key:!0,ref:!0,__self:!0,__source:!0};function we(k,F,j){var te,Q={},re=null,oe=null;if(F!=null)for(te in F.ref!==void 0&&(oe=F.ref),F.key!==void 0&&(re=""+F.key),F)G.call(F,te)&&!fe.hasOwnProperty(te)&&(Q[te]=F[te]);var ue=arguments.length-2;if(ue===1)Q.children=j;else if(1<ue){for(var ve=Array(ue),D=0;D<ue;D++)ve[D]=arguments[D+2];Q.children=ve}if(k&&k.defaultProps)for(te in ue=k.defaultProps,ue)Q[te]===void 0&&(Q[te]=ue[te]);return{$$typeof:e,type:k,key:re,ref:oe,props:Q,_owner:ee.current}}function pe(k,F){return{$$typeof:e,type:k.type,key:F,ref:k.ref,props:k.props,_owner:k._owner}}function xe(k){return typeof k=="object"&&k!==null&&k.$$typeof===e}function Le(k){var F={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(j){return F[j]})}var I=/\/+/g;function P(k,F){return typeof k=="object"&&k!==null&&k.key!=null?Le(""+k.key):F.toString(36)}function B(k,F,j,te,Q){var re=typeof k;(re==="undefined"||re==="boolean")&&(k=null);var oe=!1;if(k===null)oe=!0;else switch(re){case"string":case"number":oe=!0;break;case"object":switch(k.$$typeof){case e:case t:oe=!0}}if(oe)return oe=k,Q=Q(oe),k=te===""?"."+P(oe,0):te,W(Q)?(j="",k!=null&&(j=k.replace(I,"$&/")+"/"),B(Q,F,j,"",function(D){return D})):Q!=null&&(xe(Q)&&(Q=pe(Q,j+(!Q.key||oe&&oe.key===Q.key?"":(""+Q.key).replace(I,"$&/")+"/")+k)),F.push(Q)),1;if(oe=0,te=te===""?".":te+":",W(k))for(var ue=0;ue<k.length;ue++){re=k[ue];var ve=te+P(re,ue);oe+=B(re,F,j,ve,Q)}else if(ve=C(k),typeof ve=="function")for(k=ve.call(k),ue=0;!(re=k.next()).done;)re=re.value,ve=te+P(re,ue++),oe+=B(re,F,j,ve,Q);else if(re==="object")throw F=String(k),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return oe}function E(k,F,j){if(k==null)return k;var te=[],Q=0;return B(k,te,"","",function(re){return F.call(j,re,Q++)}),te}function z(k){if(k._status===-1){var F=k._result;F=F(),F.then(function(j){(k._status===0||k._status===-1)&&(k._status=1,k._result=j)},function(j){(k._status===0||k._status===-1)&&(k._status=2,k._result=j)}),k._status===-1&&(k._status=0,k._result=F)}if(k._status===1)return k._result.default;throw k._result}var U={current:null},N={transition:null},q={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:N,ReactCurrentOwner:ee};function $(){throw Error("act(...) is not supported in production builds of React.")}return ke.Children={map:E,forEach:function(k,F,j){E(k,function(){F.apply(this,arguments)},j)},count:function(k){var F=0;return E(k,function(){F++}),F},toArray:function(k){return E(k,function(F){return F})||[]},only:function(k){if(!xe(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},ke.Component=M,ke.Fragment=s,ke.Profiler=a,ke.PureComponent=ie,ke.StrictMode=o,ke.Suspense=g,ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,ke.act=$,ke.cloneElement=function(k,F,j){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var te=A({},k.props),Q=k.key,re=k.ref,oe=k._owner;if(F!=null){if(F.ref!==void 0&&(re=F.ref,oe=ee.current),F.key!==void 0&&(Q=""+F.key),k.type&&k.type.defaultProps)var ue=k.type.defaultProps;for(ve in F)G.call(F,ve)&&!fe.hasOwnProperty(ve)&&(te[ve]=F[ve]===void 0&&ue!==void 0?ue[ve]:F[ve])}var ve=arguments.length-2;if(ve===1)te.children=j;else if(1<ve){ue=Array(ve);for(var D=0;D<ve;D++)ue[D]=arguments[D+2];te.children=ue}return{$$typeof:e,type:k.type,key:Q,ref:re,props:te,_owner:oe}},ke.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:h,_context:k},k.Consumer=k},ke.createElement=we,ke.createFactory=function(k){var F=we.bind(null,k);return F.type=k,F},ke.createRef=function(){return{current:null}},ke.forwardRef=function(k){return{$$typeof:_,render:k}},ke.isValidElement=xe,ke.lazy=function(k){return{$$typeof:y,_payload:{_status:-1,_result:k},_init:z}},ke.memo=function(k,F){return{$$typeof:p,type:k,compare:F===void 0?null:F}},ke.startTransition=function(k){var F=N.transition;N.transition={};try{k()}finally{N.transition=F}},ke.unstable_act=$,ke.useCallback=function(k,F){return U.current.useCallback(k,F)},ke.useContext=function(k){return U.current.useContext(k)},ke.useDebugValue=function(){},ke.useDeferredValue=function(k){return U.current.useDeferredValue(k)},ke.useEffect=function(k,F){return U.current.useEffect(k,F)},ke.useId=function(){return U.current.useId()},ke.useImperativeHandle=function(k,F,j){return U.current.useImperativeHandle(k,F,j)},ke.useInsertionEffect=function(k,F){return U.current.useInsertionEffect(k,F)},ke.useLayoutEffect=function(k,F){return U.current.useLayoutEffect(k,F)},ke.useMemo=function(k,F){return U.current.useMemo(k,F)},ke.useReducer=function(k,F,j){return U.current.useReducer(k,F,j)},ke.useRef=function(k){return U.current.useRef(k)},ke.useState=function(k){return U.current.useState(k)},ke.useSyncExternalStore=function(k,F,j){return U.current.useSyncExternalStore(k,F,j)},ke.useTransition=function(){return U.current.useTransition()},ke.version="18.3.1",ke}var T_;function mc(){return T_||(T_=1,Oh.exports=Vy()),Oh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M_;function qy(){if(M_)return yn;M_=1;var e=mc(),t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function c(_,g,p){var y,v={},C=null,w=null;p!==void 0&&(C=""+p),g.key!==void 0&&(C=""+g.key),g.ref!==void 0&&(w=g.ref);for(y in g)o.call(g,y)&&!h.hasOwnProperty(y)&&(v[y]=g[y]);if(_&&_.defaultProps)for(y in g=_.defaultProps,g)v[y]===void 0&&(v[y]=g[y]);return{$$typeof:t,type:_,key:C,ref:w,props:v,_owner:a.current}}return yn.Fragment=s,yn.jsx=c,yn.jsxs=c,yn}var B_;function Xy(){return B_||(B_=1,Bh.exports=qy()),Bh.exports}var fu=Xy(),De=mc();const Yy=Ky(De);var nl={},Ah={exports:{}},Wt={},Nh={exports:{}},Ih={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function Gy(){return O_||(O_=1,function(e){function t(N,q){var $=N.length;N.push(q);e:for(;0<$;){var k=$-1>>>1,F=N[k];if(0<a(F,q))N[k]=q,N[$]=F,$=k;else break e}}function s(N){return N.length===0?null:N[0]}function o(N){if(N.length===0)return null;var q=N[0],$=N.pop();if($!==q){N[0]=$;e:for(var k=0,F=N.length,j=F>>>1;k<j;){var te=2*(k+1)-1,Q=N[te],re=te+1,oe=N[re];if(0>a(Q,$))re<F&&0>a(oe,Q)?(N[k]=oe,N[re]=$,k=re):(N[k]=Q,N[te]=$,k=te);else if(re<F&&0>a(oe,$))N[k]=oe,N[re]=$,k=re;else break e}}return q}function a(N,q){var $=N.sortIndex-q.sortIndex;return $!==0?$:N.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var c=Date,_=c.now();e.unstable_now=function(){return c.now()-_}}var g=[],p=[],y=1,v=null,C=3,w=!1,A=!1,T=!1,M=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function se(N){for(var q=s(p);q!==null;){if(q.callback===null)o(p);else if(q.startTime<=N)o(p),q.sortIndex=q.expirationTime,t(g,q);else break;q=s(p)}}function W(N){if(T=!1,se(N),!A)if(s(g)!==null)A=!0,z(G);else{var q=s(p);q!==null&&U(W,q.startTime-N)}}function G(N,q){A=!1,T&&(T=!1,X(we),we=-1),w=!0;var $=C;try{for(se(q),v=s(g);v!==null&&(!(v.expirationTime>q)||N&&!Le());){var k=v.callback;if(typeof k=="function"){v.callback=null,C=v.priorityLevel;var F=k(v.expirationTime<=q);q=e.unstable_now(),typeof F=="function"?v.callback=F:v===s(g)&&o(g),se(q)}else o(g);v=s(g)}if(v!==null)var j=!0;else{var te=s(p);te!==null&&U(W,te.startTime-q),j=!1}return j}finally{v=null,C=$,w=!1}}var ee=!1,fe=null,we=-1,pe=5,xe=-1;function Le(){return!(e.unstable_now()-xe<pe)}function I(){if(fe!==null){var N=e.unstable_now();xe=N;var q=!0;try{q=fe(!0,N)}finally{q?P():(ee=!1,fe=null)}}else ee=!1}var P;if(typeof ie=="function")P=function(){ie(I)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,E=B.port2;B.port1.onmessage=I,P=function(){E.postMessage(null)}}else P=function(){M(I,0)};function z(N){fe=N,ee||(ee=!0,P())}function U(N,q){we=M(function(){N(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){A||w||(A=!0,z(G))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pe=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_getFirstCallbackNode=function(){return s(g)},e.unstable_next=function(N){switch(C){case 1:case 2:case 3:var q=3;break;default:q=C}var $=C;C=q;try{return N()}finally{C=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,q){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var $=C;C=N;try{return q()}finally{C=$}},e.unstable_scheduleCallback=function(N,q,$){var k=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?k+$:k):$=k,N){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=$+F,N={id:y++,callback:q,priorityLevel:N,startTime:$,expirationTime:F,sortIndex:-1},$>k?(N.sortIndex=$,t(p,N),s(g)===null&&N===s(p)&&(T?(X(we),we=-1):T=!0,U(W,$-k))):(N.sortIndex=F,t(g,N),A||w||(A=!0,z(G))),N},e.unstable_shouldYield=Le,e.unstable_wrapCallback=function(N){var q=C;return function(){var $=C;C=q;try{return N.apply(this,arguments)}finally{C=$}}}}(Ih)),Ih}var A_;function Qy(){return A_||(A_=1,Nh.exports=Gy()),Nh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N_;function Zy(){if(N_)return Wt;N_=1;var e=mc(),t=Qy();function s(r){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)n+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function h(r,n){c(r,n),c(r+"Capture",n)}function c(r,n){for(a[r]=n,r=0;r<n.length;r++)o.add(n[r])}var _=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},v={};function C(r){return g.call(v,r)?!0:g.call(y,r)?!1:p.test(r)?v[r]=!0:(y[r]=!0,!1)}function w(r,n,l,u){if(l!==null&&l.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return u?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function A(r,n,l,u){if(n===null||typeof n>"u"||w(r,n,l,u))return!0;if(u)return!1;if(l!==null)switch(l.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function T(r,n,l,u,d,f,m){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=l,this.propertyName=r,this.type=n,this.sanitizeURL=f,this.removeEmptyString=m}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){M[r]=new T(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var n=r[0];M[n]=new T(n,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){M[r]=new T(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){M[r]=new T(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){M[r]=new T(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){M[r]=new T(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){M[r]=new T(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){M[r]=new T(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){M[r]=new T(r,5,!1,r.toLowerCase(),null,!1,!1)});var X=/[\-:]([a-z])/g;function ie(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var n=r.replace(X,ie);M[n]=new T(n,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var n=r.replace(X,ie);M[n]=new T(n,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var n=r.replace(X,ie);M[n]=new T(n,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){M[r]=new T(r,1,!1,r.toLowerCase(),null,!1,!1)}),M.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){M[r]=new T(r,1,!1,r.toLowerCase(),null,!0,!0)});function se(r,n,l,u){var d=M.hasOwnProperty(n)?M[n]:null;(d!==null?d.type!==0:u||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(A(n,l,d,u)&&(l=null),u||d===null?C(n)&&(l===null?r.removeAttribute(n):r.setAttribute(n,""+l)):d.mustUseProperty?r[d.propertyName]=l===null?d.type===3?!1:"":l:(n=d.attributeName,u=d.attributeNamespace,l===null?r.removeAttribute(n):(d=d.type,l=d===3||d===4&&l===!0?"":""+l,u?r.setAttributeNS(u,n,l):r.setAttribute(n,l))))}var W=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),ee=Symbol.for("react.portal"),fe=Symbol.for("react.fragment"),we=Symbol.for("react.strict_mode"),pe=Symbol.for("react.profiler"),xe=Symbol.for("react.provider"),Le=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),U=Symbol.for("react.offscreen"),N=Symbol.iterator;function q(r){return r===null||typeof r!="object"?null:(r=N&&r[N]||r["@@iterator"],typeof r=="function"?r:null)}var $=Object.assign,k;function F(r){if(k===void 0)try{throw Error()}catch(l){var n=l.stack.trim().match(/\n( *(at )?)/);k=n&&n[1]||""}return`
`+k+r}var j=!1;function te(r,n){if(!r||j)return"";j=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(O){var u=O}Reflect.construct(r,[],n)}else{try{n.call()}catch(O){u=O}r.call(n.prototype)}else{try{throw Error()}catch(O){u=O}r()}}catch(O){if(O&&u&&typeof O.stack=="string"){for(var d=O.stack.split(`
`),f=u.stack.split(`
`),m=d.length-1,S=f.length-1;1<=m&&0<=S&&d[m]!==f[S];)S--;for(;1<=m&&0<=S;m--,S--)if(d[m]!==f[S]){if(m!==1||S!==1)do if(m--,S--,0>S||d[m]!==f[S]){var b=`
`+d[m].replace(" at new "," at ");return r.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",r.displayName)),b}while(1<=m&&0<=S);break}}}finally{j=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?F(r):""}function Q(r){switch(r.tag){case 5:return F(r.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return r=te(r.type,!1),r;case 11:return r=te(r.type.render,!1),r;case 1:return r=te(r.type,!0),r;default:return""}}function re(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case fe:return"Fragment";case ee:return"Portal";case pe:return"Profiler";case we:return"StrictMode";case P:return"Suspense";case B:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Le:return(r.displayName||"Context")+".Consumer";case xe:return(r._context.displayName||"Context")+".Provider";case I:var n=r.render;return r=r.displayName,r||(r=n.displayName||n.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case E:return n=r.displayName||null,n!==null?n:re(r.type)||"Memo";case z:n=r._payload,r=r._init;try{return re(r(n))}catch{}}return null}function oe(r){var n=r.type;switch(r.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=n.render,r=r.displayName||r.name||"",n.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(n);case 8:return n===we?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function ue(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function ve(r){var n=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function D(r){var n=ve(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,n),u=""+r[n];if(!r.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,f=l.set;return Object.defineProperty(r,n,{configurable:!0,get:function(){return d.call(this)},set:function(m){u=""+m,f.call(this,m)}}),Object.defineProperty(r,n,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(m){u=""+m},stopTracking:function(){r._valueTracker=null,delete r[n]}}}}function ae(r){r._valueTracker||(r._valueTracker=D(r))}function Qe(r){if(!r)return!1;var n=r._valueTracker;if(!n)return!0;var l=n.getValue(),u="";return r&&(u=ve(r)?r.checked?"true":"false":r.value),r=u,r!==l?(n.setValue(r),!0):!1}function He(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Bt(r,n){var l=n.checked;return $({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function vt(r,n){var l=n.defaultValue==null?"":n.defaultValue,u=n.checked!=null?n.checked:n.defaultChecked;l=ue(n.value!=null?n.value:l),r._wrapperState={initialChecked:u,initialValue:l,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Vr(r,n){n=n.checked,n!=null&&se(r,"checked",n,!1)}function pr(r,n){Vr(r,n);var l=ue(n.value),u=n.type;if(l!=null)u==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(u==="submit"||u==="reset"){r.removeAttribute("value");return}n.hasOwnProperty("value")?Ul(r,n.type,l):n.hasOwnProperty("defaultValue")&&Ul(r,n.type,ue(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(r.defaultChecked=!!n.defaultChecked)}function Ms(r,n,l){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var u=n.type;if(!(u!=="submit"&&u!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+r._wrapperState.initialValue,l||n===r.value||(r.value=n),r.defaultValue=n}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function Ul(r,n,l){(n!=="number"||He(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var Bs=Array.isArray;function Ui(r,n,l,u){if(r=r.options,n){n={};for(var d=0;d<l.length;d++)n["$"+l[d]]=!0;for(l=0;l<r.length;l++)d=n.hasOwnProperty("$"+r[l].value),r[l].selected!==d&&(r[l].selected=d),d&&u&&(r[l].defaultSelected=!0)}else{for(l=""+ue(l),n=null,d=0;d<r.length;d++){if(r[d].value===l){r[d].selected=!0,u&&(r[d].defaultSelected=!0);return}n!==null||r[d].disabled||(n=r[d])}n!==null&&(n.selected=!0)}}function jl(r,n){if(n.dangerouslySetInnerHTML!=null)throw Error(s(91));return $({},n,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Wc(r,n){var l=n.value;if(l==null){if(l=n.children,n=n.defaultValue,l!=null){if(n!=null)throw Error(s(92));if(Bs(l)){if(1<l.length)throw Error(s(93));l=l[0]}n=l}n==null&&(n=""),l=n}r._wrapperState={initialValue:ue(l)}}function Fc(r,n){var l=ue(n.value),u=ue(n.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),n.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),u!=null&&(r.defaultValue=""+u)}function Hc(r){var n=r.textContent;n===r._wrapperState.initialValue&&n!==""&&n!==null&&(r.value=n)}function Uc(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $l(r,n){return r==null||r==="http://www.w3.org/1999/xhtml"?Uc(n):r==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Gn,jc=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,l,u,d){MSApp.execUnsafeLocalFunction(function(){return r(n,l,u,d)})}:r}(function(r,n){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=n;else{for(Gn=Gn||document.createElement("div"),Gn.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Gn.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;n.firstChild;)r.appendChild(n.firstChild)}});function Os(r,n){if(n){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=n;return}}r.textContent=n}var As={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qm=["Webkit","ms","Moz","O"];Object.keys(As).forEach(function(r){qm.forEach(function(n){n=n+r.charAt(0).toUpperCase()+r.substring(1),As[n]=As[r]})});function $c(r,n,l){return n==null||typeof n=="boolean"||n===""?"":l||typeof n!="number"||n===0||As.hasOwnProperty(r)&&As[r]?(""+n).trim():n+"px"}function Kc(r,n){r=r.style;for(var l in n)if(n.hasOwnProperty(l)){var u=l.indexOf("--")===0,d=$c(l,n[l],u);l==="float"&&(l="cssFloat"),u?r.setProperty(l,d):r[l]=d}}var Xm=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kl(r,n){if(n){if(Xm[r]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(s(137,r));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(s(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(s(61))}if(n.style!=null&&typeof n.style!="object")throw Error(s(62))}}function Vl(r,n){if(r.indexOf("-")===-1)return typeof n.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ql=null;function Xl(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Yl=null,ji=null,$i=null;function Vc(r){if(r=sn(r)){if(typeof Yl!="function")throw Error(s(280));var n=r.stateNode;n&&(n=So(n),Yl(r.stateNode,r.type,n))}}function qc(r){ji?$i?$i.push(r):$i=[r]:ji=r}function Xc(){if(ji){var r=ji,n=$i;if($i=ji=null,Vc(r),n)for(r=0;r<n.length;r++)Vc(n[r])}}function Yc(r,n){return r(n)}function Gc(){}var Gl=!1;function Qc(r,n,l){if(Gl)return r(n,l);Gl=!0;try{return Yc(r,n,l)}finally{Gl=!1,(ji!==null||$i!==null)&&(Gc(),Xc())}}function Ns(r,n){var l=r.stateNode;if(l===null)return null;var u=So(l);if(u===null)return null;l=u[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(s(231,n,typeof l));return l}var Ql=!1;if(_)try{var Is={};Object.defineProperty(Is,"passive",{get:function(){Ql=!0}}),window.addEventListener("test",Is,Is),window.removeEventListener("test",Is,Is)}catch{Ql=!1}function Ym(r,n,l,u,d,f,m,S,b){var O=Array.prototype.slice.call(arguments,3);try{n.apply(l,O)}catch(V){this.onError(V)}}var zs=!1,Qn=null,Zn=!1,Zl=null,Gm={onError:function(r){zs=!0,Qn=r}};function Qm(r,n,l,u,d,f,m,S,b){zs=!1,Qn=null,Ym.apply(Gm,arguments)}function Zm(r,n,l,u,d,f,m,S,b){if(Qm.apply(this,arguments),zs){if(zs){var O=Qn;zs=!1,Qn=null}else throw Error(s(198));Zn||(Zn=!0,Zl=O)}}function yi(r){var n=r,l=r;if(r.alternate)for(;n.return;)n=n.return;else{r=n;do n=r,n.flags&4098&&(l=n.return),r=n.return;while(r)}return n.tag===3?l:null}function Zc(r){if(r.tag===13){var n=r.memoizedState;if(n===null&&(r=r.alternate,r!==null&&(n=r.memoizedState)),n!==null)return n.dehydrated}return null}function Jc(r){if(yi(r)!==r)throw Error(s(188))}function Jm(r){var n=r.alternate;if(!n){if(n=yi(r),n===null)throw Error(s(188));return n!==r?null:r}for(var l=r,u=n;;){var d=l.return;if(d===null)break;var f=d.alternate;if(f===null){if(u=d.return,u!==null){l=u;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===l)return Jc(d),r;if(f===u)return Jc(d),n;f=f.sibling}throw Error(s(188))}if(l.return!==u.return)l=d,u=f;else{for(var m=!1,S=d.child;S;){if(S===l){m=!0,l=d,u=f;break}if(S===u){m=!0,u=d,l=f;break}S=S.sibling}if(!m){for(S=f.child;S;){if(S===l){m=!0,l=f,u=d;break}if(S===u){m=!0,u=f,l=d;break}S=S.sibling}if(!m)throw Error(s(189))}}if(l.alternate!==u)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?r:n}function ed(r){return r=Jm(r),r!==null?td(r):null}function td(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var n=td(r);if(n!==null)return n;r=r.sibling}return null}var rd=t.unstable_scheduleCallback,id=t.unstable_cancelCallback,ev=t.unstable_shouldYield,tv=t.unstable_requestPaint,Ze=t.unstable_now,rv=t.unstable_getCurrentPriorityLevel,Jl=t.unstable_ImmediatePriority,sd=t.unstable_UserBlockingPriority,Jn=t.unstable_NormalPriority,iv=t.unstable_LowPriority,nd=t.unstable_IdlePriority,eo=null,gr=null;function sv(r){if(gr&&typeof gr.onCommitFiberRoot=="function")try{gr.onCommitFiberRoot(eo,r,void 0,(r.current.flags&128)===128)}catch{}}var nr=Math.clz32?Math.clz32:lv,nv=Math.log,ov=Math.LN2;function lv(r){return r>>>=0,r===0?32:31-(nv(r)/ov|0)|0}var to=64,ro=4194304;function Ws(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function io(r,n){var l=r.pendingLanes;if(l===0)return 0;var u=0,d=r.suspendedLanes,f=r.pingedLanes,m=l&268435455;if(m!==0){var S=m&~d;S!==0?u=Ws(S):(f&=m,f!==0&&(u=Ws(f)))}else m=l&~d,m!==0?u=Ws(m):f!==0&&(u=Ws(f));if(u===0)return 0;if(n!==0&&n!==u&&!(n&d)&&(d=u&-u,f=n&-n,d>=f||d===16&&(f&4194240)!==0))return n;if(u&4&&(u|=l&16),n=r.entangledLanes,n!==0)for(r=r.entanglements,n&=u;0<n;)l=31-nr(n),d=1<<l,u|=r[l],n&=~d;return u}function av(r,n){switch(r){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hv(r,n){for(var l=r.suspendedLanes,u=r.pingedLanes,d=r.expirationTimes,f=r.pendingLanes;0<f;){var m=31-nr(f),S=1<<m,b=d[m];b===-1?(!(S&l)||S&u)&&(d[m]=av(S,n)):b<=n&&(r.expiredLanes|=S),f&=~S}}function ea(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function od(){var r=to;return to<<=1,!(to&4194240)&&(to=64),r}function ta(r){for(var n=[],l=0;31>l;l++)n.push(r);return n}function Fs(r,n,l){r.pendingLanes|=n,n!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,n=31-nr(n),r[n]=l}function uv(r,n){var l=r.pendingLanes&~n;r.pendingLanes=n,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=n,r.mutableReadLanes&=n,r.entangledLanes&=n,n=r.entanglements;var u=r.eventTimes;for(r=r.expirationTimes;0<l;){var d=31-nr(l),f=1<<d;n[d]=0,u[d]=-1,r[d]=-1,l&=~f}}function ra(r,n){var l=r.entangledLanes|=n;for(r=r.entanglements;l;){var u=31-nr(l),d=1<<u;d&n|r[u]&n&&(r[u]|=n),l&=~d}}var Re=0;function ld(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var ad,ia,hd,ud,cd,sa=!1,so=[],qr=null,Xr=null,Yr=null,Hs=new Map,Us=new Map,Gr=[],cv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dd(r,n){switch(r){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":Hs.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Us.delete(n.pointerId)}}function js(r,n,l,u,d,f){return r===null||r.nativeEvent!==f?(r={blockedOn:n,domEventName:l,eventSystemFlags:u,nativeEvent:f,targetContainers:[d]},n!==null&&(n=sn(n),n!==null&&ia(n)),r):(r.eventSystemFlags|=u,n=r.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),r)}function dv(r,n,l,u,d){switch(n){case"focusin":return qr=js(qr,r,n,l,u,d),!0;case"dragenter":return Xr=js(Xr,r,n,l,u,d),!0;case"mouseover":return Yr=js(Yr,r,n,l,u,d),!0;case"pointerover":var f=d.pointerId;return Hs.set(f,js(Hs.get(f)||null,r,n,l,u,d)),!0;case"gotpointercapture":return f=d.pointerId,Us.set(f,js(Us.get(f)||null,r,n,l,u,d)),!0}return!1}function fd(r){var n=Si(r.target);if(n!==null){var l=yi(n);if(l!==null){if(n=l.tag,n===13){if(n=Zc(l),n!==null){r.blockedOn=n,cd(r.priority,function(){hd(l)});return}}else if(n===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function no(r){if(r.blockedOn!==null)return!1;for(var n=r.targetContainers;0<n.length;){var l=oa(r.domEventName,r.eventSystemFlags,n[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);ql=u,l.target.dispatchEvent(u),ql=null}else return n=sn(l),n!==null&&ia(n),r.blockedOn=l,!1;n.shift()}return!0}function _d(r,n,l){no(r)&&l.delete(n)}function fv(){sa=!1,qr!==null&&no(qr)&&(qr=null),Xr!==null&&no(Xr)&&(Xr=null),Yr!==null&&no(Yr)&&(Yr=null),Hs.forEach(_d),Us.forEach(_d)}function $s(r,n){r.blockedOn===n&&(r.blockedOn=null,sa||(sa=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,fv)))}function Ks(r){function n(d){return $s(d,r)}if(0<so.length){$s(so[0],r);for(var l=1;l<so.length;l++){var u=so[l];u.blockedOn===r&&(u.blockedOn=null)}}for(qr!==null&&$s(qr,r),Xr!==null&&$s(Xr,r),Yr!==null&&$s(Yr,r),Hs.forEach(n),Us.forEach(n),l=0;l<Gr.length;l++)u=Gr[l],u.blockedOn===r&&(u.blockedOn=null);for(;0<Gr.length&&(l=Gr[0],l.blockedOn===null);)fd(l),l.blockedOn===null&&Gr.shift()}var Ki=W.ReactCurrentBatchConfig,oo=!0;function _v(r,n,l,u){var d=Re,f=Ki.transition;Ki.transition=null;try{Re=1,na(r,n,l,u)}finally{Re=d,Ki.transition=f}}function pv(r,n,l,u){var d=Re,f=Ki.transition;Ki.transition=null;try{Re=4,na(r,n,l,u)}finally{Re=d,Ki.transition=f}}function na(r,n,l,u){if(oo){var d=oa(r,n,l,u);if(d===null)ba(r,n,u,lo,l),dd(r,u);else if(dv(d,r,n,l,u))u.stopPropagation();else if(dd(r,u),n&4&&-1<cv.indexOf(r)){for(;d!==null;){var f=sn(d);if(f!==null&&ad(f),f=oa(r,n,l,u),f===null&&ba(r,n,u,lo,l),f===d)break;d=f}d!==null&&u.stopPropagation()}else ba(r,n,u,null,l)}}var lo=null;function oa(r,n,l,u){if(lo=null,r=Xl(u),r=Si(r),r!==null)if(n=yi(r),n===null)r=null;else if(l=n.tag,l===13){if(r=Zc(n),r!==null)return r;r=null}else if(l===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;r=null}else n!==r&&(r=null);return lo=r,null}function pd(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rv()){case Jl:return 1;case sd:return 4;case Jn:case iv:return 16;case nd:return 536870912;default:return 16}default:return 16}}var Qr=null,la=null,ao=null;function gd(){if(ao)return ao;var r,n=la,l=n.length,u,d="value"in Qr?Qr.value:Qr.textContent,f=d.length;for(r=0;r<l&&n[r]===d[r];r++);var m=l-r;for(u=1;u<=m&&n[l-u]===d[f-u];u++);return ao=d.slice(r,1<u?1-u:void 0)}function ho(r){var n=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&n===13&&(r=13)):r=n,r===10&&(r=13),32<=r||r===13?r:0}function uo(){return!0}function md(){return!1}function jt(r){function n(l,u,d,f,m){this._reactName=l,this._targetInst=d,this.type=u,this.nativeEvent=f,this.target=m,this.currentTarget=null;for(var S in r)r.hasOwnProperty(S)&&(l=r[S],this[S]=l?l(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?uo:md,this.isPropagationStopped=md,this}return $(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=uo)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=uo)},persist:function(){},isPersistent:uo}),n}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aa=jt(Vi),Vs=$({},Vi,{view:0,detail:0}),gv=jt(Vs),ha,ua,qs,co=$({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:da,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==qs&&(qs&&r.type==="mousemove"?(ha=r.screenX-qs.screenX,ua=r.screenY-qs.screenY):ua=ha=0,qs=r),ha)},movementY:function(r){return"movementY"in r?r.movementY:ua}}),vd=jt(co),mv=$({},co,{dataTransfer:0}),vv=jt(mv),yv=$({},Vs,{relatedTarget:0}),ca=jt(yv),Sv=$({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),wv=jt(Sv),Cv=$({},Vi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),bv=jt(Cv),kv=$({},Vi,{data:0}),yd=jt(kv),xv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ev={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lv(r){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(r):(r=Pv[r])?!!n[r]:!1}function da(){return Lv}var Rv=$({},Vs,{key:function(r){if(r.key){var n=xv[r.key]||r.key;if(n!=="Unidentified")return n}return r.type==="keypress"?(r=ho(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Ev[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:da,charCode:function(r){return r.type==="keypress"?ho(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ho(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Dv=jt(Rv),Tv=$({},co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sd=jt(Tv),Mv=$({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:da}),Bv=jt(Mv),Ov=$({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Av=jt(Ov),Nv=$({},co,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Iv=jt(Nv),zv=[9,13,27,32],fa=_&&"CompositionEvent"in window,Xs=null;_&&"documentMode"in document&&(Xs=document.documentMode);var Wv=_&&"TextEvent"in window&&!Xs,wd=_&&(!fa||Xs&&8<Xs&&11>=Xs),Cd=" ",bd=!1;function kd(r,n){switch(r){case"keyup":return zv.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xd(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var qi=!1;function Fv(r,n){switch(r){case"compositionend":return xd(n);case"keypress":return n.which!==32?null:(bd=!0,Cd);case"textInput":return r=n.data,r===Cd&&bd?null:r;default:return null}}function Hv(r,n){if(qi)return r==="compositionend"||!fa&&kd(r,n)?(r=gd(),ao=la=Qr=null,qi=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return wd&&n.locale!=="ko"?null:n.data;default:return null}}var Uv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ed(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n==="input"?!!Uv[r.type]:n==="textarea"}function Pd(r,n,l,u){qc(u),n=mo(n,"onChange"),0<n.length&&(l=new aa("onChange","change",null,l,u),r.push({event:l,listeners:n}))}var Ys=null,Gs=null;function jv(r){Kd(r,0)}function fo(r){var n=Zi(r);if(Qe(n))return r}function $v(r,n){if(r==="change")return n}var Ld=!1;if(_){var _a;if(_){var pa="oninput"in document;if(!pa){var Rd=document.createElement("div");Rd.setAttribute("oninput","return;"),pa=typeof Rd.oninput=="function"}_a=pa}else _a=!1;Ld=_a&&(!document.documentMode||9<document.documentMode)}function Dd(){Ys&&(Ys.detachEvent("onpropertychange",Td),Gs=Ys=null)}function Td(r){if(r.propertyName==="value"&&fo(Gs)){var n=[];Pd(n,Gs,r,Xl(r)),Qc(jv,n)}}function Kv(r,n,l){r==="focusin"?(Dd(),Ys=n,Gs=l,Ys.attachEvent("onpropertychange",Td)):r==="focusout"&&Dd()}function Vv(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return fo(Gs)}function qv(r,n){if(r==="click")return fo(n)}function Xv(r,n){if(r==="input"||r==="change")return fo(n)}function Yv(r,n){return r===n&&(r!==0||1/r===1/n)||r!==r&&n!==n}var or=typeof Object.is=="function"?Object.is:Yv;function Qs(r,n){if(or(r,n))return!0;if(typeof r!="object"||r===null||typeof n!="object"||n===null)return!1;var l=Object.keys(r),u=Object.keys(n);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var d=l[u];if(!g.call(n,d)||!or(r[d],n[d]))return!1}return!0}function Md(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Bd(r,n){var l=Md(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=n&&u>=n)return{node:l,offset:n-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Md(l)}}function Od(r,n){return r&&n?r===n?!0:r&&r.nodeType===3?!1:n&&n.nodeType===3?Od(r,n.parentNode):"contains"in r?r.contains(n):r.compareDocumentPosition?!!(r.compareDocumentPosition(n)&16):!1:!1}function Ad(){for(var r=window,n=He();n instanceof r.HTMLIFrameElement;){try{var l=typeof n.contentWindow.location.href=="string"}catch{l=!1}if(l)r=n.contentWindow;else break;n=He(r.document)}return n}function ga(r){var n=r&&r.nodeName&&r.nodeName.toLowerCase();return n&&(n==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||n==="textarea"||r.contentEditable==="true")}function Gv(r){var n=Ad(),l=r.focusedElem,u=r.selectionRange;if(n!==l&&l&&l.ownerDocument&&Od(l.ownerDocument.documentElement,l)){if(u!==null&&ga(l)){if(n=u.start,r=u.end,r===void 0&&(r=n),"selectionStart"in l)l.selectionStart=n,l.selectionEnd=Math.min(r,l.value.length);else if(r=(n=l.ownerDocument||document)&&n.defaultView||window,r.getSelection){r=r.getSelection();var d=l.textContent.length,f=Math.min(u.start,d);u=u.end===void 0?f:Math.min(u.end,d),!r.extend&&f>u&&(d=u,u=f,f=d),d=Bd(l,f);var m=Bd(l,u);d&&m&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==m.node||r.focusOffset!==m.offset)&&(n=n.createRange(),n.setStart(d.node,d.offset),r.removeAllRanges(),f>u?(r.addRange(n),r.extend(m.node,m.offset)):(n.setEnd(m.node,m.offset),r.addRange(n)))}}for(n=[],r=l;r=r.parentNode;)r.nodeType===1&&n.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<n.length;l++)r=n[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Qv=_&&"documentMode"in document&&11>=document.documentMode,Xi=null,ma=null,Zs=null,va=!1;function Nd(r,n,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;va||Xi==null||Xi!==He(u)||(u=Xi,"selectionStart"in u&&ga(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Zs&&Qs(Zs,u)||(Zs=u,u=mo(ma,"onSelect"),0<u.length&&(n=new aa("onSelect","select",null,n,l),r.push({event:n,listeners:u}),n.target=Xi)))}function _o(r,n){var l={};return l[r.toLowerCase()]=n.toLowerCase(),l["Webkit"+r]="webkit"+n,l["Moz"+r]="moz"+n,l}var Yi={animationend:_o("Animation","AnimationEnd"),animationiteration:_o("Animation","AnimationIteration"),animationstart:_o("Animation","AnimationStart"),transitionend:_o("Transition","TransitionEnd")},ya={},Id={};_&&(Id=document.createElement("div").style,"AnimationEvent"in window||(delete Yi.animationend.animation,delete Yi.animationiteration.animation,delete Yi.animationstart.animation),"TransitionEvent"in window||delete Yi.transitionend.transition);function po(r){if(ya[r])return ya[r];if(!Yi[r])return r;var n=Yi[r],l;for(l in n)if(n.hasOwnProperty(l)&&l in Id)return ya[r]=n[l];return r}var zd=po("animationend"),Wd=po("animationiteration"),Fd=po("animationstart"),Hd=po("transitionend"),Ud=new Map,jd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(r,n){Ud.set(r,n),h(n,[r])}for(var Sa=0;Sa<jd.length;Sa++){var wa=jd[Sa],Zv=wa.toLowerCase(),Jv=wa[0].toUpperCase()+wa.slice(1);Zr(Zv,"on"+Jv)}Zr(zd,"onAnimationEnd"),Zr(Wd,"onAnimationIteration"),Zr(Fd,"onAnimationStart"),Zr("dblclick","onDoubleClick"),Zr("focusin","onFocus"),Zr("focusout","onBlur"),Zr(Hd,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),h("onBeforeInput",["compositionend","keypress","textInput","paste"]),h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ey=new Set("cancel close invalid load scroll toggle".split(" ").concat(Js));function $d(r,n,l){var u=r.type||"unknown-event";r.currentTarget=l,Zm(u,n,void 0,r),r.currentTarget=null}function Kd(r,n){n=(n&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],d=u.event;u=u.listeners;e:{var f=void 0;if(n)for(var m=u.length-1;0<=m;m--){var S=u[m],b=S.instance,O=S.currentTarget;if(S=S.listener,b!==f&&d.isPropagationStopped())break e;$d(d,S,O),f=b}else for(m=0;m<u.length;m++){if(S=u[m],b=S.instance,O=S.currentTarget,S=S.listener,b!==f&&d.isPropagationStopped())break e;$d(d,S,O),f=b}}}if(Zn)throw r=Zl,Zn=!1,Zl=null,r}function Oe(r,n){var l=n[Ra];l===void 0&&(l=n[Ra]=new Set);var u=r+"__bubble";l.has(u)||(Vd(n,r,2,!1),l.add(u))}function Ca(r,n,l){var u=0;n&&(u|=4),Vd(l,r,u,n)}var go="_reactListening"+Math.random().toString(36).slice(2);function en(r){if(!r[go]){r[go]=!0,o.forEach(function(l){l!=="selectionchange"&&(ey.has(l)||Ca(l,!1,r),Ca(l,!0,r))});var n=r.nodeType===9?r:r.ownerDocument;n===null||n[go]||(n[go]=!0,Ca("selectionchange",!1,n))}}function Vd(r,n,l,u){switch(pd(n)){case 1:var d=_v;break;case 4:d=pv;break;default:d=na}l=d.bind(null,n,l,r),d=void 0,!Ql||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),u?d!==void 0?r.addEventListener(n,l,{capture:!0,passive:d}):r.addEventListener(n,l,!0):d!==void 0?r.addEventListener(n,l,{passive:d}):r.addEventListener(n,l,!1)}function ba(r,n,l,u,d){var f=u;if(!(n&1)&&!(n&2)&&u!==null)e:for(;;){if(u===null)return;var m=u.tag;if(m===3||m===4){var S=u.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(m===4)for(m=u.return;m!==null;){var b=m.tag;if((b===3||b===4)&&(b=m.stateNode.containerInfo,b===d||b.nodeType===8&&b.parentNode===d))return;m=m.return}for(;S!==null;){if(m=Si(S),m===null)return;if(b=m.tag,b===5||b===6){u=f=m;continue e}S=S.parentNode}}u=u.return}Qc(function(){var O=f,V=Xl(l),Y=[];e:{var K=Ud.get(r);if(K!==void 0){var ne=aa,ce=r;switch(r){case"keypress":if(ho(l)===0)break e;case"keydown":case"keyup":ne=Dv;break;case"focusin":ce="focus",ne=ca;break;case"focusout":ce="blur",ne=ca;break;case"beforeblur":case"afterblur":ne=ca;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=vd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=vv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Bv;break;case zd:case Wd:case Fd:ne=wv;break;case Hd:ne=Av;break;case"scroll":ne=gv;break;case"wheel":ne=Iv;break;case"copy":case"cut":case"paste":ne=bv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Sd}var de=(n&4)!==0,Je=!de&&r==="scroll",L=de?K!==null?K+"Capture":null:K;de=[];for(var x=O,R;x!==null;){R=x;var Z=R.stateNode;if(R.tag===5&&Z!==null&&(R=Z,L!==null&&(Z=Ns(x,L),Z!=null&&de.push(tn(x,Z,R)))),Je)break;x=x.return}0<de.length&&(K=new ne(K,ce,null,l,V),Y.push({event:K,listeners:de}))}}if(!(n&7)){e:{if(K=r==="mouseover"||r==="pointerover",ne=r==="mouseout"||r==="pointerout",K&&l!==ql&&(ce=l.relatedTarget||l.fromElement)&&(Si(ce)||ce[Or]))break e;if((ne||K)&&(K=V.window===V?V:(K=V.ownerDocument)?K.defaultView||K.parentWindow:window,ne?(ce=l.relatedTarget||l.toElement,ne=O,ce=ce?Si(ce):null,ce!==null&&(Je=yi(ce),ce!==Je||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(ne=null,ce=O),ne!==ce)){if(de=vd,Z="onMouseLeave",L="onMouseEnter",x="mouse",(r==="pointerout"||r==="pointerover")&&(de=Sd,Z="onPointerLeave",L="onPointerEnter",x="pointer"),Je=ne==null?K:Zi(ne),R=ce==null?K:Zi(ce),K=new de(Z,x+"leave",ne,l,V),K.target=Je,K.relatedTarget=R,Z=null,Si(V)===O&&(de=new de(L,x+"enter",ce,l,V),de.target=R,de.relatedTarget=Je,Z=de),Je=Z,ne&&ce)t:{for(de=ne,L=ce,x=0,R=de;R;R=Gi(R))x++;for(R=0,Z=L;Z;Z=Gi(Z))R++;for(;0<x-R;)de=Gi(de),x--;for(;0<R-x;)L=Gi(L),R--;for(;x--;){if(de===L||L!==null&&de===L.alternate)break t;de=Gi(de),L=Gi(L)}de=null}else de=null;ne!==null&&qd(Y,K,ne,de,!1),ce!==null&&Je!==null&&qd(Y,Je,ce,de,!0)}}e:{if(K=O?Zi(O):window,ne=K.nodeName&&K.nodeName.toLowerCase(),ne==="select"||ne==="input"&&K.type==="file")var _e=$v;else if(Ed(K))if(Ld)_e=Xv;else{_e=Vv;var ge=Kv}else(ne=K.nodeName)&&ne.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(_e=qv);if(_e&&(_e=_e(r,O))){Pd(Y,_e,l,V);break e}ge&&ge(r,K,O),r==="focusout"&&(ge=K._wrapperState)&&ge.controlled&&K.type==="number"&&Ul(K,"number",K.value)}switch(ge=O?Zi(O):window,r){case"focusin":(Ed(ge)||ge.contentEditable==="true")&&(Xi=ge,ma=O,Zs=null);break;case"focusout":Zs=ma=Xi=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,Nd(Y,l,V);break;case"selectionchange":if(Qv)break;case"keydown":case"keyup":Nd(Y,l,V)}var me;if(fa)e:{switch(r){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else qi?kd(r,l)&&(ye="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(ye="onCompositionStart");ye&&(wd&&l.locale!=="ko"&&(qi||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&qi&&(me=gd()):(Qr=V,la="value"in Qr?Qr.value:Qr.textContent,qi=!0)),ge=mo(O,ye),0<ge.length&&(ye=new yd(ye,r,null,l,V),Y.push({event:ye,listeners:ge}),me?ye.data=me:(me=xd(l),me!==null&&(ye.data=me)))),(me=Wv?Fv(r,l):Hv(r,l))&&(O=mo(O,"onBeforeInput"),0<O.length&&(V=new yd("onBeforeInput","beforeinput",null,l,V),Y.push({event:V,listeners:O}),V.data=me))}Kd(Y,n)})}function tn(r,n,l){return{instance:r,listener:n,currentTarget:l}}function mo(r,n){for(var l=n+"Capture",u=[];r!==null;){var d=r,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Ns(r,l),f!=null&&u.unshift(tn(r,f,d)),f=Ns(r,n),f!=null&&u.push(tn(r,f,d))),r=r.return}return u}function Gi(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function qd(r,n,l,u,d){for(var f=n._reactName,m=[];l!==null&&l!==u;){var S=l,b=S.alternate,O=S.stateNode;if(b!==null&&b===u)break;S.tag===5&&O!==null&&(S=O,d?(b=Ns(l,f),b!=null&&m.unshift(tn(l,b,S))):d||(b=Ns(l,f),b!=null&&m.push(tn(l,b,S)))),l=l.return}m.length!==0&&r.push({event:n,listeners:m})}var ty=/\r\n?/g,ry=/\u0000|\uFFFD/g;function Xd(r){return(typeof r=="string"?r:""+r).replace(ty,`
`).replace(ry,"")}function vo(r,n,l){if(n=Xd(n),Xd(r)!==n&&l)throw Error(s(425))}function yo(){}var ka=null,xa=null;function Ea(r,n){return r==="textarea"||r==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Pa=typeof setTimeout=="function"?setTimeout:void 0,iy=typeof clearTimeout=="function"?clearTimeout:void 0,Yd=typeof Promise=="function"?Promise:void 0,sy=typeof queueMicrotask=="function"?queueMicrotask:typeof Yd<"u"?function(r){return Yd.resolve(null).then(r).catch(ny)}:Pa;function ny(r){setTimeout(function(){throw r})}function La(r,n){var l=n,u=0;do{var d=l.nextSibling;if(r.removeChild(l),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(u===0){r.removeChild(d),Ks(n);return}u--}else l!=="$"&&l!=="$?"&&l!=="$!"||u++;l=d}while(l);Ks(n)}function Jr(r){for(;r!=null;r=r.nextSibling){var n=r.nodeType;if(n===1||n===3)break;if(n===8){if(n=r.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return r}function Gd(r){r=r.previousSibling;for(var n=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(n===0)return r;n--}else l==="/$"&&n++}r=r.previousSibling}return null}var Qi=Math.random().toString(36).slice(2),mr="__reactFiber$"+Qi,rn="__reactProps$"+Qi,Or="__reactContainer$"+Qi,Ra="__reactEvents$"+Qi,oy="__reactListeners$"+Qi,ly="__reactHandles$"+Qi;function Si(r){var n=r[mr];if(n)return n;for(var l=r.parentNode;l;){if(n=l[Or]||l[mr]){if(l=n.alternate,n.child!==null||l!==null&&l.child!==null)for(r=Gd(r);r!==null;){if(l=r[mr])return l;r=Gd(r)}return n}r=l,l=r.parentNode}return null}function sn(r){return r=r[mr]||r[Or],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function Zi(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(s(33))}function So(r){return r[rn]||null}var Da=[],Ji=-1;function ei(r){return{current:r}}function Ae(r){0>Ji||(r.current=Da[Ji],Da[Ji]=null,Ji--)}function Me(r,n){Ji++,Da[Ji]=r.current,r.current=n}var ti={},Ct=ei(ti),Ot=ei(!1),wi=ti;function es(r,n){var l=r.type.contextTypes;if(!l)return ti;var u=r.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===n)return u.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in l)d[f]=n[f];return u&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=n,r.__reactInternalMemoizedMaskedChildContext=d),d}function At(r){return r=r.childContextTypes,r!=null}function wo(){Ae(Ot),Ae(Ct)}function Qd(r,n,l){if(Ct.current!==ti)throw Error(s(168));Me(Ct,n),Me(Ot,l)}function Zd(r,n,l){var u=r.stateNode;if(n=n.childContextTypes,typeof u.getChildContext!="function")return l;u=u.getChildContext();for(var d in u)if(!(d in n))throw Error(s(108,oe(r)||"Unknown",d));return $({},l,u)}function Co(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ti,wi=Ct.current,Me(Ct,r),Me(Ot,Ot.current),!0}function Jd(r,n,l){var u=r.stateNode;if(!u)throw Error(s(169));l?(r=Zd(r,n,wi),u.__reactInternalMemoizedMergedChildContext=r,Ae(Ot),Ae(Ct),Me(Ct,r)):Ae(Ot),Me(Ot,l)}var Ar=null,bo=!1,Ta=!1;function ef(r){Ar===null?Ar=[r]:Ar.push(r)}function ay(r){bo=!0,ef(r)}function ri(){if(!Ta&&Ar!==null){Ta=!0;var r=0,n=Re;try{var l=Ar;for(Re=1;r<l.length;r++){var u=l[r];do u=u(!0);while(u!==null)}Ar=null,bo=!1}catch(d){throw Ar!==null&&(Ar=Ar.slice(r+1)),rd(Jl,ri),d}finally{Re=n,Ta=!1}}return null}var ts=[],rs=0,ko=null,xo=0,Yt=[],Gt=0,Ci=null,Nr=1,Ir="";function bi(r,n){ts[rs++]=xo,ts[rs++]=ko,ko=r,xo=n}function tf(r,n,l){Yt[Gt++]=Nr,Yt[Gt++]=Ir,Yt[Gt++]=Ci,Ci=r;var u=Nr;r=Ir;var d=32-nr(u)-1;u&=~(1<<d),l+=1;var f=32-nr(n)+d;if(30<f){var m=d-d%5;f=(u&(1<<m)-1).toString(32),u>>=m,d-=m,Nr=1<<32-nr(n)+d|l<<d|u,Ir=f+r}else Nr=1<<f|l<<d|u,Ir=r}function Ma(r){r.return!==null&&(bi(r,1),tf(r,1,0))}function Ba(r){for(;r===ko;)ko=ts[--rs],ts[rs]=null,xo=ts[--rs],ts[rs]=null;for(;r===Ci;)Ci=Yt[--Gt],Yt[Gt]=null,Ir=Yt[--Gt],Yt[Gt]=null,Nr=Yt[--Gt],Yt[Gt]=null}var $t=null,Kt=null,Ne=!1,lr=null;function rf(r,n){var l=er(5,null,null,0);l.elementType="DELETED",l.stateNode=n,l.return=r,n=r.deletions,n===null?(r.deletions=[l],r.flags|=16):n.push(l)}function sf(r,n){switch(r.tag){case 5:var l=r.type;return n=n.nodeType!==1||l.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(r.stateNode=n,$t=r,Kt=Jr(n.firstChild),!0):!1;case 6:return n=r.pendingProps===""||n.nodeType!==3?null:n,n!==null?(r.stateNode=n,$t=r,Kt=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(l=Ci!==null?{id:Nr,overflow:Ir}:null,r.memoizedState={dehydrated:n,treeContext:l,retryLane:1073741824},l=er(18,null,null,0),l.stateNode=n,l.return=r,r.child=l,$t=r,Kt=null,!0):!1;default:return!1}}function Oa(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Aa(r){if(Ne){var n=Kt;if(n){var l=n;if(!sf(r,n)){if(Oa(r))throw Error(s(418));n=Jr(l.nextSibling);var u=$t;n&&sf(r,n)?rf(u,l):(r.flags=r.flags&-4097|2,Ne=!1,$t=r)}}else{if(Oa(r))throw Error(s(418));r.flags=r.flags&-4097|2,Ne=!1,$t=r}}}function nf(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;$t=r}function Eo(r){if(r!==$t)return!1;if(!Ne)return nf(r),Ne=!0,!1;var n;if((n=r.tag!==3)&&!(n=r.tag!==5)&&(n=r.type,n=n!=="head"&&n!=="body"&&!Ea(r.type,r.memoizedProps)),n&&(n=Kt)){if(Oa(r))throw of(),Error(s(418));for(;n;)rf(r,n),n=Jr(n.nextSibling)}if(nf(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));e:{for(r=r.nextSibling,n=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(n===0){Kt=Jr(r.nextSibling);break e}n--}else l!=="$"&&l!=="$!"&&l!=="$?"||n++}r=r.nextSibling}Kt=null}}else Kt=$t?Jr(r.stateNode.nextSibling):null;return!0}function of(){for(var r=Kt;r;)r=Jr(r.nextSibling)}function is(){Kt=$t=null,Ne=!1}function Na(r){lr===null?lr=[r]:lr.push(r)}var hy=W.ReactCurrentBatchConfig;function nn(r,n,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(s(309));var u=l.stateNode}if(!u)throw Error(s(147,r));var d=u,f=""+r;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===f?n.ref:(n=function(m){var S=d.refs;m===null?delete S[f]:S[f]=m},n._stringRef=f,n)}if(typeof r!="string")throw Error(s(284));if(!l._owner)throw Error(s(290,r))}return r}function Po(r,n){throw r=Object.prototype.toString.call(n),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":r))}function lf(r){var n=r._init;return n(r._payload)}function af(r){function n(L,x){if(r){var R=L.deletions;R===null?(L.deletions=[x],L.flags|=16):R.push(x)}}function l(L,x){if(!r)return null;for(;x!==null;)n(L,x),x=x.sibling;return null}function u(L,x){for(L=new Map;x!==null;)x.key!==null?L.set(x.key,x):L.set(x.index,x),x=x.sibling;return L}function d(L,x){return L=ui(L,x),L.index=0,L.sibling=null,L}function f(L,x,R){return L.index=R,r?(R=L.alternate,R!==null?(R=R.index,R<x?(L.flags|=2,x):R):(L.flags|=2,x)):(L.flags|=1048576,x)}function m(L){return r&&L.alternate===null&&(L.flags|=2),L}function S(L,x,R,Z){return x===null||x.tag!==6?(x=Ph(R,L.mode,Z),x.return=L,x):(x=d(x,R),x.return=L,x)}function b(L,x,R,Z){var _e=R.type;return _e===fe?V(L,x,R.props.children,Z,R.key):x!==null&&(x.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===z&&lf(_e)===x.type)?(Z=d(x,R.props),Z.ref=nn(L,x,R),Z.return=L,Z):(Z=Qo(R.type,R.key,R.props,null,L.mode,Z),Z.ref=nn(L,x,R),Z.return=L,Z)}function O(L,x,R,Z){return x===null||x.tag!==4||x.stateNode.containerInfo!==R.containerInfo||x.stateNode.implementation!==R.implementation?(x=Lh(R,L.mode,Z),x.return=L,x):(x=d(x,R.children||[]),x.return=L,x)}function V(L,x,R,Z,_e){return x===null||x.tag!==7?(x=Ti(R,L.mode,Z,_e),x.return=L,x):(x=d(x,R),x.return=L,x)}function Y(L,x,R){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ph(""+x,L.mode,R),x.return=L,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case G:return R=Qo(x.type,x.key,x.props,null,L.mode,R),R.ref=nn(L,null,x),R.return=L,R;case ee:return x=Lh(x,L.mode,R),x.return=L,x;case z:var Z=x._init;return Y(L,Z(x._payload),R)}if(Bs(x)||q(x))return x=Ti(x,L.mode,R,null),x.return=L,x;Po(L,x)}return null}function K(L,x,R,Z){var _e=x!==null?x.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return _e!==null?null:S(L,x,""+R,Z);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case G:return R.key===_e?b(L,x,R,Z):null;case ee:return R.key===_e?O(L,x,R,Z):null;case z:return _e=R._init,K(L,x,_e(R._payload),Z)}if(Bs(R)||q(R))return _e!==null?null:V(L,x,R,Z,null);Po(L,R)}return null}function ne(L,x,R,Z,_e){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return L=L.get(R)||null,S(x,L,""+Z,_e);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case G:return L=L.get(Z.key===null?R:Z.key)||null,b(x,L,Z,_e);case ee:return L=L.get(Z.key===null?R:Z.key)||null,O(x,L,Z,_e);case z:var ge=Z._init;return ne(L,x,R,ge(Z._payload),_e)}if(Bs(Z)||q(Z))return L=L.get(R)||null,V(x,L,Z,_e,null);Po(x,Z)}return null}function ce(L,x,R,Z){for(var _e=null,ge=null,me=x,ye=x=0,ct=null;me!==null&&ye<R.length;ye++){me.index>ye?(ct=me,me=null):ct=me.sibling;var Pe=K(L,me,R[ye],Z);if(Pe===null){me===null&&(me=ct);break}r&&me&&Pe.alternate===null&&n(L,me),x=f(Pe,x,ye),ge===null?_e=Pe:ge.sibling=Pe,ge=Pe,me=ct}if(ye===R.length)return l(L,me),Ne&&bi(L,ye),_e;if(me===null){for(;ye<R.length;ye++)me=Y(L,R[ye],Z),me!==null&&(x=f(me,x,ye),ge===null?_e=me:ge.sibling=me,ge=me);return Ne&&bi(L,ye),_e}for(me=u(L,me);ye<R.length;ye++)ct=ne(me,L,ye,R[ye],Z),ct!==null&&(r&&ct.alternate!==null&&me.delete(ct.key===null?ye:ct.key),x=f(ct,x,ye),ge===null?_e=ct:ge.sibling=ct,ge=ct);return r&&me.forEach(function(ci){return n(L,ci)}),Ne&&bi(L,ye),_e}function de(L,x,R,Z){var _e=q(R);if(typeof _e!="function")throw Error(s(150));if(R=_e.call(R),R==null)throw Error(s(151));for(var ge=_e=null,me=x,ye=x=0,ct=null,Pe=R.next();me!==null&&!Pe.done;ye++,Pe=R.next()){me.index>ye?(ct=me,me=null):ct=me.sibling;var ci=K(L,me,Pe.value,Z);if(ci===null){me===null&&(me=ct);break}r&&me&&ci.alternate===null&&n(L,me),x=f(ci,x,ye),ge===null?_e=ci:ge.sibling=ci,ge=ci,me=ct}if(Pe.done)return l(L,me),Ne&&bi(L,ye),_e;if(me===null){for(;!Pe.done;ye++,Pe=R.next())Pe=Y(L,Pe.value,Z),Pe!==null&&(x=f(Pe,x,ye),ge===null?_e=Pe:ge.sibling=Pe,ge=Pe);return Ne&&bi(L,ye),_e}for(me=u(L,me);!Pe.done;ye++,Pe=R.next())Pe=ne(me,L,ye,Pe.value,Z),Pe!==null&&(r&&Pe.alternate!==null&&me.delete(Pe.key===null?ye:Pe.key),x=f(Pe,x,ye),ge===null?_e=Pe:ge.sibling=Pe,ge=Pe);return r&&me.forEach(function(Uy){return n(L,Uy)}),Ne&&bi(L,ye),_e}function Je(L,x,R,Z){if(typeof R=="object"&&R!==null&&R.type===fe&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case G:e:{for(var _e=R.key,ge=x;ge!==null;){if(ge.key===_e){if(_e=R.type,_e===fe){if(ge.tag===7){l(L,ge.sibling),x=d(ge,R.props.children),x.return=L,L=x;break e}}else if(ge.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===z&&lf(_e)===ge.type){l(L,ge.sibling),x=d(ge,R.props),x.ref=nn(L,ge,R),x.return=L,L=x;break e}l(L,ge);break}else n(L,ge);ge=ge.sibling}R.type===fe?(x=Ti(R.props.children,L.mode,Z,R.key),x.return=L,L=x):(Z=Qo(R.type,R.key,R.props,null,L.mode,Z),Z.ref=nn(L,x,R),Z.return=L,L=Z)}return m(L);case ee:e:{for(ge=R.key;x!==null;){if(x.key===ge)if(x.tag===4&&x.stateNode.containerInfo===R.containerInfo&&x.stateNode.implementation===R.implementation){l(L,x.sibling),x=d(x,R.children||[]),x.return=L,L=x;break e}else{l(L,x);break}else n(L,x);x=x.sibling}x=Lh(R,L.mode,Z),x.return=L,L=x}return m(L);case z:return ge=R._init,Je(L,x,ge(R._payload),Z)}if(Bs(R))return ce(L,x,R,Z);if(q(R))return de(L,x,R,Z);Po(L,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,x!==null&&x.tag===6?(l(L,x.sibling),x=d(x,R),x.return=L,L=x):(l(L,x),x=Ph(R,L.mode,Z),x.return=L,L=x),m(L)):l(L,x)}return Je}var ss=af(!0),hf=af(!1),Lo=ei(null),Ro=null,ns=null,Ia=null;function za(){Ia=ns=Ro=null}function Wa(r){var n=Lo.current;Ae(Lo),r._currentValue=n}function Fa(r,n,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&n)!==n?(r.childLanes|=n,u!==null&&(u.childLanes|=n)):u!==null&&(u.childLanes&n)!==n&&(u.childLanes|=n),r===l)break;r=r.return}}function os(r,n){Ro=r,Ia=ns=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&n&&(Nt=!0),r.firstContext=null)}function Qt(r){var n=r._currentValue;if(Ia!==r)if(r={context:r,memoizedValue:n,next:null},ns===null){if(Ro===null)throw Error(s(308));ns=r,Ro.dependencies={lanes:0,firstContext:r}}else ns=ns.next=r;return n}var ki=null;function Ha(r){ki===null?ki=[r]:ki.push(r)}function uf(r,n,l,u){var d=n.interleaved;return d===null?(l.next=l,Ha(n)):(l.next=d.next,d.next=l),n.interleaved=l,zr(r,u)}function zr(r,n){r.lanes|=n;var l=r.alternate;for(l!==null&&(l.lanes|=n),l=r,r=r.return;r!==null;)r.childLanes|=n,l=r.alternate,l!==null&&(l.childLanes|=n),l=r,r=r.return;return l.tag===3?l.stateNode:null}var ii=!1;function Ua(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cf(r,n){r=r.updateQueue,n.updateQueue===r&&(n.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Wr(r,n){return{eventTime:r,lane:n,tag:0,payload:null,callback:null,next:null}}function si(r,n,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,Ee&2){var d=u.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),u.pending=n,zr(r,l)}return d=u.interleaved,d===null?(n.next=n,Ha(u)):(n.next=d.next,d.next=n),u.interleaved=n,zr(r,l)}function Do(r,n,l){if(n=n.updateQueue,n!==null&&(n=n.shared,(l&4194240)!==0)){var u=n.lanes;u&=r.pendingLanes,l|=u,n.lanes=l,ra(r,l)}}function df(r,n){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var d=null,f=null;if(l=l.firstBaseUpdate,l!==null){do{var m={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};f===null?d=f=m:f=f.next=m,l=l.next}while(l!==null);f===null?d=f=n:f=f.next=n}else d=f=n;l={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:u.shared,effects:u.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=n:r.next=n,l.lastBaseUpdate=n}function To(r,n,l,u){var d=r.updateQueue;ii=!1;var f=d.firstBaseUpdate,m=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var b=S,O=b.next;b.next=null,m===null?f=O:m.next=O,m=b;var V=r.alternate;V!==null&&(V=V.updateQueue,S=V.lastBaseUpdate,S!==m&&(S===null?V.firstBaseUpdate=O:S.next=O,V.lastBaseUpdate=b))}if(f!==null){var Y=d.baseState;m=0,V=O=b=null,S=f;do{var K=S.lane,ne=S.eventTime;if((u&K)===K){V!==null&&(V=V.next={eventTime:ne,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ce=r,de=S;switch(K=n,ne=l,de.tag){case 1:if(ce=de.payload,typeof ce=="function"){Y=ce.call(ne,Y,K);break e}Y=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=de.payload,K=typeof ce=="function"?ce.call(ne,Y,K):ce,K==null)break e;Y=$({},Y,K);break e;case 2:ii=!0}}S.callback!==null&&S.lane!==0&&(r.flags|=64,K=d.effects,K===null?d.effects=[S]:K.push(S))}else ne={eventTime:ne,lane:K,tag:S.tag,payload:S.payload,callback:S.callback,next:null},V===null?(O=V=ne,b=Y):V=V.next=ne,m|=K;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;K=S,S=K.next,K.next=null,d.lastBaseUpdate=K,d.shared.pending=null}}while(!0);if(V===null&&(b=Y),d.baseState=b,d.firstBaseUpdate=O,d.lastBaseUpdate=V,n=d.shared.interleaved,n!==null){d=n;do m|=d.lane,d=d.next;while(d!==n)}else f===null&&(d.shared.lanes=0);Pi|=m,r.lanes=m,r.memoizedState=Y}}function ff(r,n,l){if(r=n.effects,n.effects=null,r!==null)for(n=0;n<r.length;n++){var u=r[n],d=u.callback;if(d!==null){if(u.callback=null,u=l,typeof d!="function")throw Error(s(191,d));d.call(u)}}}var on={},vr=ei(on),ln=ei(on),an=ei(on);function xi(r){if(r===on)throw Error(s(174));return r}function ja(r,n){switch(Me(an,n),Me(ln,r),Me(vr,on),r=n.nodeType,r){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:$l(null,"");break;default:r=r===8?n.parentNode:n,n=r.namespaceURI||null,r=r.tagName,n=$l(n,r)}Ae(vr),Me(vr,n)}function ls(){Ae(vr),Ae(ln),Ae(an)}function _f(r){xi(an.current);var n=xi(vr.current),l=$l(n,r.type);n!==l&&(Me(ln,r),Me(vr,l))}function $a(r){ln.current===r&&(Ae(vr),Ae(ln))}var Ue=ei(0);function Mo(r){for(var n=r;n!==null;){if(n.tag===13){var l=n.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ka=[];function Va(){for(var r=0;r<Ka.length;r++)Ka[r]._workInProgressVersionPrimary=null;Ka.length=0}var Bo=W.ReactCurrentDispatcher,qa=W.ReactCurrentBatchConfig,Ei=0,je=null,it=null,ht=null,Oo=!1,hn=!1,un=0,uy=0;function bt(){throw Error(s(321))}function Xa(r,n){if(n===null)return!1;for(var l=0;l<n.length&&l<r.length;l++)if(!or(r[l],n[l]))return!1;return!0}function Ya(r,n,l,u,d,f){if(Ei=f,je=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Bo.current=r===null||r.memoizedState===null?_y:py,r=l(u,d),hn){f=0;do{if(hn=!1,un=0,25<=f)throw Error(s(301));f+=1,ht=it=null,n.updateQueue=null,Bo.current=gy,r=l(u,d)}while(hn)}if(Bo.current=Io,n=it!==null&&it.next!==null,Ei=0,ht=it=je=null,Oo=!1,n)throw Error(s(300));return r}function Ga(){var r=un!==0;return un=0,r}function yr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?je.memoizedState=ht=r:ht=ht.next=r,ht}function Zt(){if(it===null){var r=je.alternate;r=r!==null?r.memoizedState:null}else r=it.next;var n=ht===null?je.memoizedState:ht.next;if(n!==null)ht=n,it=r;else{if(r===null)throw Error(s(310));it=r,r={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},ht===null?je.memoizedState=ht=r:ht=ht.next=r}return ht}function cn(r,n){return typeof n=="function"?n(r):n}function Qa(r){var n=Zt(),l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var u=it,d=u.baseQueue,f=l.pending;if(f!==null){if(d!==null){var m=d.next;d.next=f.next,f.next=m}u.baseQueue=d=f,l.pending=null}if(d!==null){f=d.next,u=u.baseState;var S=m=null,b=null,O=f;do{var V=O.lane;if((Ei&V)===V)b!==null&&(b=b.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),u=O.hasEagerState?O.eagerState:r(u,O.action);else{var Y={lane:V,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};b===null?(S=b=Y,m=u):b=b.next=Y,je.lanes|=V,Pi|=V}O=O.next}while(O!==null&&O!==f);b===null?m=u:b.next=S,or(u,n.memoizedState)||(Nt=!0),n.memoizedState=u,n.baseState=m,n.baseQueue=b,l.lastRenderedState=u}if(r=l.interleaved,r!==null){d=r;do f=d.lane,je.lanes|=f,Pi|=f,d=d.next;while(d!==r)}else d===null&&(l.lanes=0);return[n.memoizedState,l.dispatch]}function Za(r){var n=Zt(),l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var u=l.dispatch,d=l.pending,f=n.memoizedState;if(d!==null){l.pending=null;var m=d=d.next;do f=r(f,m.action),m=m.next;while(m!==d);or(f,n.memoizedState)||(Nt=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),l.lastRenderedState=f}return[f,u]}function pf(){}function gf(r,n){var l=je,u=Zt(),d=n(),f=!or(u.memoizedState,d);if(f&&(u.memoizedState=d,Nt=!0),u=u.queue,Ja(yf.bind(null,l,u,r),[r]),u.getSnapshot!==n||f||ht!==null&&ht.memoizedState.tag&1){if(l.flags|=2048,dn(9,vf.bind(null,l,u,d,n),void 0,null),ut===null)throw Error(s(349));Ei&30||mf(l,n,d)}return d}function mf(r,n,l){r.flags|=16384,r={getSnapshot:n,value:l},n=je.updateQueue,n===null?(n={lastEffect:null,stores:null},je.updateQueue=n,n.stores=[r]):(l=n.stores,l===null?n.stores=[r]:l.push(r))}function vf(r,n,l,u){n.value=l,n.getSnapshot=u,Sf(n)&&wf(r)}function yf(r,n,l){return l(function(){Sf(n)&&wf(r)})}function Sf(r){var n=r.getSnapshot;r=r.value;try{var l=n();return!or(r,l)}catch{return!0}}function wf(r){var n=zr(r,1);n!==null&&cr(n,r,1,-1)}function Cf(r){var n=yr();return typeof r=="function"&&(r=r()),n.memoizedState=n.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:r},n.queue=r,r=r.dispatch=fy.bind(null,je,r),[n.memoizedState,r]}function dn(r,n,l,u){return r={tag:r,create:n,destroy:l,deps:u,next:null},n=je.updateQueue,n===null?(n={lastEffect:null,stores:null},je.updateQueue=n,n.lastEffect=r.next=r):(l=n.lastEffect,l===null?n.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,n.lastEffect=r)),r}function bf(){return Zt().memoizedState}function Ao(r,n,l,u){var d=yr();je.flags|=r,d.memoizedState=dn(1|n,l,void 0,u===void 0?null:u)}function No(r,n,l,u){var d=Zt();u=u===void 0?null:u;var f=void 0;if(it!==null){var m=it.memoizedState;if(f=m.destroy,u!==null&&Xa(u,m.deps)){d.memoizedState=dn(n,l,f,u);return}}je.flags|=r,d.memoizedState=dn(1|n,l,f,u)}function kf(r,n){return Ao(8390656,8,r,n)}function Ja(r,n){return No(2048,8,r,n)}function xf(r,n){return No(4,2,r,n)}function Ef(r,n){return No(4,4,r,n)}function Pf(r,n){if(typeof n=="function")return r=r(),n(r),function(){n(null)};if(n!=null)return r=r(),n.current=r,function(){n.current=null}}function Lf(r,n,l){return l=l!=null?l.concat([r]):null,No(4,4,Pf.bind(null,n,r),l)}function eh(){}function Rf(r,n){var l=Zt();n=n===void 0?null:n;var u=l.memoizedState;return u!==null&&n!==null&&Xa(n,u[1])?u[0]:(l.memoizedState=[r,n],r)}function Df(r,n){var l=Zt();n=n===void 0?null:n;var u=l.memoizedState;return u!==null&&n!==null&&Xa(n,u[1])?u[0]:(r=r(),l.memoizedState=[r,n],r)}function Tf(r,n,l){return Ei&21?(or(l,n)||(l=od(),je.lanes|=l,Pi|=l,r.baseState=!0),n):(r.baseState&&(r.baseState=!1,Nt=!0),r.memoizedState=l)}function cy(r,n){var l=Re;Re=l!==0&&4>l?l:4,r(!0);var u=qa.transition;qa.transition={};try{r(!1),n()}finally{Re=l,qa.transition=u}}function Mf(){return Zt().memoizedState}function dy(r,n,l){var u=ai(r);if(l={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null},Bf(r))Of(n,l);else if(l=uf(r,n,l,u),l!==null){var d=Dt();cr(l,r,u,d),Af(l,n,u)}}function fy(r,n,l){var u=ai(r),d={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null};if(Bf(r))Of(n,d);else{var f=r.alternate;if(r.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var m=n.lastRenderedState,S=f(m,l);if(d.hasEagerState=!0,d.eagerState=S,or(S,m)){var b=n.interleaved;b===null?(d.next=d,Ha(n)):(d.next=b.next,b.next=d),n.interleaved=d;return}}catch{}finally{}l=uf(r,n,d,u),l!==null&&(d=Dt(),cr(l,r,u,d),Af(l,n,u))}}function Bf(r){var n=r.alternate;return r===je||n!==null&&n===je}function Of(r,n){hn=Oo=!0;var l=r.pending;l===null?n.next=n:(n.next=l.next,l.next=n),r.pending=n}function Af(r,n,l){if(l&4194240){var u=n.lanes;u&=r.pendingLanes,l|=u,n.lanes=l,ra(r,l)}}var Io={readContext:Qt,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},_y={readContext:Qt,useCallback:function(r,n){return yr().memoizedState=[r,n===void 0?null:n],r},useContext:Qt,useEffect:kf,useImperativeHandle:function(r,n,l){return l=l!=null?l.concat([r]):null,Ao(4194308,4,Pf.bind(null,n,r),l)},useLayoutEffect:function(r,n){return Ao(4194308,4,r,n)},useInsertionEffect:function(r,n){return Ao(4,2,r,n)},useMemo:function(r,n){var l=yr();return n=n===void 0?null:n,r=r(),l.memoizedState=[r,n],r},useReducer:function(r,n,l){var u=yr();return n=l!==void 0?l(n):n,u.memoizedState=u.baseState=n,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:n},u.queue=r,r=r.dispatch=dy.bind(null,je,r),[u.memoizedState,r]},useRef:function(r){var n=yr();return r={current:r},n.memoizedState=r},useState:Cf,useDebugValue:eh,useDeferredValue:function(r){return yr().memoizedState=r},useTransition:function(){var r=Cf(!1),n=r[0];return r=cy.bind(null,r[1]),yr().memoizedState=r,[n,r]},useMutableSource:function(){},useSyncExternalStore:function(r,n,l){var u=je,d=yr();if(Ne){if(l===void 0)throw Error(s(407));l=l()}else{if(l=n(),ut===null)throw Error(s(349));Ei&30||mf(u,n,l)}d.memoizedState=l;var f={value:l,getSnapshot:n};return d.queue=f,kf(yf.bind(null,u,f,r),[r]),u.flags|=2048,dn(9,vf.bind(null,u,f,l,n),void 0,null),l},useId:function(){var r=yr(),n=ut.identifierPrefix;if(Ne){var l=Ir,u=Nr;l=(u&~(1<<32-nr(u)-1)).toString(32)+l,n=":"+n+"R"+l,l=un++,0<l&&(n+="H"+l.toString(32)),n+=":"}else l=uy++,n=":"+n+"r"+l.toString(32)+":";return r.memoizedState=n},unstable_isNewReconciler:!1},py={readContext:Qt,useCallback:Rf,useContext:Qt,useEffect:Ja,useImperativeHandle:Lf,useInsertionEffect:xf,useLayoutEffect:Ef,useMemo:Df,useReducer:Qa,useRef:bf,useState:function(){return Qa(cn)},useDebugValue:eh,useDeferredValue:function(r){var n=Zt();return Tf(n,it.memoizedState,r)},useTransition:function(){var r=Qa(cn)[0],n=Zt().memoizedState;return[r,n]},useMutableSource:pf,useSyncExternalStore:gf,useId:Mf,unstable_isNewReconciler:!1},gy={readContext:Qt,useCallback:Rf,useContext:Qt,useEffect:Ja,useImperativeHandle:Lf,useInsertionEffect:xf,useLayoutEffect:Ef,useMemo:Df,useReducer:Za,useRef:bf,useState:function(){return Za(cn)},useDebugValue:eh,useDeferredValue:function(r){var n=Zt();return it===null?n.memoizedState=r:Tf(n,it.memoizedState,r)},useTransition:function(){var r=Za(cn)[0],n=Zt().memoizedState;return[r,n]},useMutableSource:pf,useSyncExternalStore:gf,useId:Mf,unstable_isNewReconciler:!1};function ar(r,n){if(r&&r.defaultProps){n=$({},n),r=r.defaultProps;for(var l in r)n[l]===void 0&&(n[l]=r[l]);return n}return n}function th(r,n,l,u){n=r.memoizedState,l=l(u,n),l=l==null?n:$({},n,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var zo={isMounted:function(r){return(r=r._reactInternals)?yi(r)===r:!1},enqueueSetState:function(r,n,l){r=r._reactInternals;var u=Dt(),d=ai(r),f=Wr(u,d);f.payload=n,l!=null&&(f.callback=l),n=si(r,f,d),n!==null&&(cr(n,r,d,u),Do(n,r,d))},enqueueReplaceState:function(r,n,l){r=r._reactInternals;var u=Dt(),d=ai(r),f=Wr(u,d);f.tag=1,f.payload=n,l!=null&&(f.callback=l),n=si(r,f,d),n!==null&&(cr(n,r,d,u),Do(n,r,d))},enqueueForceUpdate:function(r,n){r=r._reactInternals;var l=Dt(),u=ai(r),d=Wr(l,u);d.tag=2,n!=null&&(d.callback=n),n=si(r,d,u),n!==null&&(cr(n,r,u,l),Do(n,r,u))}};function Nf(r,n,l,u,d,f,m){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,f,m):n.prototype&&n.prototype.isPureReactComponent?!Qs(l,u)||!Qs(d,f):!0}function If(r,n,l){var u=!1,d=ti,f=n.contextType;return typeof f=="object"&&f!==null?f=Qt(f):(d=At(n)?wi:Ct.current,u=n.contextTypes,f=(u=u!=null)?es(r,d):ti),n=new n(l,f),r.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=zo,r.stateNode=n,n._reactInternals=r,u&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=f),n}function zf(r,n,l,u){r=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(l,u),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(l,u),n.state!==r&&zo.enqueueReplaceState(n,n.state,null)}function rh(r,n,l,u){var d=r.stateNode;d.props=l,d.state=r.memoizedState,d.refs={},Ua(r);var f=n.contextType;typeof f=="object"&&f!==null?d.context=Qt(f):(f=At(n)?wi:Ct.current,d.context=es(r,f)),d.state=r.memoizedState,f=n.getDerivedStateFromProps,typeof f=="function"&&(th(r,n,f,l),d.state=r.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(n=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),n!==d.state&&zo.enqueueReplaceState(d,d.state,null),To(r,l,d,u),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function as(r,n){try{var l="",u=n;do l+=Q(u),u=u.return;while(u);var d=l}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:r,source:n,stack:d,digest:null}}function ih(r,n,l){return{value:r,source:null,stack:l??null,digest:n??null}}function sh(r,n){try{console.error(n.value)}catch(l){setTimeout(function(){throw l})}}var my=typeof WeakMap=="function"?WeakMap:Map;function Wf(r,n,l){l=Wr(-1,l),l.tag=3,l.payload={element:null};var u=n.value;return l.callback=function(){Ko||(Ko=!0,yh=u),sh(r,n)},l}function Ff(r,n,l){l=Wr(-1,l),l.tag=3;var u=r.type.getDerivedStateFromError;if(typeof u=="function"){var d=n.value;l.payload=function(){return u(d)},l.callback=function(){sh(r,n)}}var f=r.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(l.callback=function(){sh(r,n),typeof u!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var m=n.stack;this.componentDidCatch(n.value,{componentStack:m!==null?m:""})}),l}function Hf(r,n,l){var u=r.pingCache;if(u===null){u=r.pingCache=new my;var d=new Set;u.set(n,d)}else d=u.get(n),d===void 0&&(d=new Set,u.set(n,d));d.has(l)||(d.add(l),r=Ty.bind(null,r,n,l),n.then(r,r))}function Uf(r){do{var n;if((n=r.tag===13)&&(n=r.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return r;r=r.return}while(r!==null);return null}function jf(r,n,l,u,d){return r.mode&1?(r.flags|=65536,r.lanes=d,r):(r===n?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(n=Wr(-1,1),n.tag=2,si(l,n,1))),l.lanes|=1),r)}var vy=W.ReactCurrentOwner,Nt=!1;function Rt(r,n,l,u){n.child=r===null?hf(n,null,l,u):ss(n,r.child,l,u)}function $f(r,n,l,u,d){l=l.render;var f=n.ref;return os(n,d),u=Ya(r,n,l,u,f,d),l=Ga(),r!==null&&!Nt?(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~d,Fr(r,n,d)):(Ne&&l&&Ma(n),n.flags|=1,Rt(r,n,u,d),n.child)}function Kf(r,n,l,u,d){if(r===null){var f=l.type;return typeof f=="function"&&!Eh(f)&&f.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(n.tag=15,n.type=f,Vf(r,n,f,u,d)):(r=Qo(l.type,null,u,n,n.mode,d),r.ref=n.ref,r.return=n,n.child=r)}if(f=r.child,!(r.lanes&d)){var m=f.memoizedProps;if(l=l.compare,l=l!==null?l:Qs,l(m,u)&&r.ref===n.ref)return Fr(r,n,d)}return n.flags|=1,r=ui(f,u),r.ref=n.ref,r.return=n,n.child=r}function Vf(r,n,l,u,d){if(r!==null){var f=r.memoizedProps;if(Qs(f,u)&&r.ref===n.ref)if(Nt=!1,n.pendingProps=u=f,(r.lanes&d)!==0)r.flags&131072&&(Nt=!0);else return n.lanes=r.lanes,Fr(r,n,d)}return nh(r,n,l,u,d)}function qf(r,n,l){var u=n.pendingProps,d=u.children,f=r!==null?r.memoizedState:null;if(u.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(us,Vt),Vt|=l;else{if(!(l&1073741824))return r=f!==null?f.baseLanes|l:l,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:r,cachePool:null,transitions:null},n.updateQueue=null,Me(us,Vt),Vt|=r,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=f!==null?f.baseLanes:l,Me(us,Vt),Vt|=u}else f!==null?(u=f.baseLanes|l,n.memoizedState=null):u=l,Me(us,Vt),Vt|=u;return Rt(r,n,d,l),n.child}function Xf(r,n){var l=n.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(n.flags|=512,n.flags|=2097152)}function nh(r,n,l,u,d){var f=At(l)?wi:Ct.current;return f=es(n,f),os(n,d),l=Ya(r,n,l,u,f,d),u=Ga(),r!==null&&!Nt?(n.updateQueue=r.updateQueue,n.flags&=-2053,r.lanes&=~d,Fr(r,n,d)):(Ne&&u&&Ma(n),n.flags|=1,Rt(r,n,l,d),n.child)}function Yf(r,n,l,u,d){if(At(l)){var f=!0;Co(n)}else f=!1;if(os(n,d),n.stateNode===null)Fo(r,n),If(n,l,u),rh(n,l,u,d),u=!0;else if(r===null){var m=n.stateNode,S=n.memoizedProps;m.props=S;var b=m.context,O=l.contextType;typeof O=="object"&&O!==null?O=Qt(O):(O=At(l)?wi:Ct.current,O=es(n,O));var V=l.getDerivedStateFromProps,Y=typeof V=="function"||typeof m.getSnapshotBeforeUpdate=="function";Y||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S!==u||b!==O)&&zf(n,m,u,O),ii=!1;var K=n.memoizedState;m.state=K,To(n,u,m,d),b=n.memoizedState,S!==u||K!==b||Ot.current||ii?(typeof V=="function"&&(th(n,l,V,u),b=n.memoizedState),(S=ii||Nf(n,l,S,u,K,b,O))?(Y||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=u,n.memoizedState=b),m.props=u,m.state=b,m.context=O,u=S):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),u=!1)}else{m=n.stateNode,cf(r,n),S=n.memoizedProps,O=n.type===n.elementType?S:ar(n.type,S),m.props=O,Y=n.pendingProps,K=m.context,b=l.contextType,typeof b=="object"&&b!==null?b=Qt(b):(b=At(l)?wi:Ct.current,b=es(n,b));var ne=l.getDerivedStateFromProps;(V=typeof ne=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S!==Y||K!==b)&&zf(n,m,u,b),ii=!1,K=n.memoizedState,m.state=K,To(n,u,m,d);var ce=n.memoizedState;S!==Y||K!==ce||Ot.current||ii?(typeof ne=="function"&&(th(n,l,ne,u),ce=n.memoizedState),(O=ii||Nf(n,l,O,u,K,ce,b)||!1)?(V||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,ce,b),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,ce,b)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||S===r.memoizedProps&&K===r.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&K===r.memoizedState||(n.flags|=1024),n.memoizedProps=u,n.memoizedState=ce),m.props=u,m.state=ce,m.context=b,u=O):(typeof m.componentDidUpdate!="function"||S===r.memoizedProps&&K===r.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&K===r.memoizedState||(n.flags|=1024),u=!1)}return oh(r,n,l,u,f,d)}function oh(r,n,l,u,d,f){Xf(r,n);var m=(n.flags&128)!==0;if(!u&&!m)return d&&Jd(n,l,!1),Fr(r,n,f);u=n.stateNode,vy.current=n;var S=m&&typeof l.getDerivedStateFromError!="function"?null:u.render();return n.flags|=1,r!==null&&m?(n.child=ss(n,r.child,null,f),n.child=ss(n,null,S,f)):Rt(r,n,S,f),n.memoizedState=u.state,d&&Jd(n,l,!0),n.child}function Gf(r){var n=r.stateNode;n.pendingContext?Qd(r,n.pendingContext,n.pendingContext!==n.context):n.context&&Qd(r,n.context,!1),ja(r,n.containerInfo)}function Qf(r,n,l,u,d){return is(),Na(d),n.flags|=256,Rt(r,n,l,u),n.child}var lh={dehydrated:null,treeContext:null,retryLane:0};function ah(r){return{baseLanes:r,cachePool:null,transitions:null}}function Zf(r,n,l){var u=n.pendingProps,d=Ue.current,f=!1,m=(n.flags&128)!==0,S;if((S=m)||(S=r!==null&&r.memoizedState===null?!1:(d&2)!==0),S?(f=!0,n.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),Me(Ue,d&1),r===null)return Aa(n),r=n.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(n.mode&1?r.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(m=u.children,r=u.fallback,f?(u=n.mode,f=n.child,m={mode:"hidden",children:m},!(u&1)&&f!==null?(f.childLanes=0,f.pendingProps=m):f=Zo(m,u,0,null),r=Ti(r,u,l,null),f.return=n,r.return=n,f.sibling=r,n.child=f,n.child.memoizedState=ah(l),n.memoizedState=lh,r):hh(n,m));if(d=r.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return yy(r,n,m,u,S,d,l);if(f){f=u.fallback,m=n.mode,d=r.child,S=d.sibling;var b={mode:"hidden",children:u.children};return!(m&1)&&n.child!==d?(u=n.child,u.childLanes=0,u.pendingProps=b,n.deletions=null):(u=ui(d,b),u.subtreeFlags=d.subtreeFlags&14680064),S!==null?f=ui(S,f):(f=Ti(f,m,l,null),f.flags|=2),f.return=n,u.return=n,u.sibling=f,n.child=u,u=f,f=n.child,m=r.child.memoizedState,m=m===null?ah(l):{baseLanes:m.baseLanes|l,cachePool:null,transitions:m.transitions},f.memoizedState=m,f.childLanes=r.childLanes&~l,n.memoizedState=lh,u}return f=r.child,r=f.sibling,u=ui(f,{mode:"visible",children:u.children}),!(n.mode&1)&&(u.lanes=l),u.return=n,u.sibling=null,r!==null&&(l=n.deletions,l===null?(n.deletions=[r],n.flags|=16):l.push(r)),n.child=u,n.memoizedState=null,u}function hh(r,n){return n=Zo({mode:"visible",children:n},r.mode,0,null),n.return=r,r.child=n}function Wo(r,n,l,u){return u!==null&&Na(u),ss(n,r.child,null,l),r=hh(n,n.pendingProps.children),r.flags|=2,n.memoizedState=null,r}function yy(r,n,l,u,d,f,m){if(l)return n.flags&256?(n.flags&=-257,u=ih(Error(s(422))),Wo(r,n,m,u)):n.memoizedState!==null?(n.child=r.child,n.flags|=128,null):(f=u.fallback,d=n.mode,u=Zo({mode:"visible",children:u.children},d,0,null),f=Ti(f,d,m,null),f.flags|=2,u.return=n,f.return=n,u.sibling=f,n.child=u,n.mode&1&&ss(n,r.child,null,m),n.child.memoizedState=ah(m),n.memoizedState=lh,f);if(!(n.mode&1))return Wo(r,n,m,null);if(d.data==="$!"){if(u=d.nextSibling&&d.nextSibling.dataset,u)var S=u.dgst;return u=S,f=Error(s(419)),u=ih(f,u,void 0),Wo(r,n,m,u)}if(S=(m&r.childLanes)!==0,Nt||S){if(u=ut,u!==null){switch(m&-m){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(u.suspendedLanes|m)?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,zr(r,d),cr(u,r,d,-1))}return xh(),u=ih(Error(s(421))),Wo(r,n,m,u)}return d.data==="$?"?(n.flags|=128,n.child=r.child,n=My.bind(null,r),d._reactRetry=n,null):(r=f.treeContext,Kt=Jr(d.nextSibling),$t=n,Ne=!0,lr=null,r!==null&&(Yt[Gt++]=Nr,Yt[Gt++]=Ir,Yt[Gt++]=Ci,Nr=r.id,Ir=r.overflow,Ci=n),n=hh(n,u.children),n.flags|=4096,n)}function Jf(r,n,l){r.lanes|=n;var u=r.alternate;u!==null&&(u.lanes|=n),Fa(r.return,n,l)}function uh(r,n,l,u,d){var f=r.memoizedState;f===null?r.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:d}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=u,f.tail=l,f.tailMode=d)}function e_(r,n,l){var u=n.pendingProps,d=u.revealOrder,f=u.tail;if(Rt(r,n,u.children,l),u=Ue.current,u&2)u=u&1|2,n.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=n.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Jf(r,l,n);else if(r.tag===19)Jf(r,l,n);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}if(Me(Ue,u),!(n.mode&1))n.memoizedState=null;else switch(d){case"forwards":for(l=n.child,d=null;l!==null;)r=l.alternate,r!==null&&Mo(r)===null&&(d=l),l=l.sibling;l=d,l===null?(d=n.child,n.child=null):(d=l.sibling,l.sibling=null),uh(n,!1,d,l,f);break;case"backwards":for(l=null,d=n.child,n.child=null;d!==null;){if(r=d.alternate,r!==null&&Mo(r)===null){n.child=d;break}r=d.sibling,d.sibling=l,l=d,d=r}uh(n,!0,l,null,f);break;case"together":uh(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Fo(r,n){!(n.mode&1)&&r!==null&&(r.alternate=null,n.alternate=null,n.flags|=2)}function Fr(r,n,l){if(r!==null&&(n.dependencies=r.dependencies),Pi|=n.lanes,!(l&n.childLanes))return null;if(r!==null&&n.child!==r.child)throw Error(s(153));if(n.child!==null){for(r=n.child,l=ui(r,r.pendingProps),n.child=l,l.return=n;r.sibling!==null;)r=r.sibling,l=l.sibling=ui(r,r.pendingProps),l.return=n;l.sibling=null}return n.child}function Sy(r,n,l){switch(n.tag){case 3:Gf(n),is();break;case 5:_f(n);break;case 1:At(n.type)&&Co(n);break;case 4:ja(n,n.stateNode.containerInfo);break;case 10:var u=n.type._context,d=n.memoizedProps.value;Me(Lo,u._currentValue),u._currentValue=d;break;case 13:if(u=n.memoizedState,u!==null)return u.dehydrated!==null?(Me(Ue,Ue.current&1),n.flags|=128,null):l&n.child.childLanes?Zf(r,n,l):(Me(Ue,Ue.current&1),r=Fr(r,n,l),r!==null?r.sibling:null);Me(Ue,Ue.current&1);break;case 19:if(u=(l&n.childLanes)!==0,r.flags&128){if(u)return e_(r,n,l);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Me(Ue,Ue.current),u)break;return null;case 22:case 23:return n.lanes=0,qf(r,n,l)}return Fr(r,n,l)}var t_,ch,r_,i_;t_=function(r,n){for(var l=n.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},ch=function(){},r_=function(r,n,l,u){var d=r.memoizedProps;if(d!==u){r=n.stateNode,xi(vr.current);var f=null;switch(l){case"input":d=Bt(r,d),u=Bt(r,u),f=[];break;case"select":d=$({},d,{value:void 0}),u=$({},u,{value:void 0}),f=[];break;case"textarea":d=jl(r,d),u=jl(r,u),f=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(r.onclick=yo)}Kl(l,u);var m;l=null;for(O in d)if(!u.hasOwnProperty(O)&&d.hasOwnProperty(O)&&d[O]!=null)if(O==="style"){var S=d[O];for(m in S)S.hasOwnProperty(m)&&(l||(l={}),l[m]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(a.hasOwnProperty(O)?f||(f=[]):(f=f||[]).push(O,null));for(O in u){var b=u[O];if(S=d!=null?d[O]:void 0,u.hasOwnProperty(O)&&b!==S&&(b!=null||S!=null))if(O==="style")if(S){for(m in S)!S.hasOwnProperty(m)||b&&b.hasOwnProperty(m)||(l||(l={}),l[m]="");for(m in b)b.hasOwnProperty(m)&&S[m]!==b[m]&&(l||(l={}),l[m]=b[m])}else l||(f||(f=[]),f.push(O,l)),l=b;else O==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,S=S?S.__html:void 0,b!=null&&S!==b&&(f=f||[]).push(O,b)):O==="children"?typeof b!="string"&&typeof b!="number"||(f=f||[]).push(O,""+b):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(a.hasOwnProperty(O)?(b!=null&&O==="onScroll"&&Oe("scroll",r),f||S===b||(f=[])):(f=f||[]).push(O,b))}l&&(f=f||[]).push("style",l);var O=f;(n.updateQueue=O)&&(n.flags|=4)}},i_=function(r,n,l,u){l!==u&&(n.flags|=4)};function fn(r,n){if(!Ne)switch(r.tailMode){case"hidden":n=r.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?n||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function kt(r){var n=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(n)for(var d=r.child;d!==null;)l|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)l|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=u,r.childLanes=l,n}function wy(r,n,l){var u=n.pendingProps;switch(Ba(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(n),null;case 1:return At(n.type)&&wo(),kt(n),null;case 3:return u=n.stateNode,ls(),Ae(Ot),Ae(Ct),Va(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Eo(n)?n.flags|=4:r===null||r.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,lr!==null&&(Ch(lr),lr=null))),ch(r,n),kt(n),null;case 5:$a(n);var d=xi(an.current);if(l=n.type,r!==null&&n.stateNode!=null)r_(r,n,l,u,d),r.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!u){if(n.stateNode===null)throw Error(s(166));return kt(n),null}if(r=xi(vr.current),Eo(n)){u=n.stateNode,l=n.type;var f=n.memoizedProps;switch(u[mr]=n,u[rn]=f,r=(n.mode&1)!==0,l){case"dialog":Oe("cancel",u),Oe("close",u);break;case"iframe":case"object":case"embed":Oe("load",u);break;case"video":case"audio":for(d=0;d<Js.length;d++)Oe(Js[d],u);break;case"source":Oe("error",u);break;case"img":case"image":case"link":Oe("error",u),Oe("load",u);break;case"details":Oe("toggle",u);break;case"input":vt(u,f),Oe("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!f.multiple},Oe("invalid",u);break;case"textarea":Wc(u,f),Oe("invalid",u)}Kl(l,f),d=null;for(var m in f)if(f.hasOwnProperty(m)){var S=f[m];m==="children"?typeof S=="string"?u.textContent!==S&&(f.suppressHydrationWarning!==!0&&vo(u.textContent,S,r),d=["children",S]):typeof S=="number"&&u.textContent!==""+S&&(f.suppressHydrationWarning!==!0&&vo(u.textContent,S,r),d=["children",""+S]):a.hasOwnProperty(m)&&S!=null&&m==="onScroll"&&Oe("scroll",u)}switch(l){case"input":ae(u),Ms(u,f,!0);break;case"textarea":ae(u),Hc(u);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(u.onclick=yo)}u=d,n.updateQueue=u,u!==null&&(n.flags|=4)}else{m=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Uc(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=m.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof u.is=="string"?r=m.createElement(l,{is:u.is}):(r=m.createElement(l),l==="select"&&(m=r,u.multiple?m.multiple=!0:u.size&&(m.size=u.size))):r=m.createElementNS(r,l),r[mr]=n,r[rn]=u,t_(r,n,!1,!1),n.stateNode=r;e:{switch(m=Vl(l,u),l){case"dialog":Oe("cancel",r),Oe("close",r),d=u;break;case"iframe":case"object":case"embed":Oe("load",r),d=u;break;case"video":case"audio":for(d=0;d<Js.length;d++)Oe(Js[d],r);d=u;break;case"source":Oe("error",r),d=u;break;case"img":case"image":case"link":Oe("error",r),Oe("load",r),d=u;break;case"details":Oe("toggle",r),d=u;break;case"input":vt(r,u),d=Bt(r,u),Oe("invalid",r);break;case"option":d=u;break;case"select":r._wrapperState={wasMultiple:!!u.multiple},d=$({},u,{value:void 0}),Oe("invalid",r);break;case"textarea":Wc(r,u),d=jl(r,u),Oe("invalid",r);break;default:d=u}Kl(l,d),S=d;for(f in S)if(S.hasOwnProperty(f)){var b=S[f];f==="style"?Kc(r,b):f==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&jc(r,b)):f==="children"?typeof b=="string"?(l!=="textarea"||b!=="")&&Os(r,b):typeof b=="number"&&Os(r,""+b):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(a.hasOwnProperty(f)?b!=null&&f==="onScroll"&&Oe("scroll",r):b!=null&&se(r,f,b,m))}switch(l){case"input":ae(r),Ms(r,u,!1);break;case"textarea":ae(r),Hc(r);break;case"option":u.value!=null&&r.setAttribute("value",""+ue(u.value));break;case"select":r.multiple=!!u.multiple,f=u.value,f!=null?Ui(r,!!u.multiple,f,!1):u.defaultValue!=null&&Ui(r,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=yo)}switch(l){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return kt(n),null;case 6:if(r&&n.stateNode!=null)i_(r,n,r.memoizedProps,u);else{if(typeof u!="string"&&n.stateNode===null)throw Error(s(166));if(l=xi(an.current),xi(vr.current),Eo(n)){if(u=n.stateNode,l=n.memoizedProps,u[mr]=n,(f=u.nodeValue!==l)&&(r=$t,r!==null))switch(r.tag){case 3:vo(u.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&vo(u.nodeValue,l,(r.mode&1)!==0)}f&&(n.flags|=4)}else u=(l.nodeType===9?l:l.ownerDocument).createTextNode(u),u[mr]=n,n.stateNode=u}return kt(n),null;case 13:if(Ae(Ue),u=n.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ne&&Kt!==null&&n.mode&1&&!(n.flags&128))of(),is(),n.flags|=98560,f=!1;else if(f=Eo(n),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(s(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[mr]=n}else is(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;kt(n),f=!1}else lr!==null&&(Ch(lr),lr=null),f=!0;if(!f)return n.flags&65536?n:null}return n.flags&128?(n.lanes=l,n):(u=u!==null,u!==(r!==null&&r.memoizedState!==null)&&u&&(n.child.flags|=8192,n.mode&1&&(r===null||Ue.current&1?st===0&&(st=3):xh())),n.updateQueue!==null&&(n.flags|=4),kt(n),null);case 4:return ls(),ch(r,n),r===null&&en(n.stateNode.containerInfo),kt(n),null;case 10:return Wa(n.type._context),kt(n),null;case 17:return At(n.type)&&wo(),kt(n),null;case 19:if(Ae(Ue),f=n.memoizedState,f===null)return kt(n),null;if(u=(n.flags&128)!==0,m=f.rendering,m===null)if(u)fn(f,!1);else{if(st!==0||r!==null&&r.flags&128)for(r=n.child;r!==null;){if(m=Mo(r),m!==null){for(n.flags|=128,fn(f,!1),u=m.updateQueue,u!==null&&(n.updateQueue=u,n.flags|=4),n.subtreeFlags=0,u=l,l=n.child;l!==null;)f=l,r=u,f.flags&=14680066,m=f.alternate,m===null?(f.childLanes=0,f.lanes=r,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=m.childLanes,f.lanes=m.lanes,f.child=m.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=m.memoizedProps,f.memoizedState=m.memoizedState,f.updateQueue=m.updateQueue,f.type=m.type,r=m.dependencies,f.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Me(Ue,Ue.current&1|2),n.child}r=r.sibling}f.tail!==null&&Ze()>cs&&(n.flags|=128,u=!0,fn(f,!1),n.lanes=4194304)}else{if(!u)if(r=Mo(m),r!==null){if(n.flags|=128,u=!0,l=r.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),fn(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Ne)return kt(n),null}else 2*Ze()-f.renderingStartTime>cs&&l!==1073741824&&(n.flags|=128,u=!0,fn(f,!1),n.lanes=4194304);f.isBackwards?(m.sibling=n.child,n.child=m):(l=f.last,l!==null?l.sibling=m:n.child=m,f.last=m)}return f.tail!==null?(n=f.tail,f.rendering=n,f.tail=n.sibling,f.renderingStartTime=Ze(),n.sibling=null,l=Ue.current,Me(Ue,u?l&1|2:l&1),n):(kt(n),null);case 22:case 23:return kh(),u=n.memoizedState!==null,r!==null&&r.memoizedState!==null!==u&&(n.flags|=8192),u&&n.mode&1?Vt&1073741824&&(kt(n),n.subtreeFlags&6&&(n.flags|=8192)):kt(n),null;case 24:return null;case 25:return null}throw Error(s(156,n.tag))}function Cy(r,n){switch(Ba(n),n.tag){case 1:return At(n.type)&&wo(),r=n.flags,r&65536?(n.flags=r&-65537|128,n):null;case 3:return ls(),Ae(Ot),Ae(Ct),Va(),r=n.flags,r&65536&&!(r&128)?(n.flags=r&-65537|128,n):null;case 5:return $a(n),null;case 13:if(Ae(Ue),r=n.memoizedState,r!==null&&r.dehydrated!==null){if(n.alternate===null)throw Error(s(340));is()}return r=n.flags,r&65536?(n.flags=r&-65537|128,n):null;case 19:return Ae(Ue),null;case 4:return ls(),null;case 10:return Wa(n.type._context),null;case 22:case 23:return kh(),null;case 24:return null;default:return null}}var Ho=!1,xt=!1,by=typeof WeakSet=="function"?WeakSet:Set,he=null;function hs(r,n){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(u){Xe(r,n,u)}else l.current=null}function dh(r,n,l){try{l()}catch(u){Xe(r,n,u)}}var s_=!1;function ky(r,n){if(ka=oo,r=Ad(),ga(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var d=u.anchorOffset,f=u.focusNode;u=u.focusOffset;try{l.nodeType,f.nodeType}catch{l=null;break e}var m=0,S=-1,b=-1,O=0,V=0,Y=r,K=null;t:for(;;){for(var ne;Y!==l||d!==0&&Y.nodeType!==3||(S=m+d),Y!==f||u!==0&&Y.nodeType!==3||(b=m+u),Y.nodeType===3&&(m+=Y.nodeValue.length),(ne=Y.firstChild)!==null;)K=Y,Y=ne;for(;;){if(Y===r)break t;if(K===l&&++O===d&&(S=m),K===f&&++V===u&&(b=m),(ne=Y.nextSibling)!==null)break;Y=K,K=Y.parentNode}Y=ne}l=S===-1||b===-1?null:{start:S,end:b}}else l=null}l=l||{start:0,end:0}}else l=null;for(xa={focusedElem:r,selectionRange:l},oo=!1,he=n;he!==null;)if(n=he,r=n.child,(n.subtreeFlags&1028)!==0&&r!==null)r.return=n,he=r;else for(;he!==null;){n=he;try{var ce=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var de=ce.memoizedProps,Je=ce.memoizedState,L=n.stateNode,x=L.getSnapshotBeforeUpdate(n.elementType===n.type?de:ar(n.type,de),Je);L.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var R=n.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Z){Xe(n,n.return,Z)}if(r=n.sibling,r!==null){r.return=n.return,he=r;break}he=n.return}return ce=s_,s_=!1,ce}function _n(r,n,l){var u=n.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&r)===r){var f=d.destroy;d.destroy=void 0,f!==void 0&&dh(n,l,f)}d=d.next}while(d!==u)}}function Uo(r,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var l=n=n.next;do{if((l.tag&r)===r){var u=l.create;l.destroy=u()}l=l.next}while(l!==n)}}function fh(r){var n=r.ref;if(n!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof n=="function"?n(r):n.current=r}}function n_(r){var n=r.alternate;n!==null&&(r.alternate=null,n_(n)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(n=r.stateNode,n!==null&&(delete n[mr],delete n[rn],delete n[Ra],delete n[oy],delete n[ly])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function o_(r){return r.tag===5||r.tag===3||r.tag===4}function l_(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||o_(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function _h(r,n,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,n?l.nodeType===8?l.parentNode.insertBefore(r,n):l.insertBefore(r,n):(l.nodeType===8?(n=l.parentNode,n.insertBefore(r,l)):(n=l,n.appendChild(r)),l=l._reactRootContainer,l!=null||n.onclick!==null||(n.onclick=yo));else if(u!==4&&(r=r.child,r!==null))for(_h(r,n,l),r=r.sibling;r!==null;)_h(r,n,l),r=r.sibling}function ph(r,n,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,n?l.insertBefore(r,n):l.appendChild(r);else if(u!==4&&(r=r.child,r!==null))for(ph(r,n,l),r=r.sibling;r!==null;)ph(r,n,l),r=r.sibling}var yt=null,hr=!1;function ni(r,n,l){for(l=l.child;l!==null;)a_(r,n,l),l=l.sibling}function a_(r,n,l){if(gr&&typeof gr.onCommitFiberUnmount=="function")try{gr.onCommitFiberUnmount(eo,l)}catch{}switch(l.tag){case 5:xt||hs(l,n);case 6:var u=yt,d=hr;yt=null,ni(r,n,l),yt=u,hr=d,yt!==null&&(hr?(r=yt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):yt.removeChild(l.stateNode));break;case 18:yt!==null&&(hr?(r=yt,l=l.stateNode,r.nodeType===8?La(r.parentNode,l):r.nodeType===1&&La(r,l),Ks(r)):La(yt,l.stateNode));break;case 4:u=yt,d=hr,yt=l.stateNode.containerInfo,hr=!0,ni(r,n,l),yt=u,hr=d;break;case 0:case 11:case 14:case 15:if(!xt&&(u=l.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var f=d,m=f.destroy;f=f.tag,m!==void 0&&(f&2||f&4)&&dh(l,n,m),d=d.next}while(d!==u)}ni(r,n,l);break;case 1:if(!xt&&(hs(l,n),u=l.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=l.memoizedProps,u.state=l.memoizedState,u.componentWillUnmount()}catch(S){Xe(l,n,S)}ni(r,n,l);break;case 21:ni(r,n,l);break;case 22:l.mode&1?(xt=(u=xt)||l.memoizedState!==null,ni(r,n,l),xt=u):ni(r,n,l);break;default:ni(r,n,l)}}function h_(r){var n=r.updateQueue;if(n!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new by),n.forEach(function(u){var d=By.bind(null,r,u);l.has(u)||(l.add(u),u.then(d,d))})}}function ur(r,n){var l=n.deletions;if(l!==null)for(var u=0;u<l.length;u++){var d=l[u];try{var f=r,m=n,S=m;e:for(;S!==null;){switch(S.tag){case 5:yt=S.stateNode,hr=!1;break e;case 3:yt=S.stateNode.containerInfo,hr=!0;break e;case 4:yt=S.stateNode.containerInfo,hr=!0;break e}S=S.return}if(yt===null)throw Error(s(160));a_(f,m,d),yt=null,hr=!1;var b=d.alternate;b!==null&&(b.return=null),d.return=null}catch(O){Xe(d,n,O)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)u_(n,r),n=n.sibling}function u_(r,n){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(ur(n,r),Sr(r),u&4){try{_n(3,r,r.return),Uo(3,r)}catch(de){Xe(r,r.return,de)}try{_n(5,r,r.return)}catch(de){Xe(r,r.return,de)}}break;case 1:ur(n,r),Sr(r),u&512&&l!==null&&hs(l,l.return);break;case 5:if(ur(n,r),Sr(r),u&512&&l!==null&&hs(l,l.return),r.flags&32){var d=r.stateNode;try{Os(d,"")}catch(de){Xe(r,r.return,de)}}if(u&4&&(d=r.stateNode,d!=null)){var f=r.memoizedProps,m=l!==null?l.memoizedProps:f,S=r.type,b=r.updateQueue;if(r.updateQueue=null,b!==null)try{S==="input"&&f.type==="radio"&&f.name!=null&&Vr(d,f),Vl(S,m);var O=Vl(S,f);for(m=0;m<b.length;m+=2){var V=b[m],Y=b[m+1];V==="style"?Kc(d,Y):V==="dangerouslySetInnerHTML"?jc(d,Y):V==="children"?Os(d,Y):se(d,V,Y,O)}switch(S){case"input":pr(d,f);break;case"textarea":Fc(d,f);break;case"select":var K=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var ne=f.value;ne!=null?Ui(d,!!f.multiple,ne,!1):K!==!!f.multiple&&(f.defaultValue!=null?Ui(d,!!f.multiple,f.defaultValue,!0):Ui(d,!!f.multiple,f.multiple?[]:"",!1))}d[rn]=f}catch(de){Xe(r,r.return,de)}}break;case 6:if(ur(n,r),Sr(r),u&4){if(r.stateNode===null)throw Error(s(162));d=r.stateNode,f=r.memoizedProps;try{d.nodeValue=f}catch(de){Xe(r,r.return,de)}}break;case 3:if(ur(n,r),Sr(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Ks(n.containerInfo)}catch(de){Xe(r,r.return,de)}break;case 4:ur(n,r),Sr(r);break;case 13:ur(n,r),Sr(r),d=r.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(vh=Ze())),u&4&&h_(r);break;case 22:if(V=l!==null&&l.memoizedState!==null,r.mode&1?(xt=(O=xt)||V,ur(n,r),xt=O):ur(n,r),Sr(r),u&8192){if(O=r.memoizedState!==null,(r.stateNode.isHidden=O)&&!V&&r.mode&1)for(he=r,V=r.child;V!==null;){for(Y=he=V;he!==null;){switch(K=he,ne=K.child,K.tag){case 0:case 11:case 14:case 15:_n(4,K,K.return);break;case 1:hs(K,K.return);var ce=K.stateNode;if(typeof ce.componentWillUnmount=="function"){u=K,l=K.return;try{n=u,ce.props=n.memoizedProps,ce.state=n.memoizedState,ce.componentWillUnmount()}catch(de){Xe(u,l,de)}}break;case 5:hs(K,K.return);break;case 22:if(K.memoizedState!==null){f_(Y);continue}}ne!==null?(ne.return=K,he=ne):f_(Y)}V=V.sibling}e:for(V=null,Y=r;;){if(Y.tag===5){if(V===null){V=Y;try{d=Y.stateNode,O?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(S=Y.stateNode,b=Y.memoizedProps.style,m=b!=null&&b.hasOwnProperty("display")?b.display:null,S.style.display=$c("display",m))}catch(de){Xe(r,r.return,de)}}}else if(Y.tag===6){if(V===null)try{Y.stateNode.nodeValue=O?"":Y.memoizedProps}catch(de){Xe(r,r.return,de)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===r)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===r)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===r)break e;V===Y&&(V=null),Y=Y.return}V===Y&&(V=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:ur(n,r),Sr(r),u&4&&h_(r);break;case 21:break;default:ur(n,r),Sr(r)}}function Sr(r){var n=r.flags;if(n&2){try{e:{for(var l=r.return;l!==null;){if(o_(l)){var u=l;break e}l=l.return}throw Error(s(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(Os(d,""),u.flags&=-33);var f=l_(r);ph(r,f,d);break;case 3:case 4:var m=u.stateNode.containerInfo,S=l_(r);_h(r,S,m);break;default:throw Error(s(161))}}catch(b){Xe(r,r.return,b)}r.flags&=-3}n&4096&&(r.flags&=-4097)}function xy(r,n,l){he=r,c_(r)}function c_(r,n,l){for(var u=(r.mode&1)!==0;he!==null;){var d=he,f=d.child;if(d.tag===22&&u){var m=d.memoizedState!==null||Ho;if(!m){var S=d.alternate,b=S!==null&&S.memoizedState!==null||xt;S=Ho;var O=xt;if(Ho=m,(xt=b)&&!O)for(he=d;he!==null;)m=he,b=m.child,m.tag===22&&m.memoizedState!==null?__(d):b!==null?(b.return=m,he=b):__(d);for(;f!==null;)he=f,c_(f),f=f.sibling;he=d,Ho=S,xt=O}d_(r)}else d.subtreeFlags&8772&&f!==null?(f.return=d,he=f):d_(r)}}function d_(r){for(;he!==null;){var n=he;if(n.flags&8772){var l=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:xt||Uo(5,n);break;case 1:var u=n.stateNode;if(n.flags&4&&!xt)if(l===null)u.componentDidMount();else{var d=n.elementType===n.type?l.memoizedProps:ar(n.type,l.memoizedProps);u.componentDidUpdate(d,l.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var f=n.updateQueue;f!==null&&ff(n,f,u);break;case 3:var m=n.updateQueue;if(m!==null){if(l=null,n.child!==null)switch(n.child.tag){case 5:l=n.child.stateNode;break;case 1:l=n.child.stateNode}ff(n,m,l)}break;case 5:var S=n.stateNode;if(l===null&&n.flags&4){l=S;var b=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&l.focus();break;case"img":b.src&&(l.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var O=n.alternate;if(O!==null){var V=O.memoizedState;if(V!==null){var Y=V.dehydrated;Y!==null&&Ks(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}xt||n.flags&512&&fh(n)}catch(K){Xe(n,n.return,K)}}if(n===r){he=null;break}if(l=n.sibling,l!==null){l.return=n.return,he=l;break}he=n.return}}function f_(r){for(;he!==null;){var n=he;if(n===r){he=null;break}var l=n.sibling;if(l!==null){l.return=n.return,he=l;break}he=n.return}}function __(r){for(;he!==null;){var n=he;try{switch(n.tag){case 0:case 11:case 15:var l=n.return;try{Uo(4,n)}catch(b){Xe(n,l,b)}break;case 1:var u=n.stateNode;if(typeof u.componentDidMount=="function"){var d=n.return;try{u.componentDidMount()}catch(b){Xe(n,d,b)}}var f=n.return;try{fh(n)}catch(b){Xe(n,f,b)}break;case 5:var m=n.return;try{fh(n)}catch(b){Xe(n,m,b)}}}catch(b){Xe(n,n.return,b)}if(n===r){he=null;break}var S=n.sibling;if(S!==null){S.return=n.return,he=S;break}he=n.return}}var Ey=Math.ceil,jo=W.ReactCurrentDispatcher,gh=W.ReactCurrentOwner,Jt=W.ReactCurrentBatchConfig,Ee=0,ut=null,rt=null,St=0,Vt=0,us=ei(0),st=0,pn=null,Pi=0,$o=0,mh=0,gn=null,It=null,vh=0,cs=1/0,Hr=null,Ko=!1,yh=null,oi=null,Vo=!1,li=null,qo=0,mn=0,Sh=null,Xo=-1,Yo=0;function Dt(){return Ee&6?Ze():Xo!==-1?Xo:Xo=Ze()}function ai(r){return r.mode&1?Ee&2&&St!==0?St&-St:hy.transition!==null?(Yo===0&&(Yo=od()),Yo):(r=Re,r!==0||(r=window.event,r=r===void 0?16:pd(r.type)),r):1}function cr(r,n,l,u){if(50<mn)throw mn=0,Sh=null,Error(s(185));Fs(r,l,u),(!(Ee&2)||r!==ut)&&(r===ut&&(!(Ee&2)&&($o|=l),st===4&&hi(r,St)),zt(r,u),l===1&&Ee===0&&!(n.mode&1)&&(cs=Ze()+500,bo&&ri()))}function zt(r,n){var l=r.callbackNode;hv(r,n);var u=io(r,r===ut?St:0);if(u===0)l!==null&&id(l),r.callbackNode=null,r.callbackPriority=0;else if(n=u&-u,r.callbackPriority!==n){if(l!=null&&id(l),n===1)r.tag===0?ay(g_.bind(null,r)):ef(g_.bind(null,r)),sy(function(){!(Ee&6)&&ri()}),l=null;else{switch(ld(u)){case 1:l=Jl;break;case 4:l=sd;break;case 16:l=Jn;break;case 536870912:l=nd;break;default:l=Jn}l=k_(l,p_.bind(null,r))}r.callbackPriority=n,r.callbackNode=l}}function p_(r,n){if(Xo=-1,Yo=0,Ee&6)throw Error(s(327));var l=r.callbackNode;if(ds()&&r.callbackNode!==l)return null;var u=io(r,r===ut?St:0);if(u===0)return null;if(u&30||u&r.expiredLanes||n)n=Go(r,u);else{n=u;var d=Ee;Ee|=2;var f=v_();(ut!==r||St!==n)&&(Hr=null,cs=Ze()+500,Ri(r,n));do try{Ry();break}catch(S){m_(r,S)}while(!0);za(),jo.current=f,Ee=d,rt!==null?n=0:(ut=null,St=0,n=st)}if(n!==0){if(n===2&&(d=ea(r),d!==0&&(u=d,n=wh(r,d))),n===1)throw l=pn,Ri(r,0),hi(r,u),zt(r,Ze()),l;if(n===6)hi(r,u);else{if(d=r.current.alternate,!(u&30)&&!Py(d)&&(n=Go(r,u),n===2&&(f=ea(r),f!==0&&(u=f,n=wh(r,f))),n===1))throw l=pn,Ri(r,0),hi(r,u),zt(r,Ze()),l;switch(r.finishedWork=d,r.finishedLanes=u,n){case 0:case 1:throw Error(s(345));case 2:Di(r,It,Hr);break;case 3:if(hi(r,u),(u&130023424)===u&&(n=vh+500-Ze(),10<n)){if(io(r,0)!==0)break;if(d=r.suspendedLanes,(d&u)!==u){Dt(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=Pa(Di.bind(null,r,It,Hr),n);break}Di(r,It,Hr);break;case 4:if(hi(r,u),(u&4194240)===u)break;for(n=r.eventTimes,d=-1;0<u;){var m=31-nr(u);f=1<<m,m=n[m],m>d&&(d=m),u&=~f}if(u=d,u=Ze()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Ey(u/1960))-u,10<u){r.timeoutHandle=Pa(Di.bind(null,r,It,Hr),u);break}Di(r,It,Hr);break;case 5:Di(r,It,Hr);break;default:throw Error(s(329))}}}return zt(r,Ze()),r.callbackNode===l?p_.bind(null,r):null}function wh(r,n){var l=gn;return r.current.memoizedState.isDehydrated&&(Ri(r,n).flags|=256),r=Go(r,n),r!==2&&(n=It,It=l,n!==null&&Ch(n)),r}function Ch(r){It===null?It=r:It.push.apply(It,r)}function Py(r){for(var n=r;;){if(n.flags&16384){var l=n.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var u=0;u<l.length;u++){var d=l[u],f=d.getSnapshot;d=d.value;try{if(!or(f(),d))return!1}catch{return!1}}}if(l=n.child,n.subtreeFlags&16384&&l!==null)l.return=n,n=l;else{if(n===r)break;for(;n.sibling===null;){if(n.return===null||n.return===r)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function hi(r,n){for(n&=~mh,n&=~$o,r.suspendedLanes|=n,r.pingedLanes&=~n,r=r.expirationTimes;0<n;){var l=31-nr(n),u=1<<l;r[l]=-1,n&=~u}}function g_(r){if(Ee&6)throw Error(s(327));ds();var n=io(r,0);if(!(n&1))return zt(r,Ze()),null;var l=Go(r,n);if(r.tag!==0&&l===2){var u=ea(r);u!==0&&(n=u,l=wh(r,u))}if(l===1)throw l=pn,Ri(r,0),hi(r,n),zt(r,Ze()),l;if(l===6)throw Error(s(345));return r.finishedWork=r.current.alternate,r.finishedLanes=n,Di(r,It,Hr),zt(r,Ze()),null}function bh(r,n){var l=Ee;Ee|=1;try{return r(n)}finally{Ee=l,Ee===0&&(cs=Ze()+500,bo&&ri())}}function Li(r){li!==null&&li.tag===0&&!(Ee&6)&&ds();var n=Ee;Ee|=1;var l=Jt.transition,u=Re;try{if(Jt.transition=null,Re=1,r)return r()}finally{Re=u,Jt.transition=l,Ee=n,!(Ee&6)&&ri()}}function kh(){Vt=us.current,Ae(us)}function Ri(r,n){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,iy(l)),rt!==null)for(l=rt.return;l!==null;){var u=l;switch(Ba(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&wo();break;case 3:ls(),Ae(Ot),Ae(Ct),Va();break;case 5:$a(u);break;case 4:ls();break;case 13:Ae(Ue);break;case 19:Ae(Ue);break;case 10:Wa(u.type._context);break;case 22:case 23:kh()}l=l.return}if(ut=r,rt=r=ui(r.current,null),St=Vt=n,st=0,pn=null,mh=$o=Pi=0,It=gn=null,ki!==null){for(n=0;n<ki.length;n++)if(l=ki[n],u=l.interleaved,u!==null){l.interleaved=null;var d=u.next,f=l.pending;if(f!==null){var m=f.next;f.next=d,u.next=m}l.pending=u}ki=null}return r}function m_(r,n){do{var l=rt;try{if(za(),Bo.current=Io,Oo){for(var u=je.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}Oo=!1}if(Ei=0,ht=it=je=null,hn=!1,un=0,gh.current=null,l===null||l.return===null){st=1,pn=n,rt=null;break}e:{var f=r,m=l.return,S=l,b=n;if(n=St,S.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var O=b,V=S,Y=V.tag;if(!(V.mode&1)&&(Y===0||Y===11||Y===15)){var K=V.alternate;K?(V.updateQueue=K.updateQueue,V.memoizedState=K.memoizedState,V.lanes=K.lanes):(V.updateQueue=null,V.memoizedState=null)}var ne=Uf(m);if(ne!==null){ne.flags&=-257,jf(ne,m,S,f,n),ne.mode&1&&Hf(f,O,n),n=ne,b=O;var ce=n.updateQueue;if(ce===null){var de=new Set;de.add(b),n.updateQueue=de}else ce.add(b);break e}else{if(!(n&1)){Hf(f,O,n),xh();break e}b=Error(s(426))}}else if(Ne&&S.mode&1){var Je=Uf(m);if(Je!==null){!(Je.flags&65536)&&(Je.flags|=256),jf(Je,m,S,f,n),Na(as(b,S));break e}}f=b=as(b,S),st!==4&&(st=2),gn===null?gn=[f]:gn.push(f),f=m;do{switch(f.tag){case 3:f.flags|=65536,n&=-n,f.lanes|=n;var L=Wf(f,b,n);df(f,L);break e;case 1:S=b;var x=f.type,R=f.stateNode;if(!(f.flags&128)&&(typeof x.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(oi===null||!oi.has(R)))){f.flags|=65536,n&=-n,f.lanes|=n;var Z=Ff(f,S,n);df(f,Z);break e}}f=f.return}while(f!==null)}S_(l)}catch(_e){n=_e,rt===l&&l!==null&&(rt=l=l.return);continue}break}while(!0)}function v_(){var r=jo.current;return jo.current=Io,r===null?Io:r}function xh(){(st===0||st===3||st===2)&&(st=4),ut===null||!(Pi&268435455)&&!($o&268435455)||hi(ut,St)}function Go(r,n){var l=Ee;Ee|=2;var u=v_();(ut!==r||St!==n)&&(Hr=null,Ri(r,n));do try{Ly();break}catch(d){m_(r,d)}while(!0);if(za(),Ee=l,jo.current=u,rt!==null)throw Error(s(261));return ut=null,St=0,st}function Ly(){for(;rt!==null;)y_(rt)}function Ry(){for(;rt!==null&&!ev();)y_(rt)}function y_(r){var n=b_(r.alternate,r,Vt);r.memoizedProps=r.pendingProps,n===null?S_(r):rt=n,gh.current=null}function S_(r){var n=r;do{var l=n.alternate;if(r=n.return,n.flags&32768){if(l=Cy(l,n),l!==null){l.flags&=32767,rt=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{st=6,rt=null;return}}else if(l=wy(l,n,Vt),l!==null){rt=l;return}if(n=n.sibling,n!==null){rt=n;return}rt=n=r}while(n!==null);st===0&&(st=5)}function Di(r,n,l){var u=Re,d=Jt.transition;try{Jt.transition=null,Re=1,Dy(r,n,l,u)}finally{Jt.transition=d,Re=u}return null}function Dy(r,n,l,u){do ds();while(li!==null);if(Ee&6)throw Error(s(327));l=r.finishedWork;var d=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(s(177));r.callbackNode=null,r.callbackPriority=0;var f=l.lanes|l.childLanes;if(uv(r,f),r===ut&&(rt=ut=null,St=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Vo||(Vo=!0,k_(Jn,function(){return ds(),null})),f=(l.flags&15990)!==0,l.subtreeFlags&15990||f){f=Jt.transition,Jt.transition=null;var m=Re;Re=1;var S=Ee;Ee|=4,gh.current=null,ky(r,l),u_(l,r),Gv(xa),oo=!!ka,xa=ka=null,r.current=l,xy(l),tv(),Ee=S,Re=m,Jt.transition=f}else r.current=l;if(Vo&&(Vo=!1,li=r,qo=d),f=r.pendingLanes,f===0&&(oi=null),sv(l.stateNode),zt(r,Ze()),n!==null)for(u=r.onRecoverableError,l=0;l<n.length;l++)d=n[l],u(d.value,{componentStack:d.stack,digest:d.digest});if(Ko)throw Ko=!1,r=yh,yh=null,r;return qo&1&&r.tag!==0&&ds(),f=r.pendingLanes,f&1?r===Sh?mn++:(mn=0,Sh=r):mn=0,ri(),null}function ds(){if(li!==null){var r=ld(qo),n=Jt.transition,l=Re;try{if(Jt.transition=null,Re=16>r?16:r,li===null)var u=!1;else{if(r=li,li=null,qo=0,Ee&6)throw Error(s(331));var d=Ee;for(Ee|=4,he=r.current;he!==null;){var f=he,m=f.child;if(he.flags&16){var S=f.deletions;if(S!==null){for(var b=0;b<S.length;b++){var O=S[b];for(he=O;he!==null;){var V=he;switch(V.tag){case 0:case 11:case 15:_n(8,V,f)}var Y=V.child;if(Y!==null)Y.return=V,he=Y;else for(;he!==null;){V=he;var K=V.sibling,ne=V.return;if(n_(V),V===O){he=null;break}if(K!==null){K.return=ne,he=K;break}he=ne}}}var ce=f.alternate;if(ce!==null){var de=ce.child;if(de!==null){ce.child=null;do{var Je=de.sibling;de.sibling=null,de=Je}while(de!==null)}}he=f}}if(f.subtreeFlags&2064&&m!==null)m.return=f,he=m;else e:for(;he!==null;){if(f=he,f.flags&2048)switch(f.tag){case 0:case 11:case 15:_n(9,f,f.return)}var L=f.sibling;if(L!==null){L.return=f.return,he=L;break e}he=f.return}}var x=r.current;for(he=x;he!==null;){m=he;var R=m.child;if(m.subtreeFlags&2064&&R!==null)R.return=m,he=R;else e:for(m=x;he!==null;){if(S=he,S.flags&2048)try{switch(S.tag){case 0:case 11:case 15:Uo(9,S)}}catch(_e){Xe(S,S.return,_e)}if(S===m){he=null;break e}var Z=S.sibling;if(Z!==null){Z.return=S.return,he=Z;break e}he=S.return}}if(Ee=d,ri(),gr&&typeof gr.onPostCommitFiberRoot=="function")try{gr.onPostCommitFiberRoot(eo,r)}catch{}u=!0}return u}finally{Re=l,Jt.transition=n}}return!1}function w_(r,n,l){n=as(l,n),n=Wf(r,n,1),r=si(r,n,1),n=Dt(),r!==null&&(Fs(r,1,n),zt(r,n))}function Xe(r,n,l){if(r.tag===3)w_(r,r,l);else for(;n!==null;){if(n.tag===3){w_(n,r,l);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(oi===null||!oi.has(u))){r=as(l,r),r=Ff(n,r,1),n=si(n,r,1),r=Dt(),n!==null&&(Fs(n,1,r),zt(n,r));break}}n=n.return}}function Ty(r,n,l){var u=r.pingCache;u!==null&&u.delete(n),n=Dt(),r.pingedLanes|=r.suspendedLanes&l,ut===r&&(St&l)===l&&(st===4||st===3&&(St&130023424)===St&&500>Ze()-vh?Ri(r,0):mh|=l),zt(r,n)}function C_(r,n){n===0&&(r.mode&1?(n=ro,ro<<=1,!(ro&130023424)&&(ro=4194304)):n=1);var l=Dt();r=zr(r,n),r!==null&&(Fs(r,n,l),zt(r,l))}function My(r){var n=r.memoizedState,l=0;n!==null&&(l=n.retryLane),C_(r,l)}function By(r,n){var l=0;switch(r.tag){case 13:var u=r.stateNode,d=r.memoizedState;d!==null&&(l=d.retryLane);break;case 19:u=r.stateNode;break;default:throw Error(s(314))}u!==null&&u.delete(n),C_(r,l)}var b_;b_=function(r,n,l){if(r!==null)if(r.memoizedProps!==n.pendingProps||Ot.current)Nt=!0;else{if(!(r.lanes&l)&&!(n.flags&128))return Nt=!1,Sy(r,n,l);Nt=!!(r.flags&131072)}else Nt=!1,Ne&&n.flags&1048576&&tf(n,xo,n.index);switch(n.lanes=0,n.tag){case 2:var u=n.type;Fo(r,n),r=n.pendingProps;var d=es(n,Ct.current);os(n,l),d=Ya(null,n,u,r,d,l);var f=Ga();return n.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,At(u)?(f=!0,Co(n)):f=!1,n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Ua(n),d.updater=zo,n.stateNode=d,d._reactInternals=n,rh(n,u,r,l),n=oh(null,n,u,!0,f,l)):(n.tag=0,Ne&&f&&Ma(n),Rt(null,n,d,l),n=n.child),n;case 16:u=n.elementType;e:{switch(Fo(r,n),r=n.pendingProps,d=u._init,u=d(u._payload),n.type=u,d=n.tag=Ay(u),r=ar(u,r),d){case 0:n=nh(null,n,u,r,l);break e;case 1:n=Yf(null,n,u,r,l);break e;case 11:n=$f(null,n,u,r,l);break e;case 14:n=Kf(null,n,u,ar(u.type,r),l);break e}throw Error(s(306,u,""))}return n;case 0:return u=n.type,d=n.pendingProps,d=n.elementType===u?d:ar(u,d),nh(r,n,u,d,l);case 1:return u=n.type,d=n.pendingProps,d=n.elementType===u?d:ar(u,d),Yf(r,n,u,d,l);case 3:e:{if(Gf(n),r===null)throw Error(s(387));u=n.pendingProps,f=n.memoizedState,d=f.element,cf(r,n),To(n,u,null,l);var m=n.memoizedState;if(u=m.element,f.isDehydrated)if(f={element:u,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){d=as(Error(s(423)),n),n=Qf(r,n,u,l,d);break e}else if(u!==d){d=as(Error(s(424)),n),n=Qf(r,n,u,l,d);break e}else for(Kt=Jr(n.stateNode.containerInfo.firstChild),$t=n,Ne=!0,lr=null,l=hf(n,null,u,l),n.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(is(),u===d){n=Fr(r,n,l);break e}Rt(r,n,u,l)}n=n.child}return n;case 5:return _f(n),r===null&&Aa(n),u=n.type,d=n.pendingProps,f=r!==null?r.memoizedProps:null,m=d.children,Ea(u,d)?m=null:f!==null&&Ea(u,f)&&(n.flags|=32),Xf(r,n),Rt(r,n,m,l),n.child;case 6:return r===null&&Aa(n),null;case 13:return Zf(r,n,l);case 4:return ja(n,n.stateNode.containerInfo),u=n.pendingProps,r===null?n.child=ss(n,null,u,l):Rt(r,n,u,l),n.child;case 11:return u=n.type,d=n.pendingProps,d=n.elementType===u?d:ar(u,d),$f(r,n,u,d,l);case 7:return Rt(r,n,n.pendingProps,l),n.child;case 8:return Rt(r,n,n.pendingProps.children,l),n.child;case 12:return Rt(r,n,n.pendingProps.children,l),n.child;case 10:e:{if(u=n.type._context,d=n.pendingProps,f=n.memoizedProps,m=d.value,Me(Lo,u._currentValue),u._currentValue=m,f!==null)if(or(f.value,m)){if(f.children===d.children&&!Ot.current){n=Fr(r,n,l);break e}}else for(f=n.child,f!==null&&(f.return=n);f!==null;){var S=f.dependencies;if(S!==null){m=f.child;for(var b=S.firstContext;b!==null;){if(b.context===u){if(f.tag===1){b=Wr(-1,l&-l),b.tag=2;var O=f.updateQueue;if(O!==null){O=O.shared;var V=O.pending;V===null?b.next=b:(b.next=V.next,V.next=b),O.pending=b}}f.lanes|=l,b=f.alternate,b!==null&&(b.lanes|=l),Fa(f.return,l,n),S.lanes|=l;break}b=b.next}}else if(f.tag===10)m=f.type===n.type?null:f.child;else if(f.tag===18){if(m=f.return,m===null)throw Error(s(341));m.lanes|=l,S=m.alternate,S!==null&&(S.lanes|=l),Fa(m,l,n),m=f.sibling}else m=f.child;if(m!==null)m.return=f;else for(m=f;m!==null;){if(m===n){m=null;break}if(f=m.sibling,f!==null){f.return=m.return,m=f;break}m=m.return}f=m}Rt(r,n,d.children,l),n=n.child}return n;case 9:return d=n.type,u=n.pendingProps.children,os(n,l),d=Qt(d),u=u(d),n.flags|=1,Rt(r,n,u,l),n.child;case 14:return u=n.type,d=ar(u,n.pendingProps),d=ar(u.type,d),Kf(r,n,u,d,l);case 15:return Vf(r,n,n.type,n.pendingProps,l);case 17:return u=n.type,d=n.pendingProps,d=n.elementType===u?d:ar(u,d),Fo(r,n),n.tag=1,At(u)?(r=!0,Co(n)):r=!1,os(n,l),If(n,u,d),rh(n,u,d,l),oh(null,n,u,!0,r,l);case 19:return e_(r,n,l);case 22:return qf(r,n,l)}throw Error(s(156,n.tag))};function k_(r,n){return rd(r,n)}function Oy(r,n,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(r,n,l,u){return new Oy(r,n,l,u)}function Eh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ay(r){if(typeof r=="function")return Eh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===I)return 11;if(r===E)return 14}return 2}function ui(r,n){var l=r.alternate;return l===null?(l=er(r.tag,n,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=n,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,n=r.dependencies,l.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function Qo(r,n,l,u,d,f){var m=2;if(u=r,typeof r=="function")Eh(r)&&(m=1);else if(typeof r=="string")m=5;else e:switch(r){case fe:return Ti(l.children,d,f,n);case we:m=8,d|=8;break;case pe:return r=er(12,l,n,d|2),r.elementType=pe,r.lanes=f,r;case P:return r=er(13,l,n,d),r.elementType=P,r.lanes=f,r;case B:return r=er(19,l,n,d),r.elementType=B,r.lanes=f,r;case U:return Zo(l,d,f,n);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case xe:m=10;break e;case Le:m=9;break e;case I:m=11;break e;case E:m=14;break e;case z:m=16,u=null;break e}throw Error(s(130,r==null?r:typeof r,""))}return n=er(m,l,n,d),n.elementType=r,n.type=u,n.lanes=f,n}function Ti(r,n,l,u){return r=er(7,r,u,n),r.lanes=l,r}function Zo(r,n,l,u){return r=er(22,r,u,n),r.elementType=U,r.lanes=l,r.stateNode={isHidden:!1},r}function Ph(r,n,l){return r=er(6,r,null,n),r.lanes=l,r}function Lh(r,n,l){return n=er(4,r.children!==null?r.children:[],r.key,n),n.lanes=l,n.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},n}function Ny(r,n,l,u,d){this.tag=n,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ta(0),this.expirationTimes=ta(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ta(0),this.identifierPrefix=u,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Rh(r,n,l,u,d,f,m,S,b){return r=new Ny(r,n,l,S,b),n===1?(n=1,f===!0&&(n|=8)):n=0,f=er(3,null,null,n),r.current=f,f.stateNode=r,f.memoizedState={element:u,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ua(f),r}function Iy(r,n,l){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ee,key:u==null?null:""+u,children:r,containerInfo:n,implementation:l}}function x_(r){if(!r)return ti;r=r._reactInternals;e:{if(yi(r)!==r||r.tag!==1)throw Error(s(170));var n=r;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(At(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(s(171))}if(r.tag===1){var l=r.type;if(At(l))return Zd(r,l,n)}return n}function E_(r,n,l,u,d,f,m,S,b){return r=Rh(l,u,!0,r,d,f,m,S,b),r.context=x_(null),l=r.current,u=Dt(),d=ai(l),f=Wr(u,d),f.callback=n??null,si(l,f,d),r.current.lanes=d,Fs(r,d,u),zt(r,u),r}function Jo(r,n,l,u){var d=n.current,f=Dt(),m=ai(d);return l=x_(l),n.context===null?n.context=l:n.pendingContext=l,n=Wr(f,m),n.payload={element:r},u=u===void 0?null:u,u!==null&&(n.callback=u),r=si(d,n,m),r!==null&&(cr(r,d,m,f),Do(r,d,m)),m}function el(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function P_(r,n){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<n?l:n}}function Dh(r,n){P_(r,n),(r=r.alternate)&&P_(r,n)}function zy(){return null}var L_=typeof reportError=="function"?reportError:function(r){console.error(r)};function Th(r){this._internalRoot=r}tl.prototype.render=Th.prototype.render=function(r){var n=this._internalRoot;if(n===null)throw Error(s(409));Jo(r,n,null,null)},tl.prototype.unmount=Th.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var n=r.containerInfo;Li(function(){Jo(null,r,null,null)}),n[Or]=null}};function tl(r){this._internalRoot=r}tl.prototype.unstable_scheduleHydration=function(r){if(r){var n=ud();r={blockedOn:null,target:r,priority:n};for(var l=0;l<Gr.length&&n!==0&&n<Gr[l].priority;l++);Gr.splice(l,0,r),l===0&&fd(r)}};function Mh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function rl(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function R_(){}function Wy(r,n,l,u,d){if(d){if(typeof u=="function"){var f=u;u=function(){var O=el(m);f.call(O)}}var m=E_(n,u,r,0,null,!1,!1,"",R_);return r._reactRootContainer=m,r[Or]=m.current,en(r.nodeType===8?r.parentNode:r),Li(),m}for(;d=r.lastChild;)r.removeChild(d);if(typeof u=="function"){var S=u;u=function(){var O=el(b);S.call(O)}}var b=Rh(r,0,!1,null,null,!1,!1,"",R_);return r._reactRootContainer=b,r[Or]=b.current,en(r.nodeType===8?r.parentNode:r),Li(function(){Jo(n,b,l,u)}),b}function il(r,n,l,u,d){var f=l._reactRootContainer;if(f){var m=f;if(typeof d=="function"){var S=d;d=function(){var b=el(m);S.call(b)}}Jo(n,m,r,d)}else m=Wy(l,n,r,d,u);return el(m)}ad=function(r){switch(r.tag){case 3:var n=r.stateNode;if(n.current.memoizedState.isDehydrated){var l=Ws(n.pendingLanes);l!==0&&(ra(n,l|1),zt(n,Ze()),!(Ee&6)&&(cs=Ze()+500,ri()))}break;case 13:Li(function(){var u=zr(r,1);if(u!==null){var d=Dt();cr(u,r,1,d)}}),Dh(r,1)}},ia=function(r){if(r.tag===13){var n=zr(r,134217728);if(n!==null){var l=Dt();cr(n,r,134217728,l)}Dh(r,134217728)}},hd=function(r){if(r.tag===13){var n=ai(r),l=zr(r,n);if(l!==null){var u=Dt();cr(l,r,n,u)}Dh(r,n)}},ud=function(){return Re},cd=function(r,n){var l=Re;try{return Re=r,n()}finally{Re=l}},Yl=function(r,n,l){switch(n){case"input":if(pr(r,l),n=l.name,l.type==="radio"&&n!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<l.length;n++){var u=l[n];if(u!==r&&u.form===r.form){var d=So(u);if(!d)throw Error(s(90));Qe(u),pr(u,d)}}}break;case"textarea":Fc(r,l);break;case"select":n=l.value,n!=null&&Ui(r,!!l.multiple,n,!1)}},Yc=bh,Gc=Li;var Fy={usingClientEntryPoint:!1,Events:[sn,Zi,So,qc,Xc,bh]},vn={findFiberByHostInstance:Si,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hy={bundleType:vn.bundleType,version:vn.version,rendererPackageName:vn.rendererPackageName,rendererConfig:vn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=ed(r),r===null?null:r.stateNode},findFiberByHostInstance:vn.findFiberByHostInstance||zy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{eo=sl.inject(Hy),gr=sl}catch{}}return Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fy,Wt.createPortal=function(r,n){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mh(n))throw Error(s(200));return Iy(r,n,null,l)},Wt.createRoot=function(r,n){if(!Mh(r))throw Error(s(299));var l=!1,u="",d=L_;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),n=Rh(r,1,!1,null,null,l,!1,u,d),r[Or]=n.current,en(r.nodeType===8?r.parentNode:r),new Th(n)},Wt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var n=r._reactInternals;if(n===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=ed(n),r=r===null?null:r.stateNode,r},Wt.flushSync=function(r){return Li(r)},Wt.hydrate=function(r,n,l){if(!rl(n))throw Error(s(200));return il(null,r,n,!0,l)},Wt.hydrateRoot=function(r,n,l){if(!Mh(r))throw Error(s(405));var u=l!=null&&l.hydratedSources||null,d=!1,f="",m=L_;if(l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onRecoverableError!==void 0&&(m=l.onRecoverableError)),n=E_(n,null,r,1,l??null,d,!1,f,m),r[Or]=n.current,en(r),u)for(r=0;r<u.length;r++)l=u[r],d=l._getVersion,d=d(l._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[l,d]:n.mutableSourceEagerHydrationData.push(l,d);return new tl(n)},Wt.render=function(r,n,l){if(!rl(n))throw Error(s(200));return il(null,r,n,!1,l)},Wt.unmountComponentAtNode=function(r){if(!rl(r))throw Error(s(40));return r._reactRootContainer?(Li(function(){il(null,null,r,!1,function(){r._reactRootContainer=null,r[Or]=null})}),!0):!1},Wt.unstable_batchedUpdates=bh,Wt.unstable_renderSubtreeIntoContainer=function(r,n,l,u){if(!rl(l))throw Error(s(200));if(r==null||r._reactInternals===void 0)throw Error(s(38));return il(r,n,l,!1,u)},Wt.version="18.3.1-next-f1338f8080-20240426",Wt}var I_;function Jy(){if(I_)return Ah.exports;I_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ah.exports=Zy(),Ah.exports}var z_;function e0(){if(z_)return nl;z_=1;var e=Jy();return nl.createRoot=e.createRoot,nl.hydrateRoot=e.hydrateRoot,nl}var t0=e0();const r0="modulepreload",i0=function(e,t){return new URL(e,t).href},W_={},vs=function(t,s,o){let a=Promise.resolve();if(s&&s.length>0){const c=document.getElementsByTagName("link"),_=document.querySelector("meta[property=csp-nonce]"),g=(_==null?void 0:_.nonce)||(_==null?void 0:_.getAttribute("nonce"));a=Promise.allSettled(s.map(p=>{if(p=i0(p,o),p in W_)return;W_[p]=!0;const y=p.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(!!o)for(let A=c.length-1;A>=0;A--){const T=c[A];if(T.href===p&&(!y||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${v}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":r0,y||(w.as="script"),w.crossOrigin="",w.href=p,g&&w.setAttribute("nonce",g),document.head.appendChild(w),y)return new Promise((A,T)=>{w.addEventListener("load",A),w.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${p}`)))})}))}function h(c){const _=new Event("vite:preloadError",{cancelable:!0});if(_.payload=c,window.dispatchEvent(_),!_.defaultPrevented)throw c}return a.then(c=>{for(const _ of c||[])_.status==="rejected"&&h(_.reason);return t().catch(h)})},s0="https://stackblitz.com",n0=new Error;n0.stack="";const F_={};let ol=null;const o0={get editorOrigin(){return ol==null&&(ol=new URL(globalThis.WEBCONTAINER_API_IFRAME_URL??s0).origin),ol},set editorOrigin(e){ol=new URL(e).origin},get url(){const e=new URL(this.editorOrigin);e.pathname="/headless";for(const t in F_)e.searchParams.set(t,F_[t]);return e.searchParams.set("version","1.5.1"),e}};function l0(){let e,t;function s(){t=new Promise(o=>e=o)}return s(),{get promise(){return t},resolve(o){return e(o)},reset:s}}l0();var Bn;(function(e){e.UncaughtException="PREVIEW_UNCAUGHT_EXCEPTION",e.UnhandledRejection="PREVIEW_UNHANDLED_REJECTION",e.ConsoleError="PREVIEW_CONSOLE_ERROR"})(Bn||(Bn={}));var a0=Object.defineProperty,h0=(e,t)=>{for(var s in t)a0(e,s,{get:t[s],enumerable:!0})},Tr={};h0(Tr,{createEndpoint:()=>xg,expose:()=>Sc,proxy:()=>Mg,proxyMarker:()=>vc,releaseProxy:()=>Eg,transfer:()=>Tg,transferHandlers:()=>yc,windowEndpoint:()=>_0,wrap:()=>Rg});var vc=Symbol("Comlink.proxy"),xg=Symbol("Comlink.endpoint"),Eg=Symbol("Comlink.releaseProxy"),_u=Symbol("Comlink.thrown"),Pg=e=>typeof e=="object"&&e!==null||typeof e=="function",u0={canHandle:e=>Pg(e)&&e[vc],serialize(e){const{port1:t,port2:s}=new MessageChannel;return Sc(e,t),[s,[s]]},deserialize(e){return e.start(),Rg(e)}},c0={canHandle:e=>Pg(e)&&_u in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},yc=new Map([["proxy",u0],["throw",c0]]);function Sc(e,t=self){t.addEventListener("message",function s(o){if(!o||!o.data)return;const{id:a,type:h,path:c}=Object.assign({path:[]},o.data),_=(o.data.argumentList||[]).map(Ai);let g;try{const p=c.slice(0,-1).reduce((v,C)=>v[C],e),y=c.reduce((v,C)=>v[C],e);switch(h){case 0:g=y;break;case 1:p[c.slice(-1)[0]]=Ai(o.data.value),g=!0;break;case 2:g=y.apply(p,_);break;case 3:{const v=new y(..._);g=Mg(v)}break;case 4:{const{port1:v,port2:C}=new MessageChannel;Sc(e,C),g=Tg(v,[v])}break;case 5:g=void 0;break}}catch(p){g={value:p,[_u]:0}}Promise.resolve(g).catch(p=>({value:p,[_u]:0})).then(p=>{const[y,v]=wc(p);t.postMessage(Object.assign(Object.assign({},y),{id:a}),v),h===5&&(t.removeEventListener("message",s),Lg(t))})}),t.start&&t.start()}function d0(e){return e.constructor.name==="MessagePort"}function Lg(e){d0(e)&&e.close()}function Rg(e,t){return pu(e,[],t)}function ll(e){if(e)throw new Error("Proxy has been released and is not useable")}function pu(e,t=[],s=function(){}){let o=!1;const a=new Proxy(s,{get(h,c){if(ll(o),c===Eg)return()=>fs(e,{type:5,path:t.map(_=>_.toString())}).then(()=>{Lg(e),o=!0});if(c==="then"){if(t.length===0)return{then:()=>a};const _=fs(e,{type:0,path:t.map(g=>g.toString())}).then(Ai);return _.then.bind(_)}return pu(e,[...t,c])},set(h,c,_){ll(o);const[g,p]=wc(_);return fs(e,{type:1,path:[...t,c].map(y=>y.toString()),value:g},p).then(Ai)},apply(h,c,_){ll(o);const g=t[t.length-1];if(g===xg)return fs(e,{type:4}).then(Ai);if(g==="bind")return pu(e,t.slice(0,-1));const[p,y]=H_(_);return fs(e,{type:2,path:t.map(v=>v.toString()),argumentList:p},y).then(Ai)},construct(h,c){ll(o);const[_,g]=H_(c);return fs(e,{type:3,path:t.map(p=>p.toString()),argumentList:_},g).then(Ai)}});return a}function f0(e){return Array.prototype.concat.apply([],e)}function H_(e){const t=e.map(wc);return[t.map(s=>s[0]),f0(t.map(s=>s[1]))]}var Dg=new WeakMap;function Tg(e,t){return Dg.set(e,t),e}function Mg(e){return Object.assign(e,{[vc]:!0})}function _0(e,t=self,s="*"){return{postMessage:(o,a)=>e.postMessage(o,s,a),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function wc(e){for(const[t,s]of yc)if(s.canHandle(e)){const[o,a]=s.serialize(e);return[{type:3,name:t,value:o},a]}return[{type:0,value:e},Dg.get(e)||[]]}function Ai(e){switch(e.type){case 3:return yc.get(e.name).deserialize(e.value);case 0:return e.value}}function fs(e,t,s){return new Promise(o=>{const a=p0();e.addEventListener("message",function h(c){!c.data||!c.data.id||c.data.id!==a||(e.removeEventListener("message",h),o(c.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),s)})}function p0(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const g0=[Bn.ConsoleError,Bn.UncaughtException,Bn.UnhandledRejection];function m0(e){return!(e==null||typeof e!="object"||!("type"in e)||!g0.includes(e.type))}function _s(e){const t=Object.create(null);return e?Object.assign(t,e):t}function Bg(e){const t={d:{}};for(const s of Object.keys(e)){const o=e[s];if("file"in o){if("symlink"in o.file){t.d[s]={f:{l:o.file.symlink}};continue}const h=o.file.contents,c=typeof h=="string"?h:v0(h),_=typeof h=="string"?{}:{b:!0};t.d[s]={f:{c,..._}};continue}const a=Bg(o.directory);t.d[s]=a}return t}function Og(e){const t=_s();if("f"in e)throw new Error("It is not possible to export a single file in the JSON format.");if("d"in e)for(const s of Object.keys(e.d)){const o=e.d[s];"d"in o?t[s]=_s({directory:Og(o)}):"f"in o&&("c"in o.f?t[s]=_s({file:_s({contents:o.f.c})}):"l"in o.f&&(t[s]=_s({file:_s({symlink:o.f.l})})))}return t}function v0(e){let t="";for(const s of e)t+=String.fromCharCode(s);return t}let al=null,hl=null,zh={};const Ag=new TextDecoder,y0=new TextEncoder,Ni=class Ni{constructor(t,s,o){Ie(this,"_instance");Ie(this,"_runtimeInfo");Ie(this,"fs");Ie(this,"_tornDown",!1);Ie(this,"_unsubscribeFromTokenChangedListener",()=>{});this._instance=t,this._runtimeInfo=o,this.fs=new x0(s)}async spawn(t,s,o){let a=[];Array.isArray(s)?a=s:o=s;let h,c=new ReadableStream;if((o==null?void 0:o.output)!==!1){const T=D0();h=T.push,c=T.stream}let _,g,p,y;const v=yl(Wh(h)),C=yl(Wh(_)),w=yl(Wh(p)),A=await this._instance.run({command:t,args:a,cwd:o==null?void 0:o.cwd,env:o==null?void 0:o.env,terminal:o==null?void 0:o.terminal},C,w,v);return new k0(A,c,g,y)}async export(t,s){const o={format:(s==null?void 0:s.format)??"json",includes:s==null?void 0:s.includes,excludes:s==null?void 0:s.excludes,external:!0},a=await this._instance.serialize(t,o);if(o.format==="json"){const h=JSON.parse(Ag.decode(a));return Og(h)}return a}on(t,s){if(t==="preview-message"){const h=s;s=c=>{m0(c)&&h(c)}}const{listener:o,subscribe:a}=T0(s);return a(this._instance.on(t,Tr.proxy(o)))}mount(t,s){const o=t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):y0.encode(JSON.stringify(Bg(t)));return this._instance.loadFiles(Tr.transfer(o,[o.buffer]),{mountPoints:s==null?void 0:s.mountPoint})}setPreviewScript(t,s){return this._instance.setPreviewScript(t,s)}get path(){return this._runtimeInfo.path}get workdir(){return this._runtimeInfo.cwd}teardown(){if(this._tornDown)throw new Error("WebContainer already torn down");this._tornDown=!0,this._unsubscribeFromTokenChangedListener(),this.fs._teardown(),this._instance.teardown(),this._instance[Tr.releaseProxy](),Ni._instance===this&&(Ni._instance=null)}static async boot(t={}){const{workdirName:s}=t;if(window.crossOriginIsolated&&t.coep==="none"&&console.warn(`A Cross-Origin-Embedder-Policy header is required in cross origin isolated environments.
Set the 'coep' option to 'require-corp'.`),s!=null&&s.includes("/")||s===".."||s===".")throw new Error("workdirName should be a valid folder name");for(;al;)await al;if(Ni._instance)throw new Error("Only a single WebContainer instance can be booted");const o=E0(t);al=o.catch(()=>{});try{const a=await o;return Ni._instance=a,a}finally{al=null}}};Ie(Ni,"_instance",null);let Pl=Ni;const S0=1,w0=2;class C0{constructor(t,s){Ie(this,"name");Ie(this,"_type");this.name=t,this._type=s}isFile(){return this._type===S0}isDirectory(){return this._type===w0}}class b0{constructor(t,s,o,a){Ie(this,"_apiClient");Ie(this,"_path");Ie(this,"_options");Ie(this,"_listener");Ie(this,"_wrappedListener");Ie(this,"_watcher");Ie(this,"_closed",!1);this._apiClient=t,this._path=s,this._options=o,this._listener=a,this._apiClient._watchers.add(this),this._wrappedListener=(h,c)=>{this._listener&&!this._closed&&this._listener(h,c)},this._apiClient._fs.watch(this._path,this._options,yl(this._wrappedListener)).then(h=>{this._watcher=h,this._closed&&this._teardown()}).catch(console.error)}close(){this._closed||(this._closed=!0,this._apiClient._watchers.delete(this),this._teardown())}_teardown(){var t;(t=this._watcher)==null||t.close().finally(()=>{var s;(s=this._watcher)==null||s[Tr.releaseProxy]()})}}class k0{constructor(t,s,o,a){Ie(this,"output");Ie(this,"input");Ie(this,"exit");Ie(this,"_process");Ie(this,"stdout");Ie(this,"stderr");this.output=s,this._process=t,this.input=new WritableStream({write:h=>{var c;(c=this._getProcess())==null||c.write(h).catch(()=>{})}}),this.exit=this._onExit(),this.stdout=o,this.stderr=a}kill(){var t;(t=this._getProcess())==null||t.kill()}resize(t){var s;(s=this._getProcess())==null||s.resize(t)}async _onExit(){var t;try{return await this._process.onExit}finally{(t=this._process)==null||t[Tr.releaseProxy](),this._process=null}}_getProcess(){return this._process==null&&console.warn("This process already exited"),this._process}}class x0{constructor(t){Ie(this,"_fs");Ie(this,"_watchers",new Set([]));this._fs=t}rm(...t){return this._fs.rm(...t)}async readFile(t,s){return await this._fs.readFile(t,s)}async rename(t,s){return await this._fs.rename(t,s)}async writeFile(t,s,o){if(s instanceof Uint8Array){const a=s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength);s=Tr.transfer(new Uint8Array(a),[a])}await this._fs.writeFile(t,s,o)}async readdir(t,s){const o=await this._fs.readdir(t,s);return L0(o)||R0(o)?o:o.map(h=>new C0(h.name,h["Symbol(type)"]))}async mkdir(t,s){return await this._fs.mkdir(t,s)}watch(t,s,o){return typeof s=="function"&&(o=s,s=null),new b0(this,t,s,o)}_teardown(){this._fs[Tr.releaseProxy]();for(const t of this._watchers)t.close()}}async function E0(e){const{serverPromise:t}=P0(e),o=await(await t).build({host:window.location.host,version:"1.5.1",workdirName:e.workdirName,forwardPreviewErrors:e.forwardPreviewErrors}),a=await o.fs(),h=await o.runtimeInfo();return new Pl(o,a,h)}function Wh(e){if(e!=null)return t=>{t instanceof Uint8Array?e(Ag.decode(t)):t==null&&e(null)}}function yl(e){if(e!=null)return Tr.proxy(e)}function P0(e){if(hl!=null)return e.coep!==zh.coep&&(console.warn(`Attempting to boot WebContainer with 'coep: ${e.coep}'`),console.warn(`First boot had 'coep: ${zh.coep}', new settings will not take effect!`)),{serverPromise:hl};const t=document.createElement("iframe");t.style.display="none",t.setAttribute("allow","cross-origin-isolated");const s=o0.url;e.coep&&s.searchParams.set("coep",e.coep),t.src=s.toString();const{origin:o}=s;return zh={...e},hl=new Promise(a=>{const h=c=>{if(c.origin!==o)return;const{data:_}=c;if(_.type==="init"){a(Tr.wrap(c.ports[0]));return}if(_.type==="warning"){console[_.level].call(console,_.message);return}};window.addEventListener("message",h)}),document.body.insertBefore(t,null),{serverPromise:hl}}function L0(e){return typeof e[0]=="string"}function R0(e){return e[0]instanceof Uint8Array}function D0(){let e=null;return{stream:new ReadableStream({start(o){e=o}}),push:o=>{o!=null?e==null||e.enqueue(o):(e==null||e.close(),e=null)}}}function T0(e){let t=!1,s=()=>{};return{subscribe(a){return a.then(h=>{s=h,t&&s()}),()=>{t=!0,s()}},listener:(...a)=>{t||e(...a)}}}function M0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ng={exports:{}},Sn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function B0(){if(U_)return Sn;U_=1;var e=Yy,t=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function c(_,g,p){var y,v={},C=null,w=null;p!==void 0&&(C=""+p),g.key!==void 0&&(C=""+g.key),g.ref!==void 0&&(w=g.ref);for(y in g)o.call(g,y)&&!h.hasOwnProperty(y)&&(v[y]=g[y]);if(_&&_.defaultProps)for(y in g=_.defaultProps,g)v[y]===void 0&&(v[y]=g[y]);return{$$typeof:t,type:_,key:C,ref:w,props:v,_owner:a.current}}return Sn.Fragment=s,Sn.jsx=c,Sn.jsxs=c,Sn}Ng.exports=B0();var wn=Ng.exports;const Fh=10,j_=(e=0)=>t=>`\x1B[${t+e}m`,$_=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,K_=(e=0)=>(t,s,o)=>`\x1B[${38+e};2;${t};${s};${o}m`,ze={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(ze.modifier);const O0=Object.keys(ze.color),A0=Object.keys(ze.bgColor);[...O0,...A0];function N0(){const e=new Map;for(const[t,s]of Object.entries(ze)){for(const[o,a]of Object.entries(s))ze[o]={open:`\x1B[${a[0]}m`,close:`\x1B[${a[1]}m`},s[o]=ze[o],e.set(a[0],a[1]);Object.defineProperty(ze,t,{value:s,enumerable:!1})}return Object.defineProperty(ze,"codes",{value:e,enumerable:!1}),ze.color.close="\x1B[39m",ze.bgColor.close="\x1B[49m",ze.color.ansi=j_(),ze.color.ansi256=$_(),ze.color.ansi16m=K_(),ze.bgColor.ansi=j_(Fh),ze.bgColor.ansi256=$_(Fh),ze.bgColor.ansi16m=K_(Fh),Object.defineProperties(ze,{rgbToAnsi256:{value(t,s,o){return t===s&&s===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(s/255*5)+Math.round(o/255*5)},enumerable:!1},hexToRgb:{value(t){const s=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!s)return[0,0,0];let[o]=s;o.length===3&&(o=[...o].map(h=>h+h).join(""));const a=Number.parseInt(o,16);return[a>>16&255,a>>8&255,a&255]},enumerable:!1},hexToAnsi256:{value:t=>ze.rgbToAnsi256(...ze.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value(t){if(t<8)return 30+t;if(t<16)return 90+(t-8);let s,o,a;if(t>=232)s=((t-232)*10+8)/255,o=s,a=s;else{t-=16;const _=t%36;s=Math.floor(t/36)/5,o=Math.floor(_/6)/5,a=_%6/5}const h=Math.max(s,o,a)*2;if(h===0)return 30;let c=30+(Math.round(a)<<2|Math.round(o)<<1|Math.round(s));return h===2&&(c+=60),c},enumerable:!1},rgbToAnsi:{value:(t,s,o)=>ze.ansi256ToAnsi(ze.rgbToAnsi256(t,s,o)),enumerable:!1},hexToAnsi:{value:t=>ze.ansi256ToAnsi(ze.hexToAnsi256(t)),enumerable:!1}}),ze}const Pr=N0(),V_=(()=>{if(!("navigator"in globalThis))return 0;if(globalThis.navigator.userAgentData){const e=navigator.userAgentData.brands.find(({brand:t})=>t==="Chromium");if(e&&e.version>93)return 3}return/\b(Chrome|Chromium)\//.test(globalThis.navigator.userAgent)?1:0})(),q_=V_!==0&&{level:V_},I0={stdout:q_,stderr:q_};function z0(e,t,s){let o=e.indexOf(t);if(o===-1)return e;const a=t.length;let h=0,c="";do c+=e.slice(h,o)+t+s,h=o+a,o=e.indexOf(t,h);while(o!==-1);return c+=e.slice(h),c}function W0(e,t,s,o){let a=0,h="";do{const c=e[o-1]==="\r";h+=e.slice(a,c?o-1:o)+t+(c?`\r
`:`
`)+s,a=o+1,o=e.indexOf(`
`,a)}while(o!==-1);return h+=e.slice(a),h}const{stdout:X_,stderr:Y_}=I0,gu=Symbol("GENERATOR"),ks=Symbol("STYLER"),zn=Symbol("IS_EMPTY"),G_=["ansi","ansi","ansi256","ansi16m"],xs=Object.create(null),F0=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const s=X_?X_.level:0;e.level=t.level===void 0?s:t.level},H0=e=>{const t=(...s)=>s.join(" ");return F0(t,e),Object.setPrototypeOf(t,$n.prototype),t};function $n(e){return H0(e)}Object.setPrototypeOf($n.prototype,Function.prototype);for(const[e,t]of Object.entries(Pr))xs[e]={get(){const s=Ll(this,vu(t.open,t.close,this[ks]),this[zn]);return Object.defineProperty(this,e,{value:s}),s}};xs.visible={get(){const e=Ll(this,this[ks],!0);return Object.defineProperty(this,"visible",{value:e}),e}};const mu=(e,t,s,...o)=>e==="rgb"?t==="ansi16m"?Pr[s].ansi16m(...o):t==="ansi256"?Pr[s].ansi256(Pr.rgbToAnsi256(...o)):Pr[s].ansi(Pr.rgbToAnsi(...o)):e==="hex"?mu("rgb",t,s,...Pr.hexToRgb(...o)):Pr[s][e](...o),U0=["rgb","hex","ansi256"];for(const e of U0){xs[e]={get(){const{level:s}=this;return function(...o){const a=vu(mu(e,G_[s],"color",...o),Pr.color.close,this[ks]);return Ll(this,a,this[zn])}}};const t="bg"+e[0].toUpperCase()+e.slice(1);xs[t]={get(){const{level:s}=this;return function(...o){const a=vu(mu(e,G_[s],"bgColor",...o),Pr.bgColor.close,this[ks]);return Ll(this,a,this[zn])}}}}const j0=Object.defineProperties(()=>{},{...xs,level:{enumerable:!0,get(){return this[gu].level},set(e){this[gu].level=e}}}),vu=(e,t,s)=>{let o,a;return s===void 0?(o=e,a=t):(o=s.openAll+e,a=t+s.closeAll),{open:e,close:t,openAll:o,closeAll:a,parent:s}},Ll=(e,t,s)=>{const o=(...a)=>$0(o,a.length===1?""+a[0]:a.join(" "));return Object.setPrototypeOf(o,j0),o[gu]=e,o[ks]=t,o[zn]=s,o},$0=(e,t)=>{if(e.level<=0||!t)return e[zn]?"":t;let s=e[ks];if(s===void 0)return t;const{openAll:o,closeAll:a}=s;if(t.includes("\x1B"))for(;s!==void 0;)t=z0(t,s.close,s.open),s=s.parent;const h=t.indexOf(`
`);return h!==-1&&(t=W0(t,a,o,h)),o+t+a};Object.defineProperties($n.prototype,xs);const _r=$n();$n({level:Y_?Y_.level:0});/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var K0=2,V0=1,q0=class{activate(e){this._terminal=e}dispose(){}fit(){let e=this.proposeDimensions();if(!e||!this._terminal||isNaN(e.cols)||isNaN(e.rows))return;let t=this._terminal._core;(this._terminal.rows!==e.rows||this._terminal.cols!==e.cols)&&(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}proposeDimensions(){var e;if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let t=this._terminal._core._renderService.dimensions;if(t.css.cell.width===0||t.css.cell.height===0)return;let s=this._terminal.options.scrollback===0?0:((e=this._terminal.options.overviewRuler)==null?void 0:e.width)||14,o=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(o.getPropertyValue("height")),h=Math.max(0,parseInt(o.getPropertyValue("width"))),c=window.getComputedStyle(this._terminal.element),_={top:parseInt(c.getPropertyValue("padding-top")),bottom:parseInt(c.getPropertyValue("padding-bottom")),right:parseInt(c.getPropertyValue("padding-right")),left:parseInt(c.getPropertyValue("padding-left"))},g=_.top+_.bottom,p=_.right+_.left,y=a-g,v=h-p-s;return{cols:Math.max(K0,Math.floor(v/t.css.cell.width)),rows:Math.max(V0,Math.floor(y/t.css.cell.height))}}},Ig={exports:{}};(function(e,t){(function(s,o){e.exports=o()})(self,()=>(()=>{var s={575:function(c,_,g){typeof self<"u"||typeof window<"u"||g.g!==void 0&&g.g,c.exports=function(){var p,y="3.7.7",v=y,C=typeof Buffer=="function",w=typeof TextDecoder=="function"?new TextDecoder:void 0,A=typeof TextEncoder=="function"?new TextEncoder:void 0,T=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),M=(p={},T.forEach(function(D,ae){return p[D]=ae}),p),X=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ie=String.fromCharCode.bind(String),se=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(D){return new Uint8Array(Array.prototype.slice.call(D,0))},W=function(D){return D.replace(/=/g,"").replace(/[+\/]/g,function(ae){return ae=="+"?"-":"_"})},G=function(D){return D.replace(/[^A-Za-z0-9\+\/]/g,"")},ee=function(D){for(var ae,Qe,He,Bt,vt="",Vr=D.length%3,pr=0;pr<D.length;){if((Qe=D.charCodeAt(pr++))>255||(He=D.charCodeAt(pr++))>255||(Bt=D.charCodeAt(pr++))>255)throw new TypeError("invalid character found");vt+=T[(ae=Qe<<16|He<<8|Bt)>>18&63]+T[ae>>12&63]+T[ae>>6&63]+T[63&ae]}return Vr?vt.slice(0,Vr-3)+"===".substring(Vr):vt},fe=typeof btoa=="function"?function(D){return btoa(D)}:C?function(D){return Buffer.from(D,"binary").toString("base64")}:ee,we=C?function(D){return Buffer.from(D).toString("base64")}:function(D){for(var ae=[],Qe=0,He=D.length;Qe<He;Qe+=4096)ae.push(ie.apply(null,D.subarray(Qe,Qe+4096)));return fe(ae.join(""))},pe=function(D,ae){return ae===void 0&&(ae=!1),ae?W(we(D)):we(D)},xe=function(D){if(D.length<2)return(ae=D.charCodeAt(0))<128?D:ae<2048?ie(192|ae>>>6)+ie(128|63&ae):ie(224|ae>>>12&15)+ie(128|ae>>>6&63)+ie(128|63&ae);var ae=65536+1024*(D.charCodeAt(0)-55296)+(D.charCodeAt(1)-56320);return ie(240|ae>>>18&7)+ie(128|ae>>>12&63)+ie(128|ae>>>6&63)+ie(128|63&ae)},Le=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,I=function(D){return D.replace(Le,xe)},P=C?function(D){return Buffer.from(D,"utf8").toString("base64")}:A?function(D){return we(A.encode(D))}:function(D){return fe(I(D))},B=function(D,ae){return ae===void 0&&(ae=!1),ae?W(P(D)):P(D)},E=function(D){return B(D,!0)},z=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,U=function(D){switch(D.length){case 4:var ae=((7&D.charCodeAt(0))<<18|(63&D.charCodeAt(1))<<12|(63&D.charCodeAt(2))<<6|63&D.charCodeAt(3))-65536;return ie(55296+(ae>>>10))+ie(56320+(1023&ae));case 3:return ie((15&D.charCodeAt(0))<<12|(63&D.charCodeAt(1))<<6|63&D.charCodeAt(2));default:return ie((31&D.charCodeAt(0))<<6|63&D.charCodeAt(1))}},N=function(D){return D.replace(z,U)},q=function(D){if(D=D.replace(/\s+/g,""),!X.test(D))throw new TypeError("malformed base64.");D+="==".slice(2-(3&D.length));for(var ae,Qe,He,Bt="",vt=0;vt<D.length;)ae=M[D.charAt(vt++)]<<18|M[D.charAt(vt++)]<<12|(Qe=M[D.charAt(vt++)])<<6|(He=M[D.charAt(vt++)]),Bt+=Qe===64?ie(ae>>16&255):He===64?ie(ae>>16&255,ae>>8&255):ie(ae>>16&255,ae>>8&255,255&ae);return Bt},$=typeof atob=="function"?function(D){return atob(G(D))}:C?function(D){return Buffer.from(D,"base64").toString("binary")}:q,k=C?function(D){return se(Buffer.from(D,"base64"))}:function(D){return se($(D).split("").map(function(ae){return ae.charCodeAt(0)}))},F=function(D){return k(te(D))},j=C?function(D){return Buffer.from(D,"base64").toString("utf8")}:w?function(D){return w.decode(k(D))}:function(D){return N($(D))},te=function(D){return G(D.replace(/[-_]/g,function(ae){return ae=="-"?"+":"/"}))},Q=function(D){return j(te(D))},re=function(D){return{value:D,enumerable:!1,writable:!0,configurable:!0}},oe=function(){var D=function(ae,Qe){return Object.defineProperty(String.prototype,ae,re(Qe))};D("fromBase64",function(){return Q(this)}),D("toBase64",function(ae){return B(this,ae)}),D("toBase64URI",function(){return B(this,!0)}),D("toBase64URL",function(){return B(this,!0)}),D("toUint8Array",function(){return F(this)})},ue=function(){var D=function(ae,Qe){return Object.defineProperty(Uint8Array.prototype,ae,re(Qe))};D("toBase64",function(ae){return pe(this,ae)}),D("toBase64URI",function(){return pe(this,!0)}),D("toBase64URL",function(){return pe(this,!0)})},ve={version:y,VERSION:v,atob:$,atobPolyfill:q,btoa:fe,btoaPolyfill:ee,fromBase64:Q,toBase64:B,encode:B,encodeURI:E,encodeURL:E,utob:I,btou:N,decode:Q,isValid:function(D){if(typeof D!="string")return!1;var ae=D.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(ae)||!/[^\s0-9a-zA-Z\-_]/.test(ae)},fromUint8Array:pe,toUint8Array:F,extendString:oe,extendUint8Array:ue,extendBuiltins:function(){oe(),ue()},Base64:{}};return Object.keys(ve).forEach(function(D){return ve.Base64[D]=ve[D]}),ve}()}},o={};function a(c){var _=o[c];if(_!==void 0)return _.exports;var g=o[c]={exports:{}};return s[c].call(g.exports,g,g.exports,a),g.exports}a.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var h={};return(()=>{var c=h;Object.defineProperty(c,"__esModule",{value:!0}),c.Base64=c.BrowserClipboardProvider=c.ClipboardAddon=void 0;const _=a(575);c.ClipboardAddon=class{constructor(y=new p,v=new g){this._base64=y,this._provider=v}activate(y){this._terminal=y,this._disposable=y.parser.registerOscHandler(52,v=>this._setOrReportClipboard(v))}dispose(){var y;return(y=this._disposable)==null?void 0:y.dispose()}_readText(y,v){var C;const w=this._base64.encodeText(v);(C=this._terminal)==null||C.input(`\x1B]52;${y};${w}\x07`,!1)}_setOrReportClipboard(y){const v=y.split(";");if(v.length<2)return!0;const C=v[0],w=v[1];if(w==="?"){const M=this._provider.readText(C);return M instanceof Promise?M.then(X=>(this._readText(C,X),!0)):(this._readText(C,M),!0)}let A="";try{A=this._base64.decodeText(w)}catch{}const T=this._provider.writeText(C,A);return!(T instanceof Promise)||T.then(()=>!0)}};class g{async readText(v){return v!=="c"?Promise.resolve(""):navigator.clipboard.readText()}async writeText(v,C){return v!=="c"?Promise.resolve():navigator.clipboard.writeText(C)}}c.BrowserClipboardProvider=g;class p{encodeText(v){return _.Base64.encode(v)}decodeText(v){const C=_.Base64.decode(v);return _.Base64.isValid(v)&&_.Base64.encode(C)===v?C:""}}c.Base64=p})(),h})())})(Ig);var X0=Ig.exports,zg={exports:{}};(function(e,t){(function(s,o){e.exports=o()})(self,()=>(()=>{var s={6:(c,_)=>{function g(y){try{const v=new URL(y),C=v.password&&v.username?`${v.protocol}//${v.username}:${v.password}@${v.host}`:v.username?`${v.protocol}//${v.username}@${v.host}`:`${v.protocol}//${v.host}`;return y.toLocaleLowerCase().startsWith(C.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(_,"__esModule",{value:!0}),_.LinkComputer=_.WebLinkProvider=void 0,_.WebLinkProvider=class{constructor(y,v,C,w={}){this._terminal=y,this._regex=v,this._handler=C,this._options=w}provideLinks(y,v){const C=p.computeLink(y,this._regex,this._terminal,this._handler);v(this._addCallbacks(C))}_addCallbacks(y){return y.map(v=>(v.leave=this._options.leave,v.hover=(C,w)=>{if(this._options.hover){const{range:A}=v;this._options.hover(C,w,A)}},v))}};class p{static computeLink(v,C,w,A){const T=new RegExp(C.source,(C.flags||"")+"g"),[M,X]=p._getWindowedLineStrings(v-1,w),ie=M.join("");let se;const W=[];for(;se=T.exec(ie);){const G=se[0];if(!g(G))continue;const[ee,fe]=p._mapStrIdx(w,X,0,se.index),[we,pe]=p._mapStrIdx(w,ee,fe,G.length);if(ee===-1||fe===-1||we===-1||pe===-1)continue;const xe={start:{x:fe+1,y:ee+1},end:{x:pe,y:we+1}};W.push({range:xe,text:G,activate:A})}return W}static _getWindowedLineStrings(v,C){let w,A=v,T=v,M=0,X="";const ie=[];if(w=C.buffer.active.getLine(v)){const se=w.translateToString(!0);if(w.isWrapped&&se[0]!==" "){for(M=0;(w=C.buffer.active.getLine(--A))&&M<2048&&(X=w.translateToString(!0),M+=X.length,ie.push(X),w.isWrapped&&X.indexOf(" ")===-1););ie.reverse()}for(ie.push(se),M=0;(w=C.buffer.active.getLine(++T))&&w.isWrapped&&M<2048&&(X=w.translateToString(!0),M+=X.length,ie.push(X),X.indexOf(" ")===-1););}return[ie,A]}static _mapStrIdx(v,C,w,A){const T=v.buffer.active,M=T.getNullCell();let X=w;for(;A;){const ie=T.getLine(C);if(!ie)return[-1,-1];for(let se=X;se<ie.length;++se){ie.getCell(se,M);const W=M.getChars();if(M.getWidth()&&(A-=W.length||1,se===ie.length-1&&W==="")){const G=T.getLine(C+1);G&&G.isWrapped&&(G.getCell(0,M),M.getWidth()===2&&(A+=1))}if(A<0)return[C,se]}C++,X=0}return[C,X]}}_.LinkComputer=p}},o={};function a(c){var _=o[c];if(_!==void 0)return _.exports;var g=o[c]={exports:{}};return s[c](g,g.exports,a),g.exports}var h={};return(()=>{var c=h;Object.defineProperty(c,"__esModule",{value:!0}),c.WebLinksAddon=void 0;const _=a(6),g=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function p(y,v){const C=window.open();if(C){try{C.opener=null}catch{}C.location.href=v}else console.warn("Opening link blocked as opener could not be cleared")}c.WebLinksAddon=class{constructor(y=p,v={}){this._handler=y,this._options=v}activate(y){this._terminal=y;const v=this._options,C=v.urlRegex||g;this._linkProvider=this._terminal.registerLinkProvider(new _.WebLinkProvider(this._terminal,C,this._handler,v))}dispose(){var y;(y=this._linkProvider)==null||y.dispose()}}})(),h})())})(zg);var Y0=zg.exports;/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var Hh=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],G0=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],nt;function Q0(e,t){let s=0,o=t.length-1,a;if(e<t[0][0]||e>t[o][1])return!1;for(;o>=s;)if(a=s+o>>1,e>t[a][1])s=a+1;else if(e<t[a][0])o=a-1;else return!0;return!1}var Z0=class{constructor(){if(this.version="6",!nt){nt=new Uint8Array(65536),nt.fill(1),nt[0]=0,nt.fill(0,1,32),nt.fill(0,127,160),nt.fill(2,4352,4448),nt[9001]=2,nt[9002]=2,nt.fill(2,11904,42192),nt[12351]=1,nt.fill(2,44032,55204),nt.fill(2,63744,64256),nt.fill(2,65040,65050),nt.fill(2,65072,65136),nt.fill(2,65280,65377),nt.fill(2,65504,65511);for(let e=0;e<Hh.length;++e)nt.fill(0,Hh[e][0],Hh[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?nt[e]:Q0(e,G0)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,t){let s=this.wcwidth(e),o=s===0&&t!==0;if(o){let a=Cs.extractWidth(t);a===0?o=!1:a>s&&(s=a)}return Cs.createPropertyValue(0,s,o)}},J0=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Q_.isErrorNoTelemetry(e)?new Q_(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},eS=new J0;function Uh(e){tS(e)||eS.onUnexpectedError(e)}var yu="Canceled";function tS(e){return e instanceof rS?!0:e instanceof Error&&e.name===yu&&e.message===yu}var rS=class extends Error{constructor(){super(yu),this.name=this.message}},Q_=class Su extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof Su)return t;let s=new Su;return s.message=t.message,s.stack=t.stack,s}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}};function iS(e,t){let s=this,o=!1,a;return function(){return o||(o=!0,a=e.apply(s,arguments)),a}}var Z_;(e=>{function t(h){return h<0}e.isLessThan=t;function s(h){return h<=0}e.isLessThanOrEqual=s;function o(h){return h>0}e.isGreaterThan=o;function a(h){return h===0}e.isNeitherLessOrGreaterThan=a,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(Z_||(Z_={}));var wu;(e=>{function t(W){return W&&typeof W=="object"&&typeof W[Symbol.iterator]=="function"}e.is=t;let s=Object.freeze([]);function o(){return s}e.empty=o;function*a(W){yield W}e.single=a;function h(W){return t(W)?W:a(W)}e.wrap=h;function c(W){return W||s}e.from=c;function*_(W){for(let G=W.length-1;G>=0;G--)yield W[G]}e.reverse=_;function g(W){return!W||W[Symbol.iterator]().next().done===!0}e.isEmpty=g;function p(W){return W[Symbol.iterator]().next().value}e.first=p;function y(W,G){let ee=0;for(let fe of W)if(G(fe,ee++))return!0;return!1}e.some=y;function v(W,G){for(let ee of W)if(G(ee))return ee}e.find=v;function*C(W,G){for(let ee of W)G(ee)&&(yield ee)}e.filter=C;function*w(W,G){let ee=0;for(let fe of W)yield G(fe,ee++)}e.map=w;function*A(W,G){let ee=0;for(let fe of W)yield*G(fe,ee++)}e.flatMap=A;function*T(...W){for(let G of W)yield*G}e.concat=T;function M(W,G,ee){let fe=ee;for(let we of W)fe=G(fe,we);return fe}e.reduce=M;function*X(W,G,ee=W.length){for(G<0&&(G+=W.length),ee<0?ee+=W.length:ee>W.length&&(ee=W.length);G<ee;G++)yield W[G]}e.slice=X;function ie(W,G=Number.POSITIVE_INFINITY){let ee=[];if(G===0)return[ee,W];let fe=W[Symbol.iterator]();for(let we=0;we<G;we++){let pe=fe.next();if(pe.done)return[ee,e.empty()];ee.push(pe.value)}return[ee,{[Symbol.iterator](){return fe}}]}e.consume=ie;async function se(W){let G=[];for await(let ee of W)G.push(ee);return Promise.resolve(G)}e.asyncToArray=se})(wu||(wu={}));function Wg(e){if(wu.is(e)){let t=[];for(let s of e)if(s)try{s.dispose()}catch(o){t.push(o)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function sS(...e){return Fg(()=>Wg(e))}function Fg(e){return{dispose:iS(()=>{e()})}}var Hg=class Ug{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Wg(this._toDispose)}finally{this._toDispose.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?Ug.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(t),t.dispose()}}deleteAndLeak(t){t&&this._toDispose.has(t)&&this._toDispose.delete(t)}};Hg.DISABLE_DISPOSED_WARNING=!1;var Cc=Hg,Rl=class{constructor(){this._store=new Cc,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};Rl.None=Object.freeze({dispose(){}});var nS=globalThis.performance&&typeof globalThis.performance.now=="function",oS=class jg{static create(t){return new jg(t)}constructor(t){this._now=nS&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},J_;(e=>{e.None=()=>Rl.None;function t(I,P){return v(I,()=>{},0,void 0,!0,void 0,P)}e.defer=t;function s(I){return(P,B=null,E)=>{let z=!1,U;return U=I(N=>{if(!z)return U?U.dispose():z=!0,P.call(B,N)},null,E),z&&U.dispose(),U}}e.once=s;function o(I,P,B){return p((E,z=null,U)=>I(N=>E.call(z,P(N)),null,U),B)}e.map=o;function a(I,P,B){return p((E,z=null,U)=>I(N=>{P(N),E.call(z,N)},null,U),B)}e.forEach=a;function h(I,P,B){return p((E,z=null,U)=>I(N=>P(N)&&E.call(z,N),null,U),B)}e.filter=h;function c(I){return I}e.signal=c;function _(...I){return(P,B=null,E)=>{let z=sS(...I.map(U=>U(N=>P.call(B,N))));return y(z,E)}}e.any=_;function g(I,P,B,E){let z=B;return o(I,U=>(z=P(z,U),z),E)}e.reduce=g;function p(I,P){let B,E={onWillAddFirstListener(){B=I(z.fire,z)},onDidRemoveLastListener(){B==null||B.dispose()}},z=new pi(E);return P==null||P.add(z),z.event}function y(I,P){return P instanceof Array?P.push(I):P&&P.add(I),I}function v(I,P,B=100,E=!1,z=!1,U,N){let q,$,k,F=0,j,te={leakWarningThreshold:U,onWillAddFirstListener(){q=I(re=>{F++,$=P($,re),E&&!k&&(Q.fire($),$=void 0),j=()=>{let oe=$;$=void 0,k=void 0,(!E||F>1)&&Q.fire(oe),F=0},typeof B=="number"?(clearTimeout(k),k=setTimeout(j,B)):k===void 0&&(k=0,queueMicrotask(j))})},onWillRemoveListener(){z&&F>0&&(j==null||j())},onDidRemoveLastListener(){j=void 0,q.dispose()}},Q=new pi(te);return N==null||N.add(Q),Q.event}e.debounce=v;function C(I,P=0,B){return e.debounce(I,(E,z)=>E?(E.push(z),E):[z],P,void 0,!0,void 0,B)}e.accumulate=C;function w(I,P=(E,z)=>E===z,B){let E=!0,z;return h(I,U=>{let N=E||!P(U,z);return E=!1,z=U,N},B)}e.latch=w;function A(I,P,B){return[e.filter(I,P,B),e.filter(I,E=>!P(E),B)]}e.split=A;function T(I,P=!1,B=[],E){let z=B.slice(),U=I($=>{z?z.push($):q.fire($)});E&&E.add(U);let N=()=>{z==null||z.forEach($=>q.fire($)),z=null},q=new pi({onWillAddFirstListener(){U||(U=I($=>q.fire($)),E&&E.add(U))},onDidAddFirstListener(){z&&(P?setTimeout(N):N())},onDidRemoveLastListener(){U&&U.dispose(),U=null}});return E&&E.add(q),q.event}e.buffer=T;function M(I,P){return(B,E,z)=>{let U=P(new ie);return I(function(N){let q=U.evaluate(N);q!==X&&B.call(E,q)},void 0,z)}}e.chain=M;let X=Symbol("HaltChainable");class ie{constructor(){this.steps=[]}map(P){return this.steps.push(P),this}forEach(P){return this.steps.push(B=>(P(B),B)),this}filter(P){return this.steps.push(B=>P(B)?B:X),this}reduce(P,B){let E=B;return this.steps.push(z=>(E=P(E,z),E)),this}latch(P=(B,E)=>B===E){let B=!0,E;return this.steps.push(z=>{let U=B||!P(z,E);return B=!1,E=z,U?z:X}),this}evaluate(P){for(let B of this.steps)if(P=B(P),P===X)break;return P}}function se(I,P,B=E=>E){let E=(...q)=>N.fire(B(...q)),z=()=>I.on(P,E),U=()=>I.removeListener(P,E),N=new pi({onWillAddFirstListener:z,onDidRemoveLastListener:U});return N.event}e.fromNodeEventEmitter=se;function W(I,P,B=E=>E){let E=(...q)=>N.fire(B(...q)),z=()=>I.addEventListener(P,E),U=()=>I.removeEventListener(P,E),N=new pi({onWillAddFirstListener:z,onDidRemoveLastListener:U});return N.event}e.fromDOMEventEmitter=W;function G(I){return new Promise(P=>s(I)(P))}e.toPromise=G;function ee(I){let P=new pi;return I.then(B=>{P.fire(B)},()=>{P.fire(void 0)}).finally(()=>{P.dispose()}),P.event}e.fromPromise=ee;function fe(I,P){return I(B=>P.fire(B))}e.forward=fe;function we(I,P,B){return P(B),I(E=>P(E))}e.runAndSubscribe=we;class pe{constructor(P,B){this._observable=P,this._counter=0,this._hasChanged=!1;let E={onWillAddFirstListener:()=>{P.addObserver(this)},onDidRemoveLastListener:()=>{P.removeObserver(this)}};this.emitter=new pi(E),B&&B.add(this.emitter)}beginUpdate(P){this._counter++}handlePossibleChange(P){}handleChange(P,B){this._hasChanged=!0}endUpdate(P){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function xe(I,P){return new pe(I,P).emitter.event}e.fromObservable=xe;function Le(I){return(P,B,E)=>{let z=0,U=!1,N={beginUpdate(){z++},endUpdate(){z--,z===0&&(I.reportChanges(),U&&(U=!1,P.call(B)))},handlePossibleChange(){},handleChange(){U=!0}};I.addObserver(N),I.reportChanges();let q={dispose(){I.removeObserver(N)}};return E instanceof Cc?E.add(q):Array.isArray(E)&&E.push(q),q}}e.fromObservableLight=Le})(J_||(J_={}));var Cu=class bu{constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${bu._idPool++}`,bu.all.add(this)}start(t){this._stopWatch=new oS,this.listenerCount=t}stop(){if(this._stopWatch){let t=this._stopWatch.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this._stopWatch=void 0}}};Cu.all=new Set,Cu._idPool=0;var lS=Cu,aS=-1,$g=class Kg{constructor(t,s,o=(Kg._idPool++).toString(16).padStart(3,"0")){this._errorHandler=t,this.threshold=s,this.name=o,this._warnCountdown=0}dispose(){var t;(t=this._stacks)==null||t.clear()}check(t,s){let o=this.threshold;if(o<=0||s<o)return;this._stacks||(this._stacks=new Map);let a=this._stacks.get(t.value)||0;if(this._stacks.set(t.value,a+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=o*.5;let[h,c]=this.getMostFrequentStack(),_=`[${this.name}] potential listener LEAK detected, having ${s} listeners already. MOST frequent listener (${c}):`;console.warn(_),console.warn(h);let g=new cS(_,h);this._errorHandler(g)}return()=>{let h=this._stacks.get(t.value)||0;this._stacks.set(t.value,h-1)}}getMostFrequentStack(){if(!this._stacks)return;let t,s=0;for(let[o,a]of this._stacks)(!t||s<a)&&(t=[o,a],s=a);return t}};$g._idPool=1;var hS=$g,uS=class Vg{constructor(t){this.value=t}static create(){let t=new Error;return new Vg(t.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},cS=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},dS=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},fS=0,jh=class{constructor(e){this.value=e,this.id=fS++}},_S=2,pi=class{constructor(e){var t,s,o,a;this._size=0,this._options=e,this._leakageMon=(t=this._options)!=null&&t.leakWarningThreshold?new hS((e==null?void 0:e.onListenerError)??Uh,((s=this._options)==null?void 0:s.leakWarningThreshold)??aS):void 0,this._perfMon=(o=this._options)!=null&&o._profName?new lS(this._options._profName):void 0,this._deliveryQueue=(a=this._options)==null?void 0:a.deliveryQueue}dispose(){var e,t,s,o;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)==null?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(s=(t=this._options)==null?void 0:t.onDidRemoveLastListener)==null||s.call(t),(o=this._leakageMon)==null||o.dispose())}get event(){return this._event??(this._event=(e,t,s)=>{var o,a,h,c,_;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let v=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(v);let C=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],w=new dS(`${v}. HINT: Stack shows most frequent listener (${C[1]}-times)`,C[0]);return(((o=this._options)==null?void 0:o.onListenerError)||Uh)(w),Rl.None}if(this._disposed)return Rl.None;t&&(e=e.bind(t));let g=new jh(e),p;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(g.stack=uS.create(),p=this._leakageMon.check(g.stack,this._size+1)),this._listeners?this._listeners instanceof jh?(this._deliveryQueue??(this._deliveryQueue=new pS),this._listeners=[this._listeners,g]):this._listeners.push(g):((h=(a=this._options)==null?void 0:a.onWillAddFirstListener)==null||h.call(a,this),this._listeners=g,(_=(c=this._options)==null?void 0:c.onDidAddFirstListener)==null||_.call(c,this)),this._size++;let y=Fg(()=>{p==null||p(),this._removeListener(g)});return s instanceof Cc?s.add(y):Array.isArray(s)&&s.push(y),y}),this._event}_removeListener(e){var t,s,o,a;if((s=(t=this._options)==null?void 0:t.onWillRemoveListener)==null||s.call(t,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(a=(o=this._options)==null?void 0:o.onDidRemoveLastListener)==null||a.call(o,this),this._size=0;return}let h=this._listeners,c=h.indexOf(e);if(c===-1)throw this._disposed,this._size,JSON.stringify(this._listeners),new Error("Attempted to dispose unknown listener");this._size--,h[c]=void 0;let _=this._deliveryQueue.current===this;if(this._size*_S<=h.length){let g=0;for(let p=0;p<h.length;p++)h[p]?h[g++]=h[p]:_&&(this._deliveryQueue.end--,g<this._deliveryQueue.i&&this._deliveryQueue.i--);h.length=g}}_deliver(e,t){var s;if(!e)return;let o=((s=this._options)==null?void 0:s.onListenerError)||Uh;if(!o){e.value(t);return}try{e.value(t)}catch(a){o(a)}}_deliverQueue(e){let t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,s,o,a;if((t=this._deliveryQueue)!=null&&t.current&&(this._deliverQueue(this._deliveryQueue),(s=this._perfMon)==null||s.stop()),(o=this._perfMon)==null||o.start(this._size),this._listeners)if(this._listeners instanceof jh)this._deliver(this._listeners,e);else{let h=this._deliveryQueue;h.enqueue(this,e,this._listeners.length),this._deliverQueue(h)}(a=this._perfMon)==null||a.stop()}hasListeners(){return this._size>0}},pS=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,s){this.i=0,this.end=s,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Cs=class Sl{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new pi,this.onChange=this._onChange.event;let t=new Z0;this.register(t),this._active=t.version,this._activeProvider=t}static extractShouldJoin(t){return(t&1)!==0}static extractWidth(t){return t>>1&3}static extractCharKind(t){return t>>3}static createPropertyValue(t,s,o=!1){return(t&16777215)<<3|(s&3)<<1|(o?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(t){if(!this._providers[t])throw new Error(`unknown Unicode version "${t}"`);this._active=t,this._activeProvider=this._providers[t],this._onChange.fire(t)}register(t){this._providers[t.version]=t}wcwidth(t){return this._activeProvider.wcwidth(t)}getStringCellWidth(t){let s=0,o=0,a=t.length;for(let h=0;h<a;++h){let c=t.charCodeAt(h);if(55296<=c&&c<=56319){if(++h>=a)return s+this.wcwidth(c);let p=t.charCodeAt(h);56320<=p&&p<=57343?c=(c-55296)*1024+p-56320+65536:s+=this.wcwidth(p)}let _=this.charProperties(c,o),g=Sl.extractWidth(_);Sl.extractShouldJoin(_)&&(g-=Sl.extractWidth(o)),s+=g,o=_}return s}charProperties(t,s){return this._activeProvider.charProperties(t,s)}},bc=0,qg=-3,Wn=class{constructor(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}},gS=class{constructor(e,t){this.tag=0,this.bitcount=0,this.destLen=0,this.sourceIndex=0,this.source=e,this.dest=t,this.ltree=new Wn,this.dtree=new Wn}},Xg=new Wn,Yg=new Wn,kc=new Uint8Array(30),xc=new Uint16Array(30),Gg=new Uint8Array(30),Qg=new Uint16Array(30),mS=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ep=new Wn,wr=new Uint8Array(320);function Zg(e,t,s,o){var a,h;for(a=0;a<s;++a)e[a]=0;for(a=0;a<30-s;++a)e[a+s]=a/s|0;for(h=o,a=0;a<30;++a)t[a]=h,h+=1<<e[a]}function vS(e,t){var s;for(s=0;s<7;++s)e.table[s]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,s=0;s<24;++s)e.trans[s]=256+s;for(s=0;s<144;++s)e.trans[24+s]=s;for(s=0;s<8;++s)e.trans[168+s]=280+s;for(s=0;s<112;++s)e.trans[176+s]=144+s;for(s=0;s<5;++s)t.table[s]=0;for(t.table[5]=32,s=0;s<32;++s)t.trans[s]=s}var tp=new Uint16Array(16);function $h(e,t,s,o){var a,h;for(a=0;a<16;++a)e.table[a]=0;for(a=0;a<o;++a)e.table[t[s+a]]++;for(e.table[0]=0,h=0,a=0;a<16;++a)tp[a]=h,h+=e.table[a];for(a=0;a<o;++a)t[s+a]&&(e.trans[tp[t[s+a]]++]=a)}function yS(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=e.tag&1;return e.tag>>>=1,t}function Lr(e,t,s){if(!t)return s;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var o=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,o+s}function ku(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var s=0,o=0,a=0,h=e.tag;do o=2*o+(h&1),h>>>=1,++a,s+=t.table[a],o-=t.table[a];while(o>=0);return e.tag=h,e.bitcount-=a,t.trans[s+o]}function SS(e,t,s){var o,a,h,c,_,g;for(o=Lr(e,5,257),a=Lr(e,5,1),h=Lr(e,4,4),c=0;c<19;++c)wr[c]=0;for(c=0;c<h;++c){var p=Lr(e,3,0);wr[mS[c]]=p}for($h(ep,wr,0,19),_=0;_<o+a;){var y=ku(e,ep);switch(y){case 16:var v=wr[_-1];for(g=Lr(e,2,3);g;--g)wr[_++]=v;break;case 17:for(g=Lr(e,3,3);g;--g)wr[_++]=0;break;case 18:for(g=Lr(e,7,11);g;--g)wr[_++]=0;break;default:wr[_++]=y;break}}$h(t,wr,0,o),$h(s,wr,o,a)}function rp(e,t,s){for(;;){var o=ku(e,t);if(o===256)return bc;if(o<256)e.dest[e.destLen++]=o;else{var a,h,c,_;for(o-=257,a=Lr(e,kc[o],xc[o]),h=ku(e,s),c=e.destLen-Lr(e,Gg[h],Qg[h]),_=c;_<c+a;++_)e.dest[e.destLen++]=e.dest[_]}}}function wS(e){for(var t,s,o;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if(t=e.source[e.sourceIndex+1],t=256*t+e.source[e.sourceIndex],s=e.source[e.sourceIndex+3],s=256*s+e.source[e.sourceIndex+2],t!==(~s&65535))return qg;for(e.sourceIndex+=4,o=t;o;--o)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,bc}function CS(e,t){var s=new gS(e,t),o,a,h;do{switch(o=yS(s),a=Lr(s,2,0),a){case 0:h=wS(s);break;case 1:h=rp(s,Xg,Yg);break;case 2:SS(s,s.ltree,s.dtree),h=rp(s,s.ltree,s.dtree);break;default:h=qg}if(h!==bc)throw new Error("Data error")}while(!o);return s.destLen<s.dest.length?typeof s.dest.slice=="function"?s.dest.slice(0,s.destLen):s.dest.subarray(0,s.destLen):s.dest}vS(Xg,Yg);Zg(kc,xc,4,3);Zg(Gg,Qg,2,1);kc[28]=0;xc[28]=258;var ip=CS,Ec=11,zi=5,bS=Ec-zi,kS=65536>>Ec,xS=1<<bS,ES=xS-1,wl=2,PS=1<<zi,Kh=PS-1,Jg=65536>>zi,LS=1024>>zi,RS=Jg+LS,DS=RS,TS=32,MS=DS+TS,BS=1<<wl,OS=new Uint8Array(new Uint32Array([305419896]).buffer)[0]===18,AS=class{constructor(e){let t=new DataView(e.buffer);this.highStart=t.getUint32(0,!0),this.errorValue=t.getUint32(4,!0);let s=t.getUint32(8,!0);if(e=e.subarray(12),e=ip(e,new Uint8Array(s)),e=ip(e,new Uint8Array(s)),OS){let o=e.length;for(let a=0;a<o;a+=4){let h=e[a];e[a]=e[a+3],e[a+3]=h;let c=e[a+1];e[a+1]=e[a+2],e[a+2]=c}}this.data=new Uint32Array(e.buffer)}get(e){let t;return e<0||e>1114111?this.errorValue:e<55296||e>56319&&e<=65535?(t=(this.data[e>>zi]<<wl)+(e&Kh),this.data[t]):e<=65535?(t=(this.data[Jg+(e-55296>>zi)]<<wl)+(e&Kh),this.data[t]):e<this.highStart?(t=this.data[MS-kS+(e>>Ec)],t=this.data[t+(e>>zi&ES)],t=(t<<wl)+(e&Kh),this.data[t]):this.data[this.data.length-BS]}},NS=AS,IS="AAARAAAAAABwxwAAAb4LQfTtmw+sVmUdx58LL/ffe/kjzNBV80gW1F3yR+6CvbJiypoZa0paWmAWSluErSBbFtYkkuZykq6QamGJ4WRqo2kFGy6dYWtEq6G1MFAJbRbOVTQr+x7f5+x97q/n/3me87wXzm/3s+f/7/d7/p7znnvOlvGMbQM7wIPgEbAPHABPgcPgefAS+BfYwuv/F/Q2OulBxKcK6TMRPxu8FcwFbwcjYCFYDC4Cl4ArwNXgGvBJsA58UdBDwy+jbBO4La8DtoEd4H7wkNBuN+KPgn3gADgIngaHwFHwF/AyeAWMm4C+TGi3LdiJ/EnIex04A2RgFpgD5oKFYDG4CLwHXAo+IKSvAqt4/evA9bz9jWA6+Cq3dyvCP8HWNwX93wF38/ROcD94SCjP2+1B+BiPP4HwgOD/7xD/I08fRniMx48jPAFeBeuF+n29jE0G08FZvaPHYWZvh9mcEfAOjlhXx/qGfd2QvLO3zccmtMnzliC9lPt+GenD1nyMiK/LNf1cycs+gfAzPJ6vtxe4jhuQtx5sBLeA28G3eb3v8/Beif4HkPewxu5G6N/rMP4qfgEdvwZPgj+AZ8Cx3nYfxiE8Dk6AV0FfH/YEOB28AbwJDIPzQAtcAC4Gl/Z19F+J+NVCehWPr0b46b7RvixvdPg8yr7U10l/BfFN4La8DdgGdoAHwU/AI2AfOACeAofB8+AlcAKwfvyBKeCM/o7NrF9PXmdWv9/Ynot2I7ztIg8dF5I2a8i63CjZU+9Fm2Wcy4U4ZQVYyeOrwVoev57UuxHcJKRvFuJXgnU8/nUebtbYrKmpCUOx31P7UVNTU1NTU1NTU1OGLTz8Xr/77+W7+9vP0or0MxPMbXaizY8FW3sQ3wseB/t5/kGEh8DR/vbzwL8i/Af4Dy8fP8BYE0weaKenI/wV/DhrQG97JspngzlgLpgHzgPzwUhdVpfVZXVZXRa87HxwAVgQ4Pn5WEd85l5TUzOasvezFw/E3b/LoP9D4CpwrcTWWsGXNQOj748/G9k3G56d1KYxmbELwQbwKFiJvBM8nDWlHa5E+AOwCzwLzjkNeeB28NvTeB1OYyr0gQ1g99R23nGE50xj7MPgc+A+8K5Bxj4FHgB/G2z/T9XEzCZjd/S0WYX4Pc3/r/Nn5I0f6qQXIP5x8ENwBMyYyNhHJ3b0pOCuLrBvM941NTU1JyNHEp+BrC8dMyalt1/m3uWfhmeULzRGp9d3wf0WZSN8+prCr60Wz09tuNmx35sl9Y825HXvRN39KNveaL8flb9f913kbec67kHeTsR3gYcH2uV7ED4m2HhCYi/X9ZuBzvuXv0f8iKIfx5B/XCg7gTgbVPdvAsomCuWnD45eK28UyvL3Jt+s0fU2TVnOXJQvJHUWIb0ELAWXgCt4+UcMumSsEtpch/g6ouMGpG/ieZsc9N/q4YsLd3D9WyPbsWEbfNgO7hN82TWY/n8xKbmsC3xQsYKf+7sjrx2TH+u4H3vhx+OO6+X9hmtXN7C/4r15EPaeBs9J7L7YBeeED/k7wn8fbIf/Rji+yVizmd4vW6bB19cb/PU9w7MxMA60bzPHgM8+zG623+OnzOf55yNc3Gw/k303wveBy3nZcoTXgNVgLfiCRNcG5N3SbIebwZ08fhe4l8d/BH7K4yI/4+HPwS/BAfBks+PzIaHuc3x+ivSL4GUyZ68I6fwZYRNMG2qnz+Th2QjfMtTx/1zE5w61nyN+Q7C3aKgdin1dgrylYBn4INdhGn/Z2FfFiqH01/SUXMvnPD+jC+j85N/RqRhR/DYaS6T+P09K1mD+vzW+5zVqqeVUl0wTz2lK8odJHRGXfBufdGLSoSo3+ZFJ6sl0qvJVNmhI4z4i06mrZ6uT1le1z5h5HE3tMiHPtQ5javu+ItMXUr/MXpmwmyRL3D6U7UwIMyYfczGu0qdqb2pbhcw4xQkhWQBMerrZ/liXrGTbsQwTwrEu4zSczKLrd7fCSKiKn+zSo8BWXMe8myXWOivrUxWi60OPoQ7VIasbQ0S/Ukk3rZVullNhHEL1rYoxUF0PTfm6elWJzq54ZsU4z11ohOy0oxT2izFqCNj4TesXcWZo6+Jfqr1O+1O1beqDagypj2J9F1u2daucj3Eknmq/6PaHrK7Mb1o35DiW1a/a76LuhlDXZX25SOz11S33ErKxDb2/fc/bFKI6axskn+4/W90u9mOtbRf7smsoTdvOfwoRz0t6DaP9k81v6P7Re5aUQudTd303rX+bZzBl97/KR7E+Xbux9lLI+aNr1PfaYLpPDiW2/vrYTX1drMIeXbMye6HXlw8292Jl7ZXxLxRlxXbcaH9drjFlxfa3Qozx8NWRi834lPVZbD+SmN7EJPzc9TVCSVXXDps9L+513b2J7fMu176V2YOhx1A3JrJ8KrLxUumpcu5j/lYT+2tzLRVDZmhjO442a1Clu0ox9VPVXzE/lcS4V0k1D6LI1pJsz8fct9SGbO5l/rmKzTlvsxdj3IvRtC2uv0t1fotltvd2VaCy5Sp5m0EhnZG4CCNxXZrWp/VUIrOjapfnNw11ZNI0V/GWzKNuxtzGKKTEtJeR0NVmpojbtBuW5On0u0is9ZMxvU8ZM+8vEyadtu10oqtP9Q4rcJEm85+Two/QkpGwjI6YkgkhtUfzZOW6fFVexuRri+qj9TJJHZkdmW5abiu0rs6uj2TMfmx06bISUj9tZ9Lja8dVQtox6WpxTJKfW3M4MSTmvU4sWy1CU6BF4jIfdNeDjHWuO1lCWIm2Jr2ixNZvklD2fP0Q6+vsmO4hqN1hJvfDtV5G8mTlsvau4qPP1a64L1skT6QYEzEtq0PzGZOfCbSdSmcKTP7Qs86Ej/1hEpelaV6IMdT5ayu2+nT9tmnnO746XbLxE8t0qOrYtJWhmk9bvaLfsrotRVw1PnR+bcafSUKZ6Mps7smobybJLH2R6WqRkJa1DHV0UmbfUcksiSF0HExSpp+uY0zbTklMaCm7blzEtg8h1rNMXNaYi05ZXsbC75sQ/4+aUxFV2jL50Q3jE0rK2rVtN09By8OHoo1vH2LPSdE323mr2sdu0pUZiDkWLRKWnfeQY6taKzHF9n/GPv8jd/0/egiRvYMR24fU79iY3s9Qva9RlYR8n8HHtq9fMcT1HRWfdZXiHd9YInt/iI4PTaf+BimXKvdXYU+3hlRpHzs2dVK/cxhDn+xs0I2jzxjL5kpXz1VU72aLtkK/97sALKyQqu25SshvG6h08/cLrlKswRklKXvvXfa+pZt+y8nah5YUv2Oo/ap/X2URdRfico9K69hcp6r6XaCz5Wo/hs/iNTGF6N6tV92/9ZS0Wba9SlT3pKF/e6W674+x9ly+VRL73cPU8ygb31D3eSqfVd+iqET0y3YMYojoO11XqrTt2nPxmeq1HYeqxkmUMt8DiesjpoTSr+qDrD+qPZDiOZxMdH0pRPX8MFUfQtv0Xbs+a1a1NnRryNZ/2+tsaPG5ZoX0RXZei88yZGdo4UMPj/cwv/kMJboxLISuQbE+1VW12Mx7FWOrW3M9Hv7Y+uxyraPSo8B2TGPuLdOeZha+hBKf8Sjsm/oR+7pmsx/oeOraFWdXleeV6oyl41zm+mgSuq9C6ox1TsU8D+m4dwMmf8v2nz7Tm+fYfj7HV1K/x1HWjquvY+2dllxM64ue87Su772zzbXIVC+WxLZTRR9MdkMTypZNH1z6G0tUvoccwxA+hfLNdV+a7MaQqscztMi+7QnxDZXvd1dldWQOyMbApb1Jd2h91Ffx+y9Xfb7tClokboOvrRhrbVpFFO8z+65t2/u4su9MUx028znH01/TGVDmHAj13W1o+1USw+eUfYtpO+b82rRNsb6oPpV+1fdBqddB6n3WDXvdJDZrJ0QfQp6bsc/kqq4BIddHWXGdN1pmWveh58F1zYUW1zmOITHXWOg1XrZvZSWUf77tq1ofqear6muaT1lIQp3bofabSafJVlnfYo9B6LGr8uzz2Xchvzfw+T9PlgiV/A8=";function zS(e){if(typeof Buffer<"u")return Buffer.from(e,"base64");let t=atob(e),s=new Uint8Array(t.length);for(let o=0;o<s.length;++o)s[o]=t.charCodeAt(o);return s}var WS=new NS(zS(IS)),xu=15,Eu=0,FS=48,HS=4,US=0,em=1,tm=2,Pu=3,jS=4,Vh=5,qh=6,Xh=7,sp=8,Yh=9,np=10,$S=11,KS=32;function op(e){return(e&FS)>>HS}function VS(e,t){let s=(e&xu)>>Eu,o=(t&xu)>>Eu;return qS(s,o)?o===Pu?KS:o+16:o-16}function qS(e,t){return e>=Vh&&e<=Yh&&(e==Vh&&(t==Vh||t==qh||t==sp||t==Yh)||(e==sp||e==qh)&&(t==qh||t==Xh)||(e==Yh||e==Xh)&&t==Xh)||t==tm||t==np||e==em||t==jS||e==np&&t==$S||t==Pu&&e==Pu}function lp(e){return WS.get(e)}var rm=class im{constructor(t=!0){this.ambiguousCharsAreWide=!1,this.version=t?"15-graphemes":"15",this.handleGraphemes=t}charProperties(t,s){if(t>=32&&t<127&&!(s>>3))return im._plainNarrowProperties;let o=lp(t),a=op(o),h=!1;if(a>=2?a=a===3||this.ambiguousCharsAreWide||t===65039?2:1:a=1,s!==0){let c=Cs.extractWidth(s);this.handleGraphemes?o=VS(Cs.extractCharKind(s),o):o=a===0?1:0,h=o>0,h&&(c>a?a=c:o===32&&(a=2))}return Cs.createPropertyValue(o,a,h)}wcwidth(t){let s=lp(t),o=op(s),a=(s&xu)>>Eu;return a===tm||a===em?0:o>=2&&(o===3||this.ambiguousCharsAreWide)?2:1}};rm._plainNarrowProperties=Cs.createPropertyValue(US,1,!1);var ap=rm,XS=class{constructor(){this._oldVersion=""}activate(e){this._provider15||(this._provider15=new ap(!1)),this._provider15Graphemes||(this._provider15Graphemes=new ap(!0));let t=e.unicode;this._unicode=t,t.register(this._provider15),t.register(this._provider15Graphemes),this._oldVersion=t.activeVersion,t.activeVersion="15-graphemes"}dispose(){this._unicode&&(this._unicode.activeVersion=this._oldVersion)}};/**
 * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
 * @license MIT
 *
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * @license MIT
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 */var sm=Object.defineProperty,YS=Object.getOwnPropertyDescriptor,GS=(e,t)=>{for(var s in t)sm(e,s,{get:t[s],enumerable:!0})},Ge=(e,t,s,o)=>{for(var a=o>1?void 0:o?YS(t,s):t,h=e.length-1,c;h>=0;h--)(c=e[h])&&(a=(o?c(t,s,a):c(a))||a);return o&&a&&sm(t,s,a),a},le=(e,t)=>(s,o)=>t(s,o,e),hp="Terminal input",Lu={get:()=>hp,set:e=>hp=e},up="Too much output to announce, navigate to rows manually to read",Ru={get:()=>up,set:e=>up=e};function QS(e){return e.replace(/\r?\n/g,"\r")}function ZS(e,t){return t?"\x1B[200~"+e+"\x1B[201~":e}function JS(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()}function ew(e,t,s,o){if(e.stopPropagation(),e.clipboardData){let a=e.clipboardData.getData("text/plain");nm(a,t,s,o)}}function nm(e,t,s,o){e=QS(e),e=ZS(e,s.decPrivateModes.bracketedPasteMode&&o.rawOptions.ignoreBracketedPasteMode!==!0),s.triggerDataEvent(e,!0),t.value=""}function om(e,t,s){let o=s.getBoundingClientRect(),a=e.clientX-o.left-10,h=e.clientY-o.top-10;t.style.width="20px",t.style.height="20px",t.style.left=`${a}px`,t.style.top=`${h}px`,t.style.zIndex="1000",t.focus()}function cp(e,t,s,o,a){om(e,t,s),a&&o.rightClickSelect(e),t.value=o.selectionText,t.select()}function gi(e){return e>65535?(e-=65536,String.fromCharCode((e>>10)+55296)+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)}function zl(e,t=0,s=e.length){let o="";for(let a=t;a<s;++a){let h=e[a];h>65535?(h-=65536,o+=String.fromCharCode((h>>10)+55296)+String.fromCharCode(h%1024+56320)):o+=String.fromCharCode(h)}return o}var tw=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){let s=e.length;if(!s)return 0;let o=0,a=0;if(this._interim){let h=e.charCodeAt(a++);56320<=h&&h<=57343?t[o++]=(this._interim-55296)*1024+h-56320+65536:(t[o++]=this._interim,t[o++]=h),this._interim=0}for(let h=a;h<s;++h){let c=e.charCodeAt(h);if(55296<=c&&c<=56319){if(++h>=s)return this._interim=c,o;let _=e.charCodeAt(h);56320<=_&&_<=57343?t[o++]=(c-55296)*1024+_-56320+65536:(t[o++]=c,t[o++]=_);continue}c!==65279&&(t[o++]=c)}return o}},rw=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){let s=e.length;if(!s)return 0;let o=0,a,h,c,_,g=0,p=0;if(this.interim[0]){let C=!1,w=this.interim[0];w&=(w&224)===192?31:(w&240)===224?15:7;let A=0,T;for(;(T=this.interim[++A]&63)&&A<4;)w<<=6,w|=T;let M=(this.interim[0]&224)===192?2:(this.interim[0]&240)===224?3:4,X=M-A;for(;p<X;){if(p>=s)return 0;if(T=e[p++],(T&192)!==128){p--,C=!0;break}else this.interim[A++]=T,w<<=6,w|=T&63}C||(M===2?w<128?p--:t[o++]=w:M===3?w<2048||w>=55296&&w<=57343||w===65279||(t[o++]=w):w<65536||w>1114111||(t[o++]=w)),this.interim.fill(0)}let y=s-4,v=p;for(;v<s;){for(;v<y&&!((a=e[v])&128)&&!((h=e[v+1])&128)&&!((c=e[v+2])&128)&&!((_=e[v+3])&128);)t[o++]=a,t[o++]=h,t[o++]=c,t[o++]=_,v+=4;if(a=e[v++],a<128)t[o++]=a;else if((a&224)===192){if(v>=s)return this.interim[0]=a,o;if(h=e[v++],(h&192)!==128){v--;continue}if(g=(a&31)<<6|h&63,g<128){v--;continue}t[o++]=g}else if((a&240)===224){if(v>=s)return this.interim[0]=a,o;if(h=e[v++],(h&192)!==128){v--;continue}if(v>=s)return this.interim[0]=a,this.interim[1]=h,o;if(c=e[v++],(c&192)!==128){v--;continue}if(g=(a&15)<<12|(h&63)<<6|c&63,g<2048||g>=55296&&g<=57343||g===65279)continue;t[o++]=g}else if((a&248)===240){if(v>=s)return this.interim[0]=a,o;if(h=e[v++],(h&192)!==128){v--;continue}if(v>=s)return this.interim[0]=a,this.interim[1]=h,o;if(c=e[v++],(c&192)!==128){v--;continue}if(v>=s)return this.interim[0]=a,this.interim[1]=h,this.interim[2]=c,o;if(_=e[v++],(_&192)!==128){v--;continue}if(g=(a&7)<<18|(h&63)<<12|(c&63)<<6|_&63,g<65536||g>1114111)continue;t[o++]=g}}return o}},lm="",mi=" ",Kn=class am{constructor(){this.fg=0,this.bg=0,this.extended=new Dl}static toColorRGB(t){return[t>>>16&255,t>>>8&255,t&255]}static fromColorRGB(t){return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255}clone(){let t=new am;return t.fg=this.fg,t.bg=this.bg,t.extended=this.extended.clone(),t}isInverse(){return this.fg&67108864}isBold(){return this.fg&134217728}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:this.fg&268435456}isBlink(){return this.fg&536870912}isInvisible(){return this.fg&1073741824}isItalic(){return this.bg&67108864}isDim(){return this.bg&134217728}isStrikethrough(){return this.fg&2147483648}isProtected(){return this.bg&536870912}isOverline(){return this.bg&1073741824}getFgColorMode(){return this.fg&50331648}getBgColorMode(){return this.bg&50331648}isFgRGB(){return(this.fg&50331648)===50331648}isBgRGB(){return(this.bg&50331648)===50331648}isFgPalette(){return(this.fg&50331648)===16777216||(this.fg&50331648)===33554432}isBgPalette(){return(this.bg&50331648)===16777216||(this.bg&50331648)===33554432}isFgDefault(){return(this.fg&50331648)===0}isBgDefault(){return(this.bg&50331648)===0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}}getBgColor(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}}hasExtendedAttrs(){return this.bg&268435456}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(this.bg&268435456&&~this.extended.underlineColor)switch(this.extended.underlineColor&50331648){case 16777216:case 33554432:return this.extended.underlineColor&255;case 50331648:return this.extended.underlineColor&16777215;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return this.bg&268435456&&~this.extended.underlineColor?this.extended.underlineColor&50331648:this.getFgColorMode()}isUnderlineColorRGB(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===50331648:this.isFgRGB()}isUnderlineColorPalette(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===16777216||(this.extended.underlineColor&50331648)===33554432:this.isFgPalette()}isUnderlineColorDefault(){return this.bg&268435456&&~this.extended.underlineColor?(this.extended.underlineColor&50331648)===0:this.isFgDefault()}getUnderlineStyle(){return this.fg&268435456?this.bg&268435456?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}},Dl=class hm{constructor(t=0,s=0){this._ext=0,this._urlId=0,this._ext=t,this._urlId=s}get ext(){return this._urlId?this._ext&-469762049|this.underlineStyle<<26:this._ext}set ext(t){this._ext=t}get underlineStyle(){return this._urlId?5:(this._ext&469762048)>>26}set underlineStyle(t){this._ext&=-469762049,this._ext|=t<<26&469762048}get underlineColor(){return this._ext&67108863}set underlineColor(t){this._ext&=-67108864,this._ext|=t&67108863}get urlId(){return this._urlId}set urlId(t){this._urlId=t}get underlineVariantOffset(){let t=(this._ext&3758096384)>>29;return t<0?t^4294967288:t}set underlineVariantOffset(t){this._ext&=536870911,this._ext|=t<<29&3758096384}clone(){return new hm(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}},sr=class um extends Kn{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new Dl,this.combinedData=""}static fromCharData(t){let s=new um;return s.setFromCharData(t),s}isCombined(){return this.content&2097152}getWidth(){return this.content>>22}getChars(){return this.content&2097152?this.combinedData:this.content&2097151?gi(this.content&2097151):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&2097151}setFromCharData(t){this.fg=t[0],this.bg=0;let s=!1;if(t[1].length>2)s=!0;else if(t[1].length===2){let o=t[1].charCodeAt(0);if(55296<=o&&o<=56319){let a=t[1].charCodeAt(1);56320<=a&&a<=57343?this.content=(o-55296)*1024+a-56320+65536|t[2]<<22:s=!0}else s=!0}else this.content=t[1].charCodeAt(0)|t[2]<<22;s&&(this.combinedData=t[1],this.content=2097152|t[2]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},dp="di$target",Du="di$dependencies",Gh=new Map;function iw(e){return e[Du]||[]}function mt(e){if(Gh.has(e))return Gh.get(e);let t=function(s,o,a){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");sw(t,s,a)};return t.toString=()=>e,Gh.set(e,t),t}function sw(e,t,s){t[dp]===t?t[Du].push({id:e,index:s}):(t[Du]=[{id:e,index:s}],t[dp]=t)}var Mt=mt("BufferService"),cm=mt("CoreMouseService"),Rs=mt("CoreService"),nw=mt("CharsetService"),Pc=mt("InstantiationService"),dm=mt("LogService"),Ut=mt("OptionsService"),fm=mt("OscLinkService"),ow=mt("UnicodeService"),Vn=mt("DecorationService"),Tu=class{constructor(e,t,s){this._bufferService=e,this._optionsService=t,this._oscLinkService=s}provideLinks(e,t){var s;let o=this._bufferService.buffer.lines.get(e-1);if(!o){t(void 0);return}let a=[],h=this._optionsService.rawOptions.linkHandler,c=new sr,_=o.getTrimmedLength(),g=-1,p=-1,y=!1;for(let v=0;v<_;v++)if(!(p===-1&&!o.hasContent(v))){if(o.loadCell(v,c),c.hasExtendedAttrs()&&c.extended.urlId)if(p===-1){p=v,g=c.extended.urlId;continue}else y=c.extended.urlId!==g;else p!==-1&&(y=!0);if(y||p!==-1&&v===_-1){let C=(s=this._oscLinkService.getLinkData(g))==null?void 0:s.uri;if(C){let w={start:{x:p+1,y:e},end:{x:v+(!y&&v===_-1?1:0),y:e}},A=!1;if(!(h!=null&&h.allowNonHttpProtocols))try{let T=new URL(C);["http:","https:"].includes(T.protocol)||(A=!0)}catch{A=!0}A||a.push({text:C,range:w,activate:(T,M)=>h?h.activate(T,M,w):lw(T,M),hover:(T,M)=>{var X;return(X=h==null?void 0:h.hover)==null?void 0:X.call(h,T,M,w)},leave:(T,M)=>{var X;return(X=h==null?void 0:h.leave)==null?void 0:X.call(h,T,M,w)}})}y=!1,c.hasExtendedAttrs()&&c.extended.urlId?(p=v,g=c.extended.urlId):(p=-1,g=-1)}}t(a)}};Tu=Ge([le(0,Mt),le(1,Ut),le(2,fm)],Tu);function lw(e,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){let s=window.open();if(s){try{s.opener=null}catch{}s.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}var Wl=mt("CharSizeService"),$r=mt("CoreBrowserService"),Lc=mt("MouseService"),Kr=mt("RenderService"),aw=mt("SelectionService"),_m=mt("CharacterJoinerService"),Ds=mt("ThemeService"),pm=mt("LinkProviderService"),hw=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?fp.isErrorNoTelemetry(e)?new fp(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},uw=new hw;function Cl(e){cw(e)||uw.onUnexpectedError(e)}var Mu="Canceled";function cw(e){return e instanceof dw?!0:e instanceof Error&&e.name===Mu&&e.message===Mu}var dw=class extends Error{constructor(){super(Mu),this.name=this.message}};function fw(e){return new Error(`Illegal argument: ${e}`)}var fp=class Bu extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof Bu)return t;let s=new Bu;return s.message=t.message,s.stack=t.stack,s}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},Ou=class gm extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,gm.prototype)}};function qt(e,t=0){return e[e.length-(1+t)]}var _p;(e=>{function t(h){return h<0}e.isLessThan=t;function s(h){return h<=0}e.isLessThanOrEqual=s;function o(h){return h>0}e.isGreaterThan=o;function a(h){return h===0}e.isNeitherLessOrGreaterThan=a,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(_p||(_p={}));function _w(e,t){let s=this,o=!1,a;return function(){return o||(o=!0,a=e.apply(s,arguments)),a}}var Au;(e=>{function t(W){return W&&typeof W=="object"&&typeof W[Symbol.iterator]=="function"}e.is=t;let s=Object.freeze([]);function o(){return s}e.empty=o;function*a(W){yield W}e.single=a;function h(W){return t(W)?W:a(W)}e.wrap=h;function c(W){return W||s}e.from=c;function*_(W){for(let G=W.length-1;G>=0;G--)yield W[G]}e.reverse=_;function g(W){return!W||W[Symbol.iterator]().next().done===!0}e.isEmpty=g;function p(W){return W[Symbol.iterator]().next().value}e.first=p;function y(W,G){let ee=0;for(let fe of W)if(G(fe,ee++))return!0;return!1}e.some=y;function v(W,G){for(let ee of W)if(G(ee))return ee}e.find=v;function*C(W,G){for(let ee of W)G(ee)&&(yield ee)}e.filter=C;function*w(W,G){let ee=0;for(let fe of W)yield G(fe,ee++)}e.map=w;function*A(W,G){let ee=0;for(let fe of W)yield*G(fe,ee++)}e.flatMap=A;function*T(...W){for(let G of W)yield*G}e.concat=T;function M(W,G,ee){let fe=ee;for(let we of W)fe=G(fe,we);return fe}e.reduce=M;function*X(W,G,ee=W.length){for(G<0&&(G+=W.length),ee<0?ee+=W.length:ee>W.length&&(ee=W.length);G<ee;G++)yield W[G]}e.slice=X;function ie(W,G=Number.POSITIVE_INFINITY){let ee=[];if(G===0)return[ee,W];let fe=W[Symbol.iterator]();for(let we=0;we<G;we++){let pe=fe.next();if(pe.done)return[ee,e.empty()];ee.push(pe.value)}return[ee,{[Symbol.iterator](){return fe}}]}e.consume=ie;async function se(W){let G=[];for await(let ee of W)G.push(ee);return Promise.resolve(G)}e.asyncToArray=se})(Au||(Au={}));function Fi(e){if(Au.is(e)){let t=[];for(let s of e)if(s)try{s.dispose()}catch(o){t.push(o)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function pw(...e){return qe(()=>Fi(e))}function qe(e){return{dispose:_w(()=>{e()})}}var mm=class vm{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Fi(this._toDispose)}finally{this._toDispose.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?vm.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(t),t.dispose()}}deleteAndLeak(t){t&&this._toDispose.has(t)&&this._toDispose.delete(t)}};mm.DISABLE_DISPOSED_WARNING=!1;var vi=mm,Ce=class{constructor(){this._store=new vi,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};Ce.None=Object.freeze({dispose(){}});var Es=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)==null||e.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e}},jr=typeof window=="object"?window:globalThis,Nu=class Iu{constructor(t){this.element=t,this.next=Iu.Undefined,this.prev=Iu.Undefined}};Nu.Undefined=new Nu(void 0);var $e=Nu,pp=class{constructor(){this._first=$e.Undefined,this._last=$e.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===$e.Undefined}clear(){let e=this._first;for(;e!==$e.Undefined;){let t=e.next;e.prev=$e.Undefined,e.next=$e.Undefined,e=t}this._first=$e.Undefined,this._last=$e.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let s=new $e(e);if(this._first===$e.Undefined)this._first=s,this._last=s;else if(t){let a=this._last;this._last=s,s.prev=a,a.next=s}else{let a=this._first;this._first=s,s.next=a,a.prev=s}this._size+=1;let o=!1;return()=>{o||(o=!0,this._remove(s))}}shift(){if(this._first!==$e.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==$e.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==$e.Undefined&&e.next!==$e.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===$e.Undefined&&e.next===$e.Undefined?(this._first=$e.Undefined,this._last=$e.Undefined):e.next===$e.Undefined?(this._last=this._last.prev,this._last.next=$e.Undefined):e.prev===$e.Undefined&&(this._first=this._first.next,this._first.prev=$e.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==$e.Undefined;)yield e.element,e=e.next}},gw=globalThis.performance&&typeof globalThis.performance.now=="function",mw=class ym{static create(t){return new ym(t)}constructor(t){this._now=gw&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}},wt;(e=>{e.None=()=>Ce.None;function t(I,P){return v(I,()=>{},0,void 0,!0,void 0,P)}e.defer=t;function s(I){return(P,B=null,E)=>{let z=!1,U;return U=I(N=>{if(!z)return U?U.dispose():z=!0,P.call(B,N)},null,E),z&&U.dispose(),U}}e.once=s;function o(I,P,B){return p((E,z=null,U)=>I(N=>E.call(z,P(N)),null,U),B)}e.map=o;function a(I,P,B){return p((E,z=null,U)=>I(N=>{P(N),E.call(z,N)},null,U),B)}e.forEach=a;function h(I,P,B){return p((E,z=null,U)=>I(N=>P(N)&&E.call(z,N),null,U),B)}e.filter=h;function c(I){return I}e.signal=c;function _(...I){return(P,B=null,E)=>{let z=pw(...I.map(U=>U(N=>P.call(B,N))));return y(z,E)}}e.any=_;function g(I,P,B,E){let z=B;return o(I,U=>(z=P(z,U),z),E)}e.reduce=g;function p(I,P){let B,E={onWillAddFirstListener(){B=I(z.fire,z)},onDidRemoveLastListener(){B==null||B.dispose()}},z=new J(E);return P==null||P.add(z),z.event}function y(I,P){return P instanceof Array?P.push(I):P&&P.add(I),I}function v(I,P,B=100,E=!1,z=!1,U,N){let q,$,k,F=0,j,te={leakWarningThreshold:U,onWillAddFirstListener(){q=I(re=>{F++,$=P($,re),E&&!k&&(Q.fire($),$=void 0),j=()=>{let oe=$;$=void 0,k=void 0,(!E||F>1)&&Q.fire(oe),F=0},typeof B=="number"?(clearTimeout(k),k=setTimeout(j,B)):k===void 0&&(k=0,queueMicrotask(j))})},onWillRemoveListener(){z&&F>0&&(j==null||j())},onDidRemoveLastListener(){j=void 0,q.dispose()}},Q=new J(te);return N==null||N.add(Q),Q.event}e.debounce=v;function C(I,P=0,B){return e.debounce(I,(E,z)=>E?(E.push(z),E):[z],P,void 0,!0,void 0,B)}e.accumulate=C;function w(I,P=(E,z)=>E===z,B){let E=!0,z;return h(I,U=>{let N=E||!P(U,z);return E=!1,z=U,N},B)}e.latch=w;function A(I,P,B){return[e.filter(I,P,B),e.filter(I,E=>!P(E),B)]}e.split=A;function T(I,P=!1,B=[],E){let z=B.slice(),U=I($=>{z?z.push($):q.fire($)});E&&E.add(U);let N=()=>{z==null||z.forEach($=>q.fire($)),z=null},q=new J({onWillAddFirstListener(){U||(U=I($=>q.fire($)),E&&E.add(U))},onDidAddFirstListener(){z&&(P?setTimeout(N):N())},onDidRemoveLastListener(){U&&U.dispose(),U=null}});return E&&E.add(q),q.event}e.buffer=T;function M(I,P){return(B,E,z)=>{let U=P(new ie);return I(function(N){let q=U.evaluate(N);q!==X&&B.call(E,q)},void 0,z)}}e.chain=M;let X=Symbol("HaltChainable");class ie{constructor(){this.steps=[]}map(P){return this.steps.push(P),this}forEach(P){return this.steps.push(B=>(P(B),B)),this}filter(P){return this.steps.push(B=>P(B)?B:X),this}reduce(P,B){let E=B;return this.steps.push(z=>(E=P(E,z),E)),this}latch(P=(B,E)=>B===E){let B=!0,E;return this.steps.push(z=>{let U=B||!P(z,E);return B=!1,E=z,U?z:X}),this}evaluate(P){for(let B of this.steps)if(P=B(P),P===X)break;return P}}function se(I,P,B=E=>E){let E=(...q)=>N.fire(B(...q)),z=()=>I.on(P,E),U=()=>I.removeListener(P,E),N=new J({onWillAddFirstListener:z,onDidRemoveLastListener:U});return N.event}e.fromNodeEventEmitter=se;function W(I,P,B=E=>E){let E=(...q)=>N.fire(B(...q)),z=()=>I.addEventListener(P,E),U=()=>I.removeEventListener(P,E),N=new J({onWillAddFirstListener:z,onDidRemoveLastListener:U});return N.event}e.fromDOMEventEmitter=W;function G(I){return new Promise(P=>s(I)(P))}e.toPromise=G;function ee(I){let P=new J;return I.then(B=>{P.fire(B)},()=>{P.fire(void 0)}).finally(()=>{P.dispose()}),P.event}e.fromPromise=ee;function fe(I,P){return I(B=>P.fire(B))}e.forward=fe;function we(I,P,B){return P(B),I(E=>P(E))}e.runAndSubscribe=we;class pe{constructor(P,B){this._observable=P,this._counter=0,this._hasChanged=!1;let E={onWillAddFirstListener:()=>{P.addObserver(this)},onDidRemoveLastListener:()=>{P.removeObserver(this)}};this.emitter=new J(E),B&&B.add(this.emitter)}beginUpdate(P){this._counter++}handlePossibleChange(P){}handleChange(P,B){this._hasChanged=!0}endUpdate(P){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function xe(I,P){return new pe(I,P).emitter.event}e.fromObservable=xe;function Le(I){return(P,B,E)=>{let z=0,U=!1,N={beginUpdate(){z++},endUpdate(){z--,z===0&&(I.reportChanges(),U&&(U=!1,P.call(B)))},handlePossibleChange(){},handleChange(){U=!0}};I.addObserver(N),I.reportChanges();let q={dispose(){I.removeObserver(N)}};return E instanceof vi?E.add(q):Array.isArray(E)&&E.push(q),q}}e.fromObservableLight=Le})(wt||(wt={}));var zu=class Wu{constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${Wu._idPool++}`,Wu.all.add(this)}start(t){this._stopWatch=new mw,this.listenerCount=t}stop(){if(this._stopWatch){let t=this._stopWatch.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this._stopWatch=void 0}}};zu.all=new Set,zu._idPool=0;var vw=zu,yw=-1,Sm=class wm{constructor(t,s,o=(wm._idPool++).toString(16).padStart(3,"0")){this._errorHandler=t,this.threshold=s,this.name=o,this._warnCountdown=0}dispose(){var t;(t=this._stacks)==null||t.clear()}check(t,s){let o=this.threshold;if(o<=0||s<o)return;this._stacks||(this._stacks=new Map);let a=this._stacks.get(t.value)||0;if(this._stacks.set(t.value,a+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=o*.5;let[h,c]=this.getMostFrequentStack(),_=`[${this.name}] potential listener LEAK detected, having ${s} listeners already. MOST frequent listener (${c}):`;console.warn(_),console.warn(h);let g=new Cw(_,h);this._errorHandler(g)}return()=>{let h=this._stacks.get(t.value)||0;this._stacks.set(t.value,h-1)}}getMostFrequentStack(){if(!this._stacks)return;let t,s=0;for(let[o,a]of this._stacks)(!t||s<a)&&(t=[o,a],s=a);return t}};Sm._idPool=1;var Sw=Sm,ww=class Cm{constructor(t){this.value=t}static create(){let t=new Error;return new Cm(t.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Cw=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},bw=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},kw=0,Qh=class{constructor(e){this.value=e,this.id=kw++}},xw=2,J=class{constructor(e){var t,s,o,a;this._size=0,this._options=e,this._leakageMon=(t=this._options)!=null&&t.leakWarningThreshold?new Sw((e==null?void 0:e.onListenerError)??Cl,((s=this._options)==null?void 0:s.leakWarningThreshold)??yw):void 0,this._perfMon=(o=this._options)!=null&&o._profName?new vw(this._options._profName):void 0,this._deliveryQueue=(a=this._options)==null?void 0:a.deliveryQueue}dispose(){var e,t,s,o;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)==null?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(s=(t=this._options)==null?void 0:t.onDidRemoveLastListener)==null||s.call(t),(o=this._leakageMon)==null||o.dispose())}get event(){return this._event??(this._event=(e,t,s)=>{var o,a,h,c,_;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let v=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(v);let C=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],w=new bw(`${v}. HINT: Stack shows most frequent listener (${C[1]}-times)`,C[0]);return(((o=this._options)==null?void 0:o.onListenerError)||Cl)(w),Ce.None}if(this._disposed)return Ce.None;t&&(e=e.bind(t));let g=new Qh(e),p;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(g.stack=ww.create(),p=this._leakageMon.check(g.stack,this._size+1)),this._listeners?this._listeners instanceof Qh?(this._deliveryQueue??(this._deliveryQueue=new Ew),this._listeners=[this._listeners,g]):this._listeners.push(g):((h=(a=this._options)==null?void 0:a.onWillAddFirstListener)==null||h.call(a,this),this._listeners=g,(_=(c=this._options)==null?void 0:c.onDidAddFirstListener)==null||_.call(c,this)),this._size++;let y=qe(()=>{p==null||p(),this._removeListener(g)});return s instanceof vi?s.add(y):Array.isArray(s)&&s.push(y),y}),this._event}_removeListener(e){var t,s,o,a;if((s=(t=this._options)==null?void 0:t.onWillRemoveListener)==null||s.call(t,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(a=(o=this._options)==null?void 0:o.onDidRemoveLastListener)==null||a.call(o,this),this._size=0;return}let h=this._listeners,c=h.indexOf(e);if(c===-1)throw this._disposed,this._size,JSON.stringify(this._listeners),new Error("Attempted to dispose unknown listener");this._size--,h[c]=void 0;let _=this._deliveryQueue.current===this;if(this._size*xw<=h.length){let g=0;for(let p=0;p<h.length;p++)h[p]?h[g++]=h[p]:_&&(this._deliveryQueue.end--,g<this._deliveryQueue.i&&this._deliveryQueue.i--);h.length=g}}_deliver(e,t){var s;if(!e)return;let o=((s=this._options)==null?void 0:s.onListenerError)||Cl;if(!o){e.value(t);return}try{e.value(t)}catch(a){o(a)}}_deliverQueue(e){let t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,s,o,a;if((t=this._deliveryQueue)!=null&&t.current&&(this._deliverQueue(this._deliveryQueue),(s=this._perfMon)==null||s.stop()),(o=this._perfMon)==null||o.start(this._size),this._listeners)if(this._listeners instanceof Qh)this._deliver(this._listeners,e);else{let h=this._deliveryQueue;h.enqueue(this,e,this._listeners.length),this._deliverQueue(h)}(a=this._perfMon)==null||a.stop()}hasListeners(){return this._size>0}},Ew=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,s){this.i=0,this.end=s,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Fu=class{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new J,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new J,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}getZoomLevel(e){return this.mapWindowIdToZoomLevel.get(this.getWindowId(e))??0}setZoomLevel(e,t){if(this.getZoomLevel(t)===e)return;let s=this.getWindowId(t);this.mapWindowIdToZoomLevel.set(s,e),this._onDidChangeZoomLevel.fire(s)}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}setZoomFactor(e,t){this.mapWindowIdToZoomFactor.set(this.getWindowId(t),e)}setFullscreen(e,t){if(this.isFullscreen(t)===e)return;let s=this.getWindowId(t);this.mapWindowIdToFullScreen.set(s,e),this._onDidChangeFullscreen.fire(s)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}};Fu.INSTANCE=new Fu;var Rc=Fu;function Pw(e,t,s){typeof t=="string"&&(t=e.matchMedia(t)),t.addEventListener("change",s)}Rc.INSTANCE.onDidChangeZoomLevel;function Lw(e){return Rc.INSTANCE.getZoomFactor(e)}Rc.INSTANCE.onDidChangeFullscreen;var Ts=typeof navigator=="object"?navigator.userAgent:"",Hu=Ts.indexOf("Firefox")>=0,Rw=Ts.indexOf("AppleWebKit")>=0,Dc=Ts.indexOf("Chrome")>=0,Dw=!Dc&&Ts.indexOf("Safari")>=0;Ts.indexOf("Electron/")>=0;Ts.indexOf("Android")>=0;var Zh=!1;if(typeof jr.matchMedia=="function"){let e=jr.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),t=jr.matchMedia("(display-mode: fullscreen)");Zh=e.matches,Pw(jr,e,({matches:s})=>{Zh&&t.matches||(Zh=s)})}var ws="en",Uu=!1,ju=!1,bl=!1,bm=!1,ul,kl=ws,gp=ws,Tw,Er,Wi=globalThis,Tt,mp;typeof Wi.vscode<"u"&&typeof Wi.vscode.process<"u"?Tt=Wi.vscode.process:typeof process<"u"&&typeof((mp=process==null?void 0:process.versions)==null?void 0:mp.node)=="string"&&(Tt=process);var vp,Mw=typeof((vp=Tt==null?void 0:Tt.versions)==null?void 0:vp.electron)=="string",Bw=Mw&&(Tt==null?void 0:Tt.type)==="renderer",yp;if(typeof Tt=="object"){Uu=Tt.platform==="win32",ju=Tt.platform==="darwin",bl=Tt.platform==="linux",bl&&Tt.env.SNAP&&Tt.env.SNAP_REVISION,Tt.env.CI||Tt.env.BUILD_ARTIFACTSTAGINGDIRECTORY,ul=ws,kl=ws;let e=Tt.env.VSCODE_NLS_CONFIG;if(e)try{let t=JSON.parse(e);ul=t.userLocale,gp=t.osLocale,kl=t.resolvedLanguage||ws,Tw=(yp=t.languagePack)==null?void 0:yp.translationsConfigFile}catch{}bm=!0}else typeof navigator=="object"&&!Bw?(Er=navigator.userAgent,Uu=Er.indexOf("Windows")>=0,ju=Er.indexOf("Macintosh")>=0,(Er.indexOf("Macintosh")>=0||Er.indexOf("iPad")>=0||Er.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,bl=Er.indexOf("Linux")>=0,(Er==null?void 0:Er.indexOf("Mobi"))>=0,kl=globalThis._VSCODE_NLS_LANGUAGE||ws,ul=navigator.language.toLowerCase(),gp=ul):console.error("Unable to resolve platform.");var km=Uu,Mr=ju,Ow=bl,Sp=bm,Br=Er,di=kl,wp;(e=>{function t(){return di}e.value=t;function s(){return di.length===2?di==="en":di.length>=3?di[0]==="e"&&di[1]==="n"&&di[2]==="-":!1}e.isDefaultVariant=s;function o(){return di==="en"}e.isDefault=o})(wp||(wp={}));var Aw=typeof Wi.postMessage=="function"&&!Wi.importScripts;(()=>{if(Aw){let e=[];Wi.addEventListener("message",s=>{if(s.data&&s.data.vscodeScheduleAsyncWork)for(let o=0,a=e.length;o<a;o++){let h=e[o];if(h.id===s.data.vscodeScheduleAsyncWork){e.splice(o,1),h.callback();return}}});let t=0;return s=>{let o=++t;e.push({id:o,callback:s}),Wi.postMessage({vscodeScheduleAsyncWork:o},"*")}}return e=>setTimeout(e)})();var Nw=!!(Br&&Br.indexOf("Chrome")>=0);Br&&Br.indexOf("Firefox")>=0;!Nw&&Br&&Br.indexOf("Safari")>=0;Br&&Br.indexOf("Edg/")>=0;Br&&Br.indexOf("Android")>=0;var ps=typeof navigator=="object"?navigator:{};Sp||document.queryCommandSupported&&document.queryCommandSupported("copy")||ps&&ps.clipboard&&ps.clipboard.writeText,Sp||ps&&ps.clipboard&&ps.clipboard.readText;var Tc=class{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},Jh=new Tc,Cp=new Tc,bp=new Tc,Iw=new Array(230),$u;(e=>{function t(_){return Jh.keyCodeToStr(_)}e.toString=t;function s(_){return Jh.strToKeyCode(_)}e.fromString=s;function o(_){return Cp.keyCodeToStr(_)}e.toUserSettingsUS=o;function a(_){return bp.keyCodeToStr(_)}e.toUserSettingsGeneral=a;function h(_){return Cp.strToKeyCode(_)||bp.strToKeyCode(_)}e.fromUserSettings=h;function c(_){if(_>=98&&_<=113)return null;switch(_){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return Jh.keyCodeToStr(_)}e.toElectronAccelerator=c})($u||($u={}));var zw=class xm{constructor(t,s,o,a,h){this.ctrlKey=t,this.shiftKey=s,this.altKey=o,this.metaKey=a,this.keyCode=h}equals(t){return t instanceof xm&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){let t=this.ctrlKey?"1":"0",s=this.shiftKey?"1":"0",o=this.altKey?"1":"0",a=this.metaKey?"1":"0";return`K${t}${s}${o}${a}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new Ww([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},Ww=class{constructor(e){if(e.length===0)throw fw("chords");this.chords=e}getHashCode(){let e="";for(let t=0,s=this.chords.length;t<s;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}};function Fw(e){if(e.charCode){let s=String.fromCharCode(e.charCode).toUpperCase();return $u.fromString(s)}let t=e.keyCode;if(t===3)return 7;if(Hu)switch(t){case 59:return 85;case 60:if(Ow)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Mr)return 57;break}else if(Rw&&(Mr&&t===93||!Mr&&t===92))return 57;return Iw[t]||0}var Hw=Mr?256:2048,Uw=512,jw=1024,$w=Mr?2048:256,kp=class{constructor(e){var t;this._standardKeyboardEventBrand=!0;let s=e;this.browserEvent=s,this.target=s.target,this.ctrlKey=s.ctrlKey,this.shiftKey=s.shiftKey,this.altKey=s.altKey,this.metaKey=s.metaKey,this.altGraphKey=(t=s.getModifierState)==null?void 0:t.call(s,"AltGraph"),this.keyCode=Fw(s),this.code=s.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=Hw),this.altKey&&(t|=Uw),this.shiftKey&&(t|=jw),this.metaKey&&(t|=$w),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new zw(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}},xp=new WeakMap;function Kw(e){if(!e.parent||e.parent===e)return null;try{let t=e.location,s=e.parent.location;if(t.origin!=="null"&&s.origin!=="null"&&t.origin!==s.origin)return null}catch{return null}return e.parent}var Vw=class{static getSameOriginWindowChain(e){let t=xp.get(e);if(!t){t=[],xp.set(e,t);let s=e,o;do o=Kw(s),o?t.push({window:new WeakRef(s),iframeElement:s.frameElement||null}):t.push({window:new WeakRef(s),iframeElement:null}),s=o;while(s)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let s=0,o=0,a=this.getSameOriginWindowChain(e);for(let h of a){let c=h.window.deref();if(s+=(c==null?void 0:c.scrollY)??0,o+=(c==null?void 0:c.scrollX)??0,c===t||!h.iframeElement)break;let _=h.iframeElement.getBoundingClientRect();s+=_.top,o+=_.left}return{top:s,left:o}}},cl=class{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let s=Vw.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=s.left,this.posy-=s.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}},Ep=class{constructor(e,t=0,s=0){var o;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=s,this.deltaX=t;let a=!1;if(Dc){let h=navigator.userAgent.match(/Chrome\/(\d+)/);a=(h?parseInt(h[1]):123)<=122}if(e){let h=e,c=e,_=((o=e.view)==null?void 0:o.devicePixelRatio)||1;if(typeof h.wheelDeltaY<"u")a?this.deltaY=h.wheelDeltaY/(120*_):this.deltaY=h.wheelDeltaY/120;else if(typeof c.VERTICAL_AXIS<"u"&&c.axis===c.VERTICAL_AXIS)this.deltaY=-c.detail/3;else if(e.type==="wheel"){let g=e;g.deltaMode===g.DOM_DELTA_LINE?Hu&&!Mr?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof h.wheelDeltaX<"u")Dw&&km?this.deltaX=-(h.wheelDeltaX/120):a?this.deltaX=h.wheelDeltaX/(120*_):this.deltaX=h.wheelDeltaX/120;else if(typeof c.HORIZONTAL_AXIS<"u"&&c.axis===c.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let g=e;g.deltaMode===g.DOM_DELTA_LINE?Hu&&!Mr?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(a?this.deltaY=e.wheelDelta/(120*_):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)==null||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)==null||e.stopPropagation()}},Em=Object.freeze(function(e,t){let s=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(s)}}}),Pp;(e=>{function t(s){return s===e.None||s===e.Cancelled||s instanceof qw?!0:!s||typeof s!="object"?!1:typeof s.isCancellationRequested=="boolean"&&typeof s.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:wt.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Em})})(Pp||(Pp={}));var qw=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Em:(this._emitter||(this._emitter=new J),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Mc=class{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Ou("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Ou("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},Xw=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;(e=this.disposable)==null||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,s=globalThis){if(this.isDisposed)throw new Ou("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let o=s.setInterval(()=>{e()},t);this.disposable=qe(()=>{s.clearInterval(o),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},Lp;(e=>{async function t(o){let a,h=await Promise.all(o.map(c=>c.then(_=>_,_=>{a||(a=_)})));if(typeof a<"u")throw a;return h}e.settled=t;function s(o){return new Promise(async(a,h)=>{try{await o(a,h)}catch(c){h(c)}})}e.withAsyncBody=s})(Lp||(Lp={}));var Rp=class rr{static fromArray(t){return new rr(s=>{s.emitMany(t)})}static fromPromise(t){return new rr(async s=>{s.emitMany(await t)})}static fromPromises(t){return new rr(async s=>{await Promise.all(t.map(async o=>s.emitOne(await o)))})}static merge(t){return new rr(async s=>{await Promise.all(t.map(async o=>{for await(let a of o)s.emitOne(a)}))})}constructor(t,s){this._state=0,this._results=[],this._error=null,this._onReturn=s,this._onStateChanged=new J,queueMicrotask(async()=>{let o={emitOne:a=>this.emitOne(a),emitMany:a=>this.emitMany(a),reject:a=>this.reject(a)};try{await Promise.resolve(t(o)),this.resolve()}catch(a){this.reject(a)}finally{o.emitOne=void 0,o.emitMany=void 0,o.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(t<this._results.length)return{done:!1,value:this._results[t++]};if(this._state===1)return{done:!0,value:void 0};await wt.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>{var s;return(s=this._onReturn)==null||s.call(this),{done:!0,value:void 0}}}}static map(t,s){return new rr(async o=>{for await(let a of t)o.emitOne(s(a))})}map(t){return rr.map(this,t)}static filter(t,s){return new rr(async o=>{for await(let a of t)s(a)&&o.emitOne(a)})}filter(t){return rr.filter(this,t)}static coalesce(t){return rr.filter(t,s=>!!s)}coalesce(){return rr.coalesce(this)}static async toPromise(t){let s=[];for await(let o of t)s.push(o);return s}toPromise(){return rr.toPromise(this)}emitOne(t){this._state===0&&(this._results.push(t),this._onStateChanged.fire())}emitMany(t){this._state===0&&(this._results=this._results.concat(t),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(t){this._state===0&&(this._state=2,this._error=t,this._onStateChanged.fire())}};Rp.EMPTY=Rp.fromArray([]);var{getWindow:Dr,getWindowId:Yw,onDidRegisterWindow:Gw}=function(){let e=new Map,t={window:jr,disposables:new vi};e.set(jr.vscodeWindowId,t);let s=new J,o=new J,a=new J;function h(c,_){return(typeof c=="number"?e.get(c):void 0)??(_?t:void 0)}return{onDidRegisterWindow:s.event,onWillUnregisterWindow:a.event,onDidUnregisterWindow:o.event,registerWindow(c){if(e.has(c.vscodeWindowId))return Ce.None;let _=new vi,g={window:c,disposables:_.add(new vi)};return e.set(c.vscodeWindowId,g),_.add(qe(()=>{e.delete(c.vscodeWindowId),o.fire(c)})),_.add(Se(c,ft.BEFORE_UNLOAD,()=>{a.fire(c)})),s.fire(g),_},getWindows(){return e.values()},getWindowsCount(){return e.size},getWindowId(c){return c.vscodeWindowId},hasWindow(c){return e.has(c)},getWindowById:h,getWindow(c){var _;let g=c;if((_=g==null?void 0:g.ownerDocument)!=null&&_.defaultView)return g.ownerDocument.defaultView.window;let p=c;return p!=null&&p.view?p.view.window:jr},getDocument(c){return Dr(c).document}}}(),Qw=class{constructor(e,t,s,o){this._node=e,this._type=t,this._handler=s,this._options=o||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function Se(e,t,s,o){return new Qw(e,t,s,o)}var Dp=function(e,t,s,o){return Se(e,t,s,o)},Bc,Zw=class extends Xw{constructor(e){super(),this.defaultTarget=e&&Dr(e)}cancelAndSet(e,t,s){return super.cancelAndSet(e,t,s??this.defaultTarget)}},Tp=class{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Cl(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let e=new Map,t=new Map,s=new Map,o=new Map,a=h=>{s.set(h,!1);let c=e.get(h)??[];for(t.set(h,c),e.set(h,[]),o.set(h,!0);c.length>0;)c.sort(Tp.sort),c.shift().execute();o.set(h,!1)};Bc=(h,c,_=0)=>{let g=Yw(h),p=new Tp(c,_),y=e.get(g);return y||(y=[],e.set(g,y)),y.push(p),s.get(g)||(s.set(g,!0),h.requestAnimationFrame(()=>a(g))),p}})();function Jw(e){let t=e.getBoundingClientRect(),s=Dr(e);return{left:t.left+s.scrollX,top:t.top+s.scrollY,width:t.width,height:t.height}}var ft={CLICK:"click",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",BLUR:"blur",INPUT:"input"},e1=class{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){let t=Ft(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=Ft(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=Ft(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=Ft(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=Ft(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=Ft(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=Ft(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){let t=Ft(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let t=Ft(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let t=Ft(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let t=Ft(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=Ft(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=Ft(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=Ft(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function Ft(e){return typeof e=="number"?`${e}px`:e}function On(e){return new e1(e)}var Pm=class{constructor(){this._hooks=new vi,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let s=this._onStopCallback;this._onStopCallback=null,e&&s&&s(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,s,o,a){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=o,this._onStopCallback=a;let h=e;try{e.setPointerCapture(t),this._hooks.add(qe(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{h=Dr(e)}this._hooks.add(Se(h,ft.POINTER_MOVE,c=>{if(c.buttons!==s){this.stopMonitoring(!0);return}c.preventDefault(),this._pointerMoveCallback(c)})),this._hooks.add(Se(h,ft.POINTER_UP,c=>this.stopMonitoring(!0)))}};function t1(e,t,s){let o=null,a=null;if(typeof s.value=="function"?(o="value",a=s.value,a.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof s.get=="function"&&(o="get",a=s.get),!a)throw new Error("not supported");let h=`$memoize$${t}`;s[o]=function(...c){return this.hasOwnProperty(h)||Object.defineProperty(this,h,{configurable:!1,enumerable:!1,writable:!1,value:a.apply(this,c)}),this[h]}}var fr;(e=>(e.Tap="-xterm-gesturetap",e.Change="-xterm-gesturechange",e.Start="-xterm-gesturestart",e.End="-xterm-gesturesend",e.Contextmenu="-xterm-gesturecontextmenu"))(fr||(fr={}));var Ln=class Pt extends Ce{constructor(){super(),this.dispatched=!1,this.targets=new pp,this.ignoreTargets=new pp,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(wt.runAndSubscribe(Gw,({window:t,disposables:s})=>{s.add(Se(t.document,"touchstart",o=>this.onTouchStart(o),{passive:!1})),s.add(Se(t.document,"touchend",o=>this.onTouchEnd(t,o))),s.add(Se(t.document,"touchmove",o=>this.onTouchMove(o),{passive:!1}))},{window:jr,disposables:this._store}))}static addTarget(t){if(!Pt.isTouchDevice())return Ce.None;Pt.INSTANCE||(Pt.INSTANCE=new Pt);let s=Pt.INSTANCE.targets.push(t);return qe(s)}static ignoreTarget(t){if(!Pt.isTouchDevice())return Ce.None;Pt.INSTANCE||(Pt.INSTANCE=new Pt);let s=Pt.INSTANCE.ignoreTargets.push(t);return qe(s)}static isTouchDevice(){return"ontouchstart"in jr||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(t){let s=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let o=0,a=t.targetTouches.length;o<a;o++){let h=t.targetTouches.item(o);this.activeTouches[h.identifier]={id:h.identifier,initialTarget:h.target,initialTimeStamp:s,initialPageX:h.pageX,initialPageY:h.pageY,rollingTimestamps:[s],rollingPageX:[h.pageX],rollingPageY:[h.pageY]};let c=this.newGestureEvent(fr.Start,h.target);c.pageX=h.pageX,c.pageY=h.pageY,this.dispatchEvent(c)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}onTouchEnd(t,s){let o=Date.now(),a=Object.keys(this.activeTouches).length;for(let h=0,c=s.changedTouches.length;h<c;h++){let _=s.changedTouches.item(h);if(!this.activeTouches.hasOwnProperty(String(_.identifier))){console.warn("move of an UNKNOWN touch",_);continue}let g=this.activeTouches[_.identifier],p=Date.now()-g.initialTimeStamp;if(p<Pt.HOLD_DELAY&&Math.abs(g.initialPageX-qt(g.rollingPageX))<30&&Math.abs(g.initialPageY-qt(g.rollingPageY))<30){let y=this.newGestureEvent(fr.Tap,g.initialTarget);y.pageX=qt(g.rollingPageX),y.pageY=qt(g.rollingPageY),this.dispatchEvent(y)}else if(p>=Pt.HOLD_DELAY&&Math.abs(g.initialPageX-qt(g.rollingPageX))<30&&Math.abs(g.initialPageY-qt(g.rollingPageY))<30){let y=this.newGestureEvent(fr.Contextmenu,g.initialTarget);y.pageX=qt(g.rollingPageX),y.pageY=qt(g.rollingPageY),this.dispatchEvent(y)}else if(a===1){let y=qt(g.rollingPageX),v=qt(g.rollingPageY),C=qt(g.rollingTimestamps)-g.rollingTimestamps[0],w=y-g.rollingPageX[0],A=v-g.rollingPageY[0],T=[...this.targets].filter(M=>g.initialTarget instanceof Node&&M.contains(g.initialTarget));this.inertia(t,T,o,Math.abs(w)/C,w>0?1:-1,y,Math.abs(A)/C,A>0?1:-1,v)}this.dispatchEvent(this.newGestureEvent(fr.End,g.initialTarget)),delete this.activeTouches[_.identifier]}this.dispatched&&(s.preventDefault(),s.stopPropagation(),this.dispatched=!1)}newGestureEvent(t,s){let o=document.createEvent("CustomEvent");return o.initEvent(t,!1,!0),o.initialTarget=s,o.tapCount=0,o}dispatchEvent(t){if(t.type===fr.Tap){let s=new Date().getTime(),o=0;s-this._lastSetTapCountTime>Pt.CLEAR_TAP_COUNT_TIME?o=1:o=2,this._lastSetTapCountTime=s,t.tapCount=o}else(t.type===fr.Change||t.type===fr.Contextmenu)&&(this._lastSetTapCountTime=0);if(t.initialTarget instanceof Node){for(let o of this.ignoreTargets)if(o.contains(t.initialTarget))return;let s=[];for(let o of this.targets)if(o.contains(t.initialTarget)){let a=0,h=t.initialTarget;for(;h&&h!==o;)a++,h=h.parentElement;s.push([a,o])}s.sort((o,a)=>o[0]-a[0]);for(let[o,a]of s)a.dispatchEvent(t),this.dispatched=!0}}inertia(t,s,o,a,h,c,_,g,p){this.handle=Bc(t,()=>{let y=Date.now(),v=y-o,C=0,w=0,A=!0;a+=Pt.SCROLL_FRICTION*v,_+=Pt.SCROLL_FRICTION*v,a>0&&(A=!1,C=h*a*v),_>0&&(A=!1,w=g*_*v);let T=this.newGestureEvent(fr.Change);T.translationX=C,T.translationY=w,s.forEach(M=>M.dispatchEvent(T)),A||this.inertia(t,s,y,a,h,c+C,_,g,p+w)})}onTouchMove(t){let s=Date.now();for(let o=0,a=t.changedTouches.length;o<a;o++){let h=t.changedTouches.item(o);if(!this.activeTouches.hasOwnProperty(String(h.identifier))){console.warn("end of an UNKNOWN touch",h);continue}let c=this.activeTouches[h.identifier],_=this.newGestureEvent(fr.Change,c.initialTarget);_.translationX=h.pageX-qt(c.rollingPageX),_.translationY=h.pageY-qt(c.rollingPageY),_.pageX=h.pageX,_.pageY=h.pageY,this.dispatchEvent(_),c.rollingPageX.length>3&&(c.rollingPageX.shift(),c.rollingPageY.shift(),c.rollingTimestamps.shift()),c.rollingPageX.push(h.pageX),c.rollingPageY.push(h.pageY),c.rollingTimestamps.push(s)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}};Ln.SCROLL_FRICTION=-.005,Ln.HOLD_DELAY=700,Ln.CLEAR_TAP_COUNT_TIME=400,Ge([t1],Ln,"isTouchDevice",1);var r1=Ln,Oc=class extends Ce{onclick(e,t){this._register(Se(e,ft.CLICK,s=>t(new cl(Dr(e),s))))}onmousedown(e,t){this._register(Se(e,ft.MOUSE_DOWN,s=>t(new cl(Dr(e),s))))}onmouseover(e,t){this._register(Se(e,ft.MOUSE_OVER,s=>t(new cl(Dr(e),s))))}onmouseleave(e,t){this._register(Se(e,ft.MOUSE_LEAVE,s=>t(new cl(Dr(e),s))))}onkeydown(e,t){this._register(Se(e,ft.KEY_DOWN,s=>t(new kp(s))))}onkeyup(e,t){this._register(Se(e,ft.KEY_UP,s=>t(new kp(s))))}oninput(e,t){this._register(Se(e,ft.INPUT,t))}onblur(e,t){this._register(Se(e,ft.BLUR,t))}onfocus(e,t){this._register(Se(e,ft.FOCUS,t))}onchange(e,t){this._register(Se(e,ft.CHANGE,t))}ignoreGesture(e){return r1.ignoreTarget(e)}},Mp=11,i1=class extends Oc{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.style.position="absolute",this.domNode.style.width=Mp+"px",this.domNode.style.height=Mp+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Pm),this._register(Dp(this.bgDomNode,ft.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Dp(this.domNode,ft.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new Zw),this._pointerdownScheduleRepeatTimer=this._register(new Mc)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Dr(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}},s1=class Ku{constructor(t,s,o,a,h,c,_){this._forceIntegerValues=t,this._scrollStateBrand=void 0,this._forceIntegerValues&&(s=s|0,o=o|0,a=a|0,h=h|0,c=c|0,_=_|0),this.rawScrollLeft=a,this.rawScrollTop=_,s<0&&(s=0),a+s>o&&(a=o-s),a<0&&(a=0),h<0&&(h=0),_+h>c&&(_=c-h),_<0&&(_=0),this.width=s,this.scrollWidth=o,this.scrollLeft=a,this.height=h,this.scrollHeight=c,this.scrollTop=_}equals(t){return this.rawScrollLeft===t.rawScrollLeft&&this.rawScrollTop===t.rawScrollTop&&this.width===t.width&&this.scrollWidth===t.scrollWidth&&this.scrollLeft===t.scrollLeft&&this.height===t.height&&this.scrollHeight===t.scrollHeight&&this.scrollTop===t.scrollTop}withScrollDimensions(t,s){return new Ku(this._forceIntegerValues,typeof t.width<"u"?t.width:this.width,typeof t.scrollWidth<"u"?t.scrollWidth:this.scrollWidth,s?this.rawScrollLeft:this.scrollLeft,typeof t.height<"u"?t.height:this.height,typeof t.scrollHeight<"u"?t.scrollHeight:this.scrollHeight,s?this.rawScrollTop:this.scrollTop)}withScrollPosition(t){return new Ku(this._forceIntegerValues,this.width,this.scrollWidth,typeof t.scrollLeft<"u"?t.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof t.scrollTop<"u"?t.scrollTop:this.rawScrollTop)}createScrollEvent(t,s){let o=this.width!==t.width,a=this.scrollWidth!==t.scrollWidth,h=this.scrollLeft!==t.scrollLeft,c=this.height!==t.height,_=this.scrollHeight!==t.scrollHeight,g=this.scrollTop!==t.scrollTop;return{inSmoothScrolling:s,oldWidth:t.width,oldScrollWidth:t.scrollWidth,oldScrollLeft:t.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:t.height,oldScrollHeight:t.scrollHeight,oldScrollTop:t.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:o,scrollWidthChanged:a,scrollLeftChanged:h,heightChanged:c,scrollHeightChanged:_,scrollTopChanged:g}}},n1=class extends Ce{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new J),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new s1(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var s;let o=this._state.withScrollDimensions(e,t);this._setState(o,!!this._smoothScrolling),(s=this._smoothScrolling)==null||s.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let s=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===s.scrollLeft&&this._smoothScrolling.to.scrollTop===s.scrollTop)return;let o;t?o=new Op(this._smoothScrolling.from,s,this._smoothScrolling.startTime,this._smoothScrolling.duration):o=this._smoothScrolling.combine(this._state,s,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=o}else{let s=this._state.withScrollPosition(e);this._smoothScrolling=Op.start(this._state,s,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let s=this._state;s.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(s,t)))}},Bp=class{constructor(e,t,s){this.scrollLeft=e,this.scrollTop=t,this.isDone=s}};function eu(e,t){let s=t-e;return function(o){return e+s*a1(o)}}function o1(e,t,s){return function(o){return o<s?e(o/s):t((o-s)/(1-s))}}var Op=class Vu{constructor(t,s,o,a){this.from=t,this.to=s,this.duration=a,this.startTime=o,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(t,s,o){if(Math.abs(t-s)>2.5*o){let a,h;return t<s?(a=t+.75*o,h=s-.75*o):(a=t-.75*o,h=s+.75*o),o1(eu(t,a),eu(h,s),.33)}return eu(t,s)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(t){this.to=t.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(t){let s=(t-this.startTime)/this.duration;if(s<1){let o=this.scrollLeft(s),a=this.scrollTop(s);return new Bp(o,a,!1)}return new Bp(this.to.scrollLeft,this.to.scrollTop,!0)}combine(t,s,o){return Vu.start(t,s,o)}static start(t,s,o){o=o+10;let a=Date.now()-10;return new Vu(t,s,a,o)}};function l1(e){return Math.pow(e,3)}function a1(e){return 1-l1(1-e)}var h1=class extends Ce{constructor(e,t,s){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=s,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Mc)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)==null||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)==null||t.setClassName(this._invisibleClassName+(e?" fade":"")))}},u1=140,Lm=class extends Oc{constructor(e,t){super(),this._document=t,this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new h1(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Pm),this._shouldRender=!0,this.domNode=On(this._document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(Se(this.domNode.domNode,ft.POINTER_DOWN,s=>this._domNodePointerDown(s)))}_createArrow(e){let t=this._register(new i1(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,s,o){this.slider=On(this._document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof s=="number"&&this.slider.setWidth(s),typeof o=="number"&&this.slider.setHeight(o),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(Se(this.slider.domNode,ft.POINTER_DOWN,a=>{a.button===0&&(a.preventDefault(),this._sliderPointerDown(a))})),this.onclick(this.slider.domNode,a=>{a.leftButton&&a.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,s=t+this._scrollbarState.getSliderPosition(),o=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),a=this._sliderPointerPosition(e);s<=a&&a<=o?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,s;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,s=e.offsetY;else{let a=Jw(this.domNode.domNode);t=e.pageX-a.left,s=e.pageY-a.top}let o=this._pointerDownRelativePosition(t,s);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(o):this._scrollbarState.getDesiredScrollPositionFromOffset(o)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._sliderPointerPosition(e),s=this._sliderOrthogonalPointerPosition(e),o=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,a=>{let h=this._sliderOrthogonalPointerPosition(a),c=Math.abs(h-s);if(km&&c>u1){this._setDesiredScrollPositionNow(o.getScrollPosition());return}let _=this._sliderPointerPosition(a)-t;this._setDesiredScrollPositionNow(o.getDesiredScrollPositionFromDelta(_))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}},Rm=class qu{constructor(t,s,o,a,h,c){this._scrollbarSize=Math.round(s),this._oppositeScrollbarSize=Math.round(o),this._arrowSize=Math.round(t),this._visibleSize=a,this._scrollSize=h,this._scrollPosition=c,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new qu(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(t){let s=Math.round(t);return this._visibleSize!==s?(this._visibleSize=s,this._refreshComputedValues(),!0):!1}setScrollSize(t){let s=Math.round(t);return this._scrollSize!==s?(this._scrollSize=s,this._refreshComputedValues(),!0):!1}setScrollPosition(t){let s=Math.round(t);return this._scrollPosition!==s?(this._scrollPosition=s,this._refreshComputedValues(),!0):!1}setScrollbarSize(t){this._scrollbarSize=Math.round(t)}setOppositeScrollbarSize(t){this._oppositeScrollbarSize=Math.round(t)}static _computeValues(t,s,o,a,h){let c=Math.max(0,o-t),_=Math.max(0,c-2*s),g=a>0&&a>o;if(!g)return{computedAvailableSize:Math.round(c),computedIsNeeded:g,computedSliderSize:Math.round(_),computedSliderRatio:0,computedSliderPosition:0};let p=Math.round(Math.max(20,Math.floor(o*_/a))),y=(_-p)/(a-o),v=h*y;return{computedAvailableSize:Math.round(c),computedIsNeeded:g,computedSliderSize:Math.round(p),computedSliderRatio:y,computedSliderPosition:Math.round(v)}}_refreshComputedValues(){let t=qu._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=t.computedAvailableSize,this._computedIsNeeded=t.computedIsNeeded,this._computedSliderSize=t.computedSliderSize,this._computedSliderRatio=t.computedSliderRatio,this._computedSliderPosition=t.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(t){if(!this._computedIsNeeded)return 0;let s=t-this._arrowSize-this._computedSliderSize/2;return Math.round(s/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(t){if(!this._computedIsNeeded)return 0;let s=t-this._arrowSize,o=this._scrollPosition;return s<this._computedSliderPosition?o-=this._visibleSize:o+=this._visibleSize,o}getDesiredScrollPositionFromDelta(t){if(!this._computedIsNeeded)return 0;let s=this._computedSliderPosition+t;return Math.round(s/this._computedSliderRatio)}},c1=class extends Lm{constructor(e,t,s,o){let a=e.getScrollDimensions(),h=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:s,scrollbarState:new Rm(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,a.width,a.scrollWidth,h.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage},o),t.horizontalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}},d1=class extends Lm{constructor(e,t,s,o){let a=e.getScrollDimensions(),h=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:s,scrollbarState:new Rm(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,a.height,a.scrollHeight,h.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage},o),t.verticalHasArrows)throw new Error("horizontalHasArrows is not supported in xterm.js");this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}},f1=500,Ap=50,_1=class{constructor(e,t,s){this.timestamp=e,this.deltaX=t,this.deltaY=s,this.score=0}},Xu=class{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,s=1,o=this._rear;do{let a=o===this._front?e:Math.pow(2,-s);if(e-=a,t+=this._memory[o].score*a,o===this._front)break;o=(this._capacity+o-1)%this._capacity,s++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(Dc){let t=Dr(e.browserEvent),s=Lw(t);this.accept(Date.now(),e.deltaX*s,e.deltaY*s)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,s){let o=null,a=new _1(e,t,s);this._front===-1&&this._rear===-1?(this._memory[0]=a,this._front=0,this._rear=0):(o=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=a),a.score=this._computeScore(a,o)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let s=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(s+=.25),t){let o=Math.abs(e.deltaX),a=Math.abs(e.deltaY),h=Math.abs(t.deltaX),c=Math.abs(t.deltaY),_=Math.max(Math.min(o,h),1),g=Math.max(Math.min(a,c),1),p=Math.max(o,h),y=Math.max(a,c);p%_===0&&y%g===0&&(s-=.5)}return Math.min(Math.max(s,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};Xu.INSTANCE=new Xu;var p1=Xu,g1=class extends Oc{constructor(e,t,s){super(),this._onScroll=this._register(new J),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new J),this.onWillScroll=this._onWillScroll.event,this._document=e.ownerDocument,this._options=v1(t),this._scrollable=s,this._register(this._scrollable.onScroll(a=>{this._onWillScroll.fire(a),this._onDidScroll(a),this._onScroll.fire(a)}));let o={onMouseWheel:a=>this._onMouseWheel(a),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new d1(this._scrollable,this._options,o,this._document)),this._horizontalScrollbar=this._register(new c1(this._scrollable,this._options,o,this._document)),this._domNode=this._document.createElement("div"),this._domNode.className="xterm-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=On(this._document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=On(this._document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=On(this._document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,a=>this._onMouseOver(a)),this.onmouseleave(this._listenOnDomNode,a=>this._onMouseLeave(a)),this._hideTimeout=this._register(new Mc),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}get options(){return this._options}dispose(){this._mouseWheelToDispose=Fi(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Mr&&(this._options.className+=" mac"),this._domNode.className="xterm-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Ep(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Fi(this._mouseWheelToDispose),e)){let t=s=>{this._onMouseWheel(new Ep(s))};this._mouseWheelToDispose.push(Se(this._listenOnDomNode,ft.MOUSE_WHEEL,t,{passive:!1}))}}_onMouseWheel(e){var t;if((t=e.browserEvent)!=null&&t.defaultPrevented)return;let s=p1.INSTANCE;s.acceptStandardWheelEvent(e);let o=!1;if(e.deltaY||e.deltaX){let h=e.deltaY*this._options.mouseWheelScrollSensitivity,c=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&c+h===0?c=h=0:Math.abs(h)>=Math.abs(c)?c=0:h=0),this._options.flipAxes&&([h,c]=[c,h]);let _=!Mr&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||_)&&!c&&(c=h,h=0),e.browserEvent&&e.browserEvent.altKey&&(c=c*this._options.fastScrollSensitivity,h=h*this._options.fastScrollSensitivity);let g=this._scrollable.getFutureScrollPosition(),p={};if(h){let y=Ap*h,v=g.scrollTop-(y<0?Math.floor(y):Math.ceil(y));this._verticalScrollbar.writeScrollPosition(p,v)}if(c){let y=Ap*c,v=g.scrollLeft-(y<0?Math.floor(y):Math.ceil(y));this._horizontalScrollbar.writeScrollPosition(p,v)}p=this._scrollable.validateScrollPosition(p),(g.scrollLeft!==p.scrollLeft||g.scrollTop!==p.scrollTop)&&(this._options.mouseWheelSmoothScroll&&s.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(p):this._scrollable.setScrollPositionNow(p),o=!0)}let a=o;!a&&this._options.alwaysConsumeMouseWheel&&(a=!0),!a&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(a=!0),a&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,s=e.scrollLeft>0,o=s?" left":"",a=t?" top":"",h=s||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${o}`),this._topShadowDomNode.setClassName(`shadow${a}`),this._topLeftShadowDomNode.setClassName(`shadow${h}${a}${o}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),f1)}},m1=class extends g1{constructor(e,t,s){super(e,t,s)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}};function v1(e){let t={lazyRender:typeof e.lazyRender<"u"?e.lazyRender:!1,className:typeof e.className<"u"?e.className:"",useShadows:typeof e.useShadows<"u"?e.useShadows:!0,handleMouseWheel:typeof e.handleMouseWheel<"u"?e.handleMouseWheel:!0,flipAxes:typeof e.flipAxes<"u"?e.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof e.consumeMouseWheelIfScrollbarIsNeeded<"u"?e.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof e.alwaysConsumeMouseWheel<"u"?e.alwaysConsumeMouseWheel:!1,scrollYToX:typeof e.scrollYToX<"u"?e.scrollYToX:!1,mouseWheelScrollSensitivity:typeof e.mouseWheelScrollSensitivity<"u"?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof e.fastScrollSensitivity<"u"?e.fastScrollSensitivity:5,scrollPredominantAxis:typeof e.scrollPredominantAxis<"u"?e.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof e.mouseWheelSmoothScroll<"u"?e.mouseWheelSmoothScroll:!0,arrowSize:typeof e.arrowSize<"u"?e.arrowSize:11,listenOnDomNode:typeof e.listenOnDomNode<"u"?e.listenOnDomNode:null,horizontal:typeof e.horizontal<"u"?e.horizontal:1,horizontalScrollbarSize:typeof e.horizontalScrollbarSize<"u"?e.horizontalScrollbarSize:10,horizontalSliderSize:typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:0,horizontalHasArrows:typeof e.horizontalHasArrows<"u"?e.horizontalHasArrows:!1,vertical:typeof e.vertical<"u"?e.vertical:1,verticalScrollbarSize:typeof e.verticalScrollbarSize<"u"?e.verticalScrollbarSize:10,verticalHasArrows:typeof e.verticalHasArrows<"u"?e.verticalHasArrows:!1,verticalSliderSize:typeof e.verticalSliderSize<"u"?e.verticalSliderSize:0,scrollByPage:typeof e.scrollByPage<"u"?e.scrollByPage:!1};return t.horizontalSliderSize=typeof e.horizontalSliderSize<"u"?e.horizontalSliderSize:t.horizontalScrollbarSize,t.verticalSliderSize=typeof e.verticalSliderSize<"u"?e.verticalSliderSize:t.verticalScrollbarSize,Mr&&(t.className+=" mac"),t}var Yu=class extends Ce{constructor(e,t,s,o,a,h,c,_){super(),this._bufferService=s,this._optionsService=c,this._renderService=_,this._onRequestScrollLines=this._register(new J),this.onRequestScrollLines=this._onRequestScrollLines.event,this._isSyncing=!1,this._isHandlingScroll=!1,this._suppressOnScrollHandler=!1;let g=this._register(new n1({forceIntegerValues:!1,smoothScrollDuration:this._optionsService.rawOptions.smoothScrollDuration,scheduleAtNextAnimationFrame:p=>Bc(o.window,p)}));this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration",()=>{g.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration)})),this._scrollableElement=this._register(new m1(t,{vertical:1,horizontal:2,useShadows:!1,mouseWheelSmoothScroll:!0,...this._getChangeOptions()},g)),this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity","fastScrollSensitivity","overviewRuler"],()=>this._scrollableElement.updateOptions(this._getChangeOptions()))),this._register(a.onProtocolChange(p=>{this._scrollableElement.updateOptions({handleMouseWheel:!(p&16)})})),this._scrollableElement.setScrollDimensions({height:0,scrollHeight:0}),this._register(wt.runAndSubscribe(h.onChangeColors,()=>{this._scrollableElement.getDomNode().style.backgroundColor=h.colors.background.css})),e.appendChild(this._scrollableElement.getDomNode()),this._register(qe(()=>this._scrollableElement.getDomNode().remove())),this._styleElement=o.mainDocument.createElement("style"),t.appendChild(this._styleElement),this._register(qe(()=>this._styleElement.remove())),this._register(wt.runAndSubscribe(h.onChangeColors,()=>{this._styleElement.textContent=[".xterm .xterm-scrollable-element > .scrollbar > .slider {",`  background: ${h.colors.scrollbarSliderBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {",`  background: ${h.colors.scrollbarSliderHoverBackground.css};`,"}",".xterm .xterm-scrollable-element > .scrollbar > .slider.active {",`  background: ${h.colors.scrollbarSliderActiveBackground.css};`,"}"].join(`
`)})),this._register(this._bufferService.onResize(()=>this._queueSync())),this._register(this._bufferService.buffers.onBufferActivate(()=>this._queueSync())),this._register(this._bufferService.onScroll(()=>this._sync())),this._register(this._scrollableElement.onScroll(p=>this._handleScroll(p)))}scrollLines(e){let t=this._scrollableElement.getScrollPosition();this._scrollableElement.setScrollPosition({reuseAnimation:!0,scrollTop:t.scrollTop+e*this._renderService.dimensions.css.cell.height})}scrollToLine(e,t){t&&(this._latestYDisp=e),this._scrollableElement.setScrollPosition({reuseAnimation:!t,scrollTop:e*this._renderService.dimensions.css.cell.height})}_getChangeOptions(){var e;return{mouseWheelScrollSensitivity:this._optionsService.rawOptions.scrollSensitivity,fastScrollSensitivity:this._optionsService.rawOptions.fastScrollSensitivity,verticalScrollbarSize:((e=this._optionsService.rawOptions.overviewRuler)==null?void 0:e.width)||14}}_queueSync(e){e!==void 0&&(this._latestYDisp=e),this._queuedAnimationFrame===void 0&&(this._queuedAnimationFrame=this._renderService.addRefreshCallback(()=>{this._queuedAnimationFrame=void 0,this._sync(this._latestYDisp)}))}_sync(e=this._bufferService.buffer.ydisp){!this._renderService||this._isSyncing||(this._isSyncing=!0,this._suppressOnScrollHandler=!0,this._scrollableElement.setScrollDimensions({height:this._renderService.dimensions.css.canvas.height,scrollHeight:this._renderService.dimensions.css.cell.height*this._bufferService.buffer.lines.length}),this._suppressOnScrollHandler=!1,e!==this._latestYDisp&&this._scrollableElement.setScrollPosition({scrollTop:e*this._renderService.dimensions.css.cell.height}),this._isSyncing=!1)}_handleScroll(e){if(!this._renderService||this._isHandlingScroll||this._suppressOnScrollHandler)return;this._isHandlingScroll=!0;let t=Math.round(e.scrollTop/this._renderService.dimensions.css.cell.height),s=t-this._bufferService.buffer.ydisp;s!==0&&(this._latestYDisp=t,this._onRequestScrollLines.fire(s)),this._isHandlingScroll=!1}};Yu=Ge([le(2,Mt),le(3,$r),le(4,cm),le(5,Ds),le(6,Ut),le(7,Kr)],Yu);var Gu=class extends Ce{constructor(e,t,s,o,a){super(),this._screenElement=e,this._bufferService=t,this._coreBrowserService=s,this._decorationService=o,this._renderService=a,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=e.ownerDocument.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this._register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this._register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this._register(this._decorationService.onDecorationRemoved(h=>this._removeDecoration(h))),this._register(qe(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){var t;let s=this._coreBrowserService.mainDocument.createElement("div");s.classList.add("xterm-decoration"),s.classList.toggle("xterm-decoration-top-layer",((t=e==null?void 0:e.options)==null?void 0:t.layer)==="top"),s.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,s.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,s.style.top=`${(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height}px`,s.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let o=e.options.x??0;return o&&o>this._bufferService.cols&&(s.style.display="none"),this._refreshXPosition(e,s),s}_refreshStyle(e){let t=e.marker.line-this._bufferService.buffers.active.ydisp,s=this._decorationElements.get(e);s||(s=this._createElement(e),e.element=s,this._decorationElements.set(e,s),this._container.appendChild(s),e.onDispose(()=>{this._decorationElements.delete(e),s.remove()})),s.style.display=this._altBufferIsActive?"none":"block",this._altBufferIsActive||(s.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,s.style.height=`${(e.options.height||1)*this._renderService.dimensions.css.cell.height}px`,s.style.top=`${t*this._renderService.dimensions.css.cell.height}px`,s.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`),e.onRenderEmitter.fire(s)}_refreshXPosition(e,t=e.element){if(!t)return;let s=e.options.x??0;(e.options.anchor||"left")==="right"?t.style.right=s?`${s*this._renderService.dimensions.css.cell.width}px`:"":t.style.left=s?`${s*this._renderService.dimensions.css.cell.width}px`:""}_removeDecoration(e){var t;(t=this._decorationElements.get(e))==null||t.remove(),this._decorationElements.delete(e),e.dispose()}};Gu=Ge([le(1,Mt),le(2,$r),le(3,Vn),le(4,Kr)],Gu);var y1=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(let t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position)){this._addLineToZone(t,e.marker.line);return}}if(this._zonePoolIndex<this._zonePool.length){this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,this._zones.push(this._zonePool[this._zonePoolIndex++]);return}this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,s){return t>=e.startBufferLine-this._linePadding[s||"full"]&&t<=e.endBufferLine+this._linePadding[s||"full"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}},Cr={full:0,left:0,center:0,right:0},fi={full:0,left:0,center:0,right:0},Cn={full:0,left:0,center:0,right:0},Tl=class extends Ce{constructor(e,t,s,o,a,h,c,_){var g;super(),this._viewportElement=e,this._screenElement=t,this._bufferService=s,this._decorationService=o,this._renderService=a,this._optionsService=h,this._themeService=c,this._coreBrowserService=_,this._colorZoneStore=new y1,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(g=this._viewportElement.parentElement)==null||g.insertBefore(this._canvas,this._viewportElement),this._register(qe(()=>{var y;return(y=this._canvas)==null?void 0:y.remove()}));let p=this._canvas.getContext("2d");if(p)this._ctx=p;else throw new Error("Ctx cannot be null");this._register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this._register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0))),this._register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this._register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this._register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})),this._register(this._renderService.onRender(()=>{(!this._containerHeight||this._containerHeight!==this._screenElement.clientHeight)&&(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this._register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._register(this._optionsService.onSpecificOptionChange("overviewRuler",()=>this._queueRefresh(!0))),this._register(this._themeService.onChangeColors(()=>this._queueRefresh())),this._queueRefresh(!0)}get _width(){var e;return((e=this._optionsService.options.overviewRuler)==null?void 0:e.width)||0}_refreshDrawConstants(){let e=Math.floor((this._canvas.width-1)/3),t=Math.ceil((this._canvas.width-1)/3);fi.full=this._canvas.width,fi.left=e,fi.center=t,fi.right=e,this._refreshDrawHeightConstants(),Cn.full=1,Cn.left=1,Cn.center=1+fi.left,Cn.right=1+fi.left+fi.center}_refreshDrawHeightConstants(){Cr.full=Math.round(2*this._coreBrowserService.dpr);let e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowserService.dpr);Cr.left=t,Cr.center=t,Cr.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Cr.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Cr.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Cr.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*Cr.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let t of this._decorationService.decorations)this._colorZoneStore.addDecoration(t);this._ctx.lineWidth=1,this._renderRulerOutline();let e=this._colorZoneStore.zones;for(let t of e)t.position!=="full"&&this._renderColorZone(t);for(let t of e)t.position==="full"&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderRulerOutline(){this._ctx.fillStyle=this._themeService.colors.overviewRulerBorder.css,this._ctx.fillRect(0,0,1,this._canvas.height),this._optionsService.rawOptions.overviewRuler.showTopBorder&&this._ctx.fillRect(1,0,this._canvas.width-1,1),this._optionsService.rawOptions.overviewRuler.showBottomBorder&&this._ctx.fillRect(1,this._canvas.height-1,this._canvas.width-1,this._canvas.height)}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(Cn[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-Cr[e.position||"full"]/2),fi[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+Cr[e.position||"full"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};Tl=Ge([le(2,Mt),le(3,Vn),le(4,Kr),le(5,Ut),le(6,Ds),le(7,$r)],Tl);var H;(e=>(e.NUL="\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="\x07",e.BS="\b",e.HT="	",e.LF=`
`,e.VT="\v",e.FF="\f",e.CR="\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="\x1B",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""))(H||(H={}));var An;(e=>(e.PAD="",e.HOP="",e.BPH="",e.NBH="",e.IND="",e.NEL="",e.SSA="",e.ESA="",e.HTS="",e.HTJ="",e.VTS="",e.PLD="",e.PLU="",e.RI="",e.SS2="",e.SS3="",e.DCS="",e.PU1="",e.PU2="",e.STS="",e.CCH="",e.MW="",e.SPA="",e.EPA="",e.SOS="",e.SGCI="",e.SCI="",e.CSI="",e.ST="",e.OSC="",e.PM="",e.APC=""))(An||(An={}));var Qu;(e=>e.ST=`${H.ESC}\\`)(Qu||(Qu={}));var Zu=class{constructor(e,t,s,o,a,h){this._textarea=e,this._compositionView=t,this._bufferService=s,this._optionsService=o,this._coreService=a,this._renderService=h,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(e.keyCode===229||e.keyCode===16||e.keyCode===17||e.keyCode===18)return!1;this._finalizeComposition(!1)}return e.keyCode===229?(this._handleAnyTextareaChanges(),!1):!0}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){let t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){this._isSendingComposition=!1;let s;t.start+=this._dataAlreadySent.length,this._isComposing?s=this._textarea.value.substring(t.start,this._compositionPosition.start):s=this._textarea.value.substring(t.start),s.length>0&&this._coreService.triggerDataEvent(s,!0)}},0)}else{this._isSendingComposition=!1;let t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){let e=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let t=this._textarea.value,s=t.replace(e,"");this._dataAlreadySent=s,t.length>e.length?this._coreService.triggerDataEvent(s,!0):t.length<e.length?this._coreService.triggerDataEvent(`${H.DEL}`,!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),s=this._renderService.dimensions.css.cell.height,o=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,a=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=a+"px",this._compositionView.style.top=o+"px",this._compositionView.style.height=s+"px",this._compositionView.style.lineHeight=s+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let h=this._compositionView.getBoundingClientRect();this._textarea.style.left=a+"px",this._textarea.style.top=o+"px",this._textarea.style.width=Math.max(h.width,1)+"px",this._textarea.style.height=Math.max(h.height,1)+"px",this._textarea.style.lineHeight=h.height+"px"}e||setTimeout(()=>this.updateCompositionElements(!0),0)}}};Zu=Ge([le(2,Mt),le(3,Ut),le(4,Rs),le(5,Kr)],Zu);var Dm={};GS(Dm,{getSafariVersion:()=>w1,isChromeOS:()=>Om,isFirefox:()=>Tm,isIpad:()=>C1,isIphone:()=>b1,isLegacyEdge:()=>S1,isLinux:()=>Ac,isMac:()=>Ml,isNode:()=>Fl,isSafari:()=>Mm,isWindows:()=>Bm});var Fl=typeof process<"u"&&"title"in process,qn=Fl?"node":navigator.userAgent,Xn=Fl?"node":navigator.platform,Tm=qn.includes("Firefox"),S1=qn.includes("Edge"),Mm=/^((?!chrome|android).)*safari/i.test(qn);function w1(){if(!Mm)return 0;let e=qn.match(/Version\/(\d+)/);return e===null||e.length<2?0:parseInt(e[1])}var Ml=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(Xn),C1=Xn==="iPad",b1=Xn==="iPhone",Bm=["Windows","Win16","Win32","WinCE"].includes(Xn),Ac=Xn.indexOf("Linux")>=0,Om=/\bCrOS\b/.test(qn),Nn=257,_t=0,pt=0,gt=0,Ye=0,Np={css:"#00000000",rgba:0},tt;(e=>{function t(a,h,c,_){return _!==void 0?`#${Mi(a)}${Mi(h)}${Mi(c)}${Mi(_)}`:`#${Mi(a)}${Mi(h)}${Mi(c)}`}e.toCss=t;function s(a,h,c,_=255){return(a<<24|h<<16|c<<8|_)>>>0}e.toRgba=s;function o(a,h,c,_){return{css:e.toCss(a,h,c,_),rgba:e.toRgba(a,h,c,_)}}e.toColor=o})(tt||(tt={}));var Be;(e=>{function t(g,p){if(Ye=(p.rgba&255)/255,Ye===1)return{css:p.css,rgba:p.rgba};let y=p.rgba>>24&255,v=p.rgba>>16&255,C=p.rgba>>8&255,w=g.rgba>>24&255,A=g.rgba>>16&255,T=g.rgba>>8&255;_t=w+Math.round((y-w)*Ye),pt=A+Math.round((v-A)*Ye),gt=T+Math.round((C-T)*Ye);let M=tt.toCss(_t,pt,gt),X=tt.toRgba(_t,pt,gt);return{css:M,rgba:X}}e.blend=t;function s(g){return(g.rgba&255)===255}e.isOpaque=s;function o(g,p,y){let v=In.ensureContrastRatio(g.rgba,p.rgba,y);if(v)return tt.toColor(v>>24&255,v>>16&255,v>>8&255)}e.ensureContrastRatio=o;function a(g){let p=(g.rgba|255)>>>0;return[_t,pt,gt]=In.toChannels(p),{css:tt.toCss(_t,pt,gt),rgba:p}}e.opaque=a;function h(g,p){return Ye=Math.round(p*255),[_t,pt,gt]=In.toChannels(g.rgba),{css:tt.toCss(_t,pt,gt,Ye),rgba:tt.toRgba(_t,pt,gt,Ye)}}e.opacity=h;function c(g,p){return Ye=g.rgba&255,h(g,Ye*p/255)}e.multiplyOpacity=c;function _(g){return[g.rgba>>24&255,g.rgba>>16&255,g.rgba>>8&255]}e.toColorRGB=_})(Be||(Be={}));var Fe;(e=>{let t,s;try{let a=document.createElement("canvas");a.width=1,a.height=1;let h=a.getContext("2d",{willReadFrequently:!0});h&&(t=h,t.globalCompositeOperation="copy",s=t.createLinearGradient(0,0,1,1))}catch{}function o(a){if(a.match(/#[\da-f]{3,8}/i))switch(a.length){case 4:return _t=parseInt(a.slice(1,2).repeat(2),16),pt=parseInt(a.slice(2,3).repeat(2),16),gt=parseInt(a.slice(3,4).repeat(2),16),tt.toColor(_t,pt,gt);case 5:return _t=parseInt(a.slice(1,2).repeat(2),16),pt=parseInt(a.slice(2,3).repeat(2),16),gt=parseInt(a.slice(3,4).repeat(2),16),Ye=parseInt(a.slice(4,5).repeat(2),16),tt.toColor(_t,pt,gt,Ye);case 7:return{css:a,rgba:(parseInt(a.slice(1),16)<<8|255)>>>0};case 9:return{css:a,rgba:parseInt(a.slice(1),16)>>>0}}let h=a.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(h)return _t=parseInt(h[1]),pt=parseInt(h[2]),gt=parseInt(h[3]),Ye=Math.round((h[5]===void 0?1:parseFloat(h[5]))*255),tt.toColor(_t,pt,gt,Ye);if(!t||!s)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=s,t.fillStyle=a,typeof t.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[_t,pt,gt,Ye]=t.getImageData(0,0,1,1).data,Ye!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:tt.toRgba(_t,pt,gt,Ye),css:a}}e.toColor=o})(Fe||(Fe={}));var Lt;(e=>{function t(o){return s(o>>16&255,o>>8&255,o&255)}e.relativeLuminance=t;function s(o,a,h){let c=o/255,_=a/255,g=h/255,p=c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4),y=_<=.03928?_/12.92:Math.pow((_+.055)/1.055,2.4),v=g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4);return p*.2126+y*.7152+v*.0722}e.relativeLuminance2=s})(Lt||(Lt={}));var In;(e=>{function t(c,_){if(Ye=(_&255)/255,Ye===1)return _;let g=_>>24&255,p=_>>16&255,y=_>>8&255,v=c>>24&255,C=c>>16&255,w=c>>8&255;return _t=v+Math.round((g-v)*Ye),pt=C+Math.round((p-C)*Ye),gt=w+Math.round((y-w)*Ye),tt.toRgba(_t,pt,gt)}e.blend=t;function s(c,_,g){let p=Lt.relativeLuminance(c>>8),y=Lt.relativeLuminance(_>>8);if(Ur(p,y)<g){if(y<p){let w=o(c,_,g),A=Ur(p,Lt.relativeLuminance(w>>8));if(A<g){let T=a(c,_,g),M=Ur(p,Lt.relativeLuminance(T>>8));return A>M?w:T}return w}let v=a(c,_,g),C=Ur(p,Lt.relativeLuminance(v>>8));if(C<g){let w=o(c,_,g),A=Ur(p,Lt.relativeLuminance(w>>8));return C>A?v:w}return v}}e.ensureContrastRatio=s;function o(c,_,g){let p=c>>24&255,y=c>>16&255,v=c>>8&255,C=_>>24&255,w=_>>16&255,A=_>>8&255,T=Ur(Lt.relativeLuminance2(C,w,A),Lt.relativeLuminance2(p,y,v));for(;T<g&&(C>0||w>0||A>0);)C-=Math.max(0,Math.ceil(C*.1)),w-=Math.max(0,Math.ceil(w*.1)),A-=Math.max(0,Math.ceil(A*.1)),T=Ur(Lt.relativeLuminance2(C,w,A),Lt.relativeLuminance2(p,y,v));return(C<<24|w<<16|A<<8|255)>>>0}e.reduceLuminance=o;function a(c,_,g){let p=c>>24&255,y=c>>16&255,v=c>>8&255,C=_>>24&255,w=_>>16&255,A=_>>8&255,T=Ur(Lt.relativeLuminance2(C,w,A),Lt.relativeLuminance2(p,y,v));for(;T<g&&(C<255||w<255||A<255);)C=Math.min(255,C+Math.ceil((255-C)*.1)),w=Math.min(255,w+Math.ceil((255-w)*.1)),A=Math.min(255,A+Math.ceil((255-A)*.1)),T=Ur(Lt.relativeLuminance2(C,w,A),Lt.relativeLuminance2(p,y,v));return(C<<24|w<<16|A<<8|255)>>>0}e.increaseLuminance=a;function h(c){return[c>>24&255,c>>16&255,c>>8&255,c&255]}e.toChannels=h})(In||(In={}));function Mi(e){let t=e.toString(16);return t.length<2?"0"+t:t}function Ur(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}var k1=class extends Kn{constructor(e,t,s){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=s}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}},Bl=class{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new sr}register(e){let t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(this._characterJoiners.length===0)return[];let t=this._bufferService.buffer.lines.get(e);if(!t||t.length===0)return[];let s=[],o=t.translateToString(!0),a=0,h=0,c=0,_=t.getFg(0),g=t.getBg(0);for(let p=0;p<t.getTrimmedLength();p++)if(t.loadCell(p,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==_||this._workCell.bg!==g){if(p-a>1){let y=this._getJoinedRanges(o,c,h,t,a);for(let v=0;v<y.length;v++)s.push(y[v])}a=p,c=h,_=this._workCell.fg,g=this._workCell.bg}h+=this._workCell.getChars().length||mi.length}if(this._bufferService.cols-a>1){let p=this._getJoinedRanges(o,c,h,t,a);for(let y=0;y<p.length;y++)s.push(p[y])}return s}_getJoinedRanges(e,t,s,o,a){let h=e.substring(t,s),c=[];try{c=this._characterJoiners[0].handler(h)}catch(_){console.error(_)}for(let _=1;_<this._characterJoiners.length;_++)try{let g=this._characterJoiners[_].handler(h);for(let p=0;p<g.length;p++)Bl._mergeRanges(c,g[p])}catch(g){console.error(g)}return this._stringRangesToCellRanges(c,o,a),c}_stringRangesToCellRanges(e,t,s){let o=0,a=!1,h=0,c=e[o];if(c){for(let _=s;_<this._bufferService.cols;_++){let g=t.getWidth(_),p=t.getString(_).length||mi.length;if(g!==0){if(!a&&c[0]<=h&&(c[0]=_,a=!0),c[1]<=h){if(c[1]=_,c=e[++o],!c)break;c[0]<=h?(c[0]=_,a=!0):a=!1}h+=p}}c&&(c[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let s=!1;for(let o=0;o<e.length;o++){let a=e[o];if(s){if(t[1]<=a[0])return e[o-1][1]=t[1],e;if(t[1]<=a[1])return e[o-1][1]=Math.max(t[1],a[1]),e.splice(o,1),e;e.splice(o,1),o--}else{if(t[1]<=a[0])return e.splice(o,0,t),e;if(t[1]<=a[1])return a[0]=Math.min(t[0],a[0]),e;t[0]<a[1]&&(a[0]=Math.min(t[0],a[0]),s=!0);continue}}return s?e[e.length-1][1]=t[1]:e.push(t),e}};Bl=Ge([le(0,Mt)],Bl);function x1(e){return 57508<=e&&e<=57558}function E1(e){return 9472<=e&&e<=9631}function P1(e){return x1(e)||E1(e)}function L1(){return{css:{canvas:dl(),cell:dl()},device:{canvas:dl(),cell:dl(),char:{width:0,height:0,left:0,top:0}}}}function dl(){return{width:0,height:0}}var Ju=class{constructor(e,t,s,o,a,h,c){this._document=e,this._characterJoinerService=t,this._optionsService=s,this._coreBrowserService=o,this._coreService=a,this._decorationService=h,this._themeService=c,this._workCell=new sr,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,s){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=s}createRow(e,t,s,o,a,h,c,_,g,p,y){let v=[],C=this._characterJoinerService.getJoinedCharacters(t),w=this._themeService.colors,A=e.getNoBgTrimmedLength();s&&A<h+1&&(A=h+1);let T,M=0,X="",ie=0,se=0,W=0,G=!1,ee=0,fe=!1,we=0,pe=[],xe=p!==-1&&y!==-1;for(let Le=0;Le<A;Le++){e.loadCell(Le,this._workCell);let I=this._workCell.getWidth();if(I===0)continue;let P=!1,B=Le,E=this._workCell;if(C.length>0&&Le===C[0][0]){P=!0;let D=C.shift();E=new k1(this._workCell,e.translateToString(!0,D[0],D[1]),D[1]-D[0]),B=D[1]-1,I=E.getWidth()}let z=this._isCellInSelection(Le,t),U=s&&Le===h,N=xe&&Le>=p&&Le<=y,q=!1;this._decorationService.forEachDecorationAtCell(Le,t,void 0,D=>{q=!0});let $=E.getChars()||mi;if($===" "&&(E.isUnderline()||E.isOverline())&&($=""),we=I*_-g.get($,E.isBold(),E.isItalic()),!T)T=this._document.createElement("span");else if(M&&(z&&fe||!z&&!fe&&E.bg===ie)&&(z&&fe&&w.selectionForeground||E.fg===se)&&E.extended.ext===W&&N===G&&we===ee&&!U&&!P&&!q){E.isInvisible()?X+=mi:X+=$,M++;continue}else M&&(T.textContent=X),T=this._document.createElement("span"),M=0,X="";if(ie=E.bg,se=E.fg,W=E.extended.ext,G=N,ee=we,fe=z,P&&h>=Le&&h<=B&&(h=Le),!this._coreService.isCursorHidden&&U&&this._coreService.isCursorInitialized){if(pe.push("xterm-cursor"),this._coreBrowserService.isFocused)c&&pe.push("xterm-cursor-blink"),pe.push(o==="bar"?"xterm-cursor-bar":o==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(a)switch(a){case"outline":pe.push("xterm-cursor-outline");break;case"block":pe.push("xterm-cursor-block");break;case"bar":pe.push("xterm-cursor-bar");break;case"underline":pe.push("xterm-cursor-underline");break}}if(E.isBold()&&pe.push("xterm-bold"),E.isItalic()&&pe.push("xterm-italic"),E.isDim()&&pe.push("xterm-dim"),E.isInvisible()?X=mi:X=E.getChars()||mi,E.isUnderline()&&(pe.push(`xterm-underline-${E.extended.underlineStyle}`),X===" "&&(X=""),!E.isUnderlineColorDefault()))if(E.isUnderlineColorRGB())T.style.textDecorationColor=`rgb(${Kn.toColorRGB(E.getUnderlineColor()).join(",")})`;else{let D=E.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&E.isBold()&&D<8&&(D+=8),T.style.textDecorationColor=w.ansi[D].css}E.isOverline()&&(pe.push("xterm-overline"),X===" "&&(X="")),E.isStrikethrough()&&pe.push("xterm-strikethrough"),N&&(T.style.textDecoration="underline");let k=E.getFgColor(),F=E.getFgColorMode(),j=E.getBgColor(),te=E.getBgColorMode(),Q=!!E.isInverse();if(Q){let D=k;k=j,j=D;let ae=F;F=te,te=ae}let re,oe,ue=!1;this._decorationService.forEachDecorationAtCell(Le,t,void 0,D=>{D.options.layer!=="top"&&ue||(D.backgroundColorRGB&&(te=50331648,j=D.backgroundColorRGB.rgba>>8&16777215,re=D.backgroundColorRGB),D.foregroundColorRGB&&(F=50331648,k=D.foregroundColorRGB.rgba>>8&16777215,oe=D.foregroundColorRGB),ue=D.options.layer==="top")}),!ue&&z&&(re=this._coreBrowserService.isFocused?w.selectionBackgroundOpaque:w.selectionInactiveBackgroundOpaque,j=re.rgba>>8&16777215,te=50331648,ue=!0,w.selectionForeground&&(F=50331648,k=w.selectionForeground.rgba>>8&16777215,oe=w.selectionForeground)),ue&&pe.push("xterm-decoration-top");let ve;switch(te){case 16777216:case 33554432:ve=w.ansi[j],pe.push(`xterm-bg-${j}`);break;case 50331648:ve=tt.toColor(j>>16,j>>8&255,j&255),this._addStyle(T,`background-color:#${Ip((j>>>0).toString(16),"0",6)}`);break;case 0:default:Q?(ve=w.foreground,pe.push(`xterm-bg-${Nn}`)):ve=w.background}switch(re||E.isDim()&&(re=Be.multiplyOpacity(ve,.5)),F){case 16777216:case 33554432:E.isBold()&&k<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(k+=8),this._applyMinimumContrast(T,ve,w.ansi[k],E,re,void 0)||pe.push(`xterm-fg-${k}`);break;case 50331648:let D=tt.toColor(k>>16&255,k>>8&255,k&255);this._applyMinimumContrast(T,ve,D,E,re,oe)||this._addStyle(T,`color:#${Ip(k.toString(16),"0",6)}`);break;case 0:default:this._applyMinimumContrast(T,ve,w.foreground,E,re,oe)||Q&&pe.push(`xterm-fg-${Nn}`)}pe.length&&(T.className=pe.join(" "),pe.length=0),!U&&!P&&!q?M++:T.textContent=X,we!==this.defaultSpacing&&(T.style.letterSpacing=`${we}px`),v.push(T),Le=B}return T&&M&&(T.textContent=X),v}_applyMinimumContrast(e,t,s,o,a,h){if(this._optionsService.rawOptions.minimumContrastRatio===1||P1(o.getCode()))return!1;let c=this._getContrastCache(o),_;if(!a&&!h&&(_=c.getColor(t.rgba,s.rgba)),_===void 0){let g=this._optionsService.rawOptions.minimumContrastRatio/(o.isDim()?2:1);_=Be.ensureContrastRatio(a||t,h||s,g),c.setColor((a||t).rgba,(h||s).rgba,_??null)}return _?(this._addStyle(e,`color:${_.css}`),!0):!1}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute("style",`${e.getAttribute("style")||""}${t};`)}_isCellInSelection(e,t){let s=this._selectionStart,o=this._selectionEnd;return!s||!o?!1:this._columnSelectMode?s[0]<=o[0]?e>=s[0]&&t>=s[1]&&e<o[0]&&t<=o[1]:e<s[0]&&t>=s[1]&&e>=o[0]&&t<=o[1]:t>s[1]&&t<o[1]||s[1]===o[1]&&t===s[1]&&e>=s[0]&&e<o[0]||s[1]<o[1]&&t===o[1]&&e<o[0]||s[1]<o[1]&&t===s[1]&&e>=s[0]}};Ju=Ge([le(1,_m),le(2,Ut),le(3,$r),le(4,Rs),le(5,Vn),le(6,Ds)],Ju);function Ip(e,t,s){for(;e.length<s;)e=t+e;return e}var R1=class{constructor(e,t){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let s=e.createElement("span");s.classList.add("xterm-char-measure-element");let o=e.createElement("span");o.classList.add("xterm-char-measure-element"),o.style.fontWeight="bold";let a=e.createElement("span");a.classList.add("xterm-char-measure-element"),a.style.fontStyle="italic";let h=e.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold",h.style.fontStyle="italic",this._measureElements=[s,o,a,h],this._container.appendChild(s),this._container.appendChild(o),this._container.appendChild(a),this._container.appendChild(h),t.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,s,o){e===this._font&&t===this._fontSize&&s===this._weight&&o===this._weightBold||(this._font=e,this._fontSize=t,this._weight=s,this._weightBold=o,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${s}`,this._measureElements[1].style.fontWeight=`${o}`,this._measureElements[2].style.fontWeight=`${s}`,this._measureElements[3].style.fontWeight=`${o}`,this.clear())}get(e,t,s){let o=0;if(!t&&!s&&e.length===1&&(o=e.charCodeAt(0))<256){if(this._flat[o]!==-9999)return this._flat[o];let c=this._measure(e,0);return c>0&&(this._flat[o]=c),c}let a=e;t&&(a+="B"),s&&(a+="I");let h=this._holey.get(a);if(h===void 0){let c=0;t&&(c|=1),s&&(c|=2),h=this._measure(e,c),h>0&&this._holey.set(a,h)}return h}_measure(e,t){let s=this._measureElements[t];return s.textContent=e.repeat(32),s.offsetWidth/32}},D1=class{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,t,s,o=!1){if(this.selectionStart=t,this.selectionEnd=s,!t||!s||t[0]===s[0]&&t[1]===s[1]){this.clear();return}let a=e.buffers.active.ydisp,h=t[1]-a,c=s[1]-a,_=Math.max(h,0),g=Math.min(c,e.rows-1);if(_>=e.rows||g<0){this.clear();return}this.hasSelection=!0,this.columnSelectMode=o,this.viewportStartRow=h,this.viewportEndRow=c,this.viewportCappedStartRow=_,this.viewportCappedEndRow=g,this.startCol=t[0],this.endCol=s[0]}isCellSelected(e,t,s){return this.hasSelection?(s-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&s>=this.viewportCappedStartRow&&t<this.endCol&&s<=this.viewportCappedEndRow:t<this.startCol&&s>=this.viewportCappedStartRow&&t>=this.endCol&&s<=this.viewportCappedEndRow:s>this.viewportStartRow&&s<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&s===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&s===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&s===this.viewportStartRow&&t>=this.startCol):!1}};function T1(){return new D1}var tu="xterm-dom-renderer-owner-",tr="xterm-rows",fl="xterm-fg-",zp="xterm-bg-",bn="xterm-focus",_l="xterm-selection",M1=1,ec=class extends Ce{constructor(e,t,s,o,a,h,c,_,g,p,y,v,C,w){super(),this._terminal=e,this._document=t,this._element=s,this._screenElement=o,this._viewportElement=a,this._helperContainer=h,this._linkifier2=c,this._charSizeService=g,this._optionsService=p,this._bufferService=y,this._coreService=v,this._coreBrowserService=C,this._themeService=w,this._terminalClass=M1++,this._rowElements=[],this._selectionRenderModel=T1(),this.onRequestRedraw=this._register(new J).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(tr),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(_l),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=L1(),this._updateDimensions(),this._register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._themeService.onChangeColors(A=>this._injectCss(A))),this._injectCss(this._themeService.colors),this._rowFactory=_.createInstance(Ju,this._document),this._element.classList.add(tu+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this._register(this._linkifier2.onShowLinkUnderline(A=>this._handleLinkHover(A))),this._register(this._linkifier2.onHideLinkUnderline(A=>this._handleLinkLeave(A))),this._register(qe(()=>{this._element.classList.remove(tu+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new R1(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let s of this._rowElements)s.style.width=`${this.dimensions.css.canvas.width}px`,s.style.height=`${this.dimensions.css.cell.height}px`,s.style.lineHeight=`${this.dimensions.css.cell.height}px`,s.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let t=`${this._terminalSelector} .${tr} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let t=`${this._terminalSelector} .${tr} { pointer-events: none; color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;t+=`${this._terminalSelector} .${tr} .xterm-dim { color: ${Be.multiplyOpacity(e.foreground,.5).css};}`,t+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;let s=`blink_underline_${this._terminalClass}`,o=`blink_bar_${this._terminalClass}`,a=`blink_block_${this._terminalClass}`;t+=`@keyframes ${s} { 50% {  border-bottom-style: hidden; }}`,t+=`@keyframes ${o} { 50% {  box-shadow: none; }}`,t+=`@keyframes ${a} { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,t+=`${this._terminalSelector} .${tr}.${bn} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${s} 1s step-end infinite;}${this._terminalSelector} .${tr}.${bn} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${o} 1s step-end infinite;}${this._terminalSelector} .${tr}.${bn} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${a} 1s step-end infinite;}${this._terminalSelector} .${tr} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${tr} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${e.cursor.css} !important; color: ${e.cursorAccent.css} !important;}${this._terminalSelector} .${tr} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${tr} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${tr} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,t+=`${this._terminalSelector} .${_l} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${_l} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${_l} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(let[h,c]of e.ansi.entries())t+=`${this._terminalSelector} .${fl}${h} { color: ${c.css}; }${this._terminalSelector} .${fl}${h}.xterm-dim { color: ${Be.multiplyOpacity(c,.5).css}; }${this._terminalSelector} .${zp}${h} { background-color: ${c.css}; }`;t+=`${this._terminalSelector} .${fl}${Nn} { color: ${Be.opaque(e.background).css}; }${this._terminalSelector} .${fl}${Nn}.xterm-dim { color: ${Be.multiplyOpacity(Be.opaque(e.background),.5).css}; }${this._terminalSelector} .${zp}${Nn} { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=t}_setDefaultSpacing(){let e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let s=this._rowElements.length;s<=t;s++){let o=this._document.createElement("div");this._rowContainer.appendChild(o),this._rowElements.push(o)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(bn),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(bn),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,s){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,s),this.renderRows(0,this._bufferService.rows-1),!e||!t||(this._selectionRenderModel.update(this._terminal,e,t,s),!this._selectionRenderModel.hasSelection))return;let o=this._selectionRenderModel.viewportStartRow,a=this._selectionRenderModel.viewportEndRow,h=this._selectionRenderModel.viewportCappedStartRow,c=this._selectionRenderModel.viewportCappedEndRow,_=this._document.createDocumentFragment();if(s){let g=e[0]>t[0];_.appendChild(this._createSelectionElement(h,g?t[0]:e[0],g?e[0]:t[0],c-h+1))}else{let g=o===h?e[0]:0,p=h===a?t[0]:this._bufferService.cols;_.appendChild(this._createSelectionElement(h,g,p));let y=c-h-1;if(_.appendChild(this._createSelectionElement(h+1,0,this._bufferService.cols,y)),h!==c){let v=a===c?t[0]:this._bufferService.cols;_.appendChild(this._createSelectionElement(c,0,v))}}this._selectionContainer.appendChild(_)}_createSelectionElement(e,t,s,o=1){let a=this._document.createElement("div"),h=t*this.dimensions.css.cell.width,c=this.dimensions.css.cell.width*(s-t);return h+c>this.dimensions.css.canvas.width&&(c=this.dimensions.css.canvas.width-h),a.style.height=`${o*this.dimensions.css.cell.height}px`,a.style.top=`${e*this.dimensions.css.cell.height}px`,a.style.left=`${h}px`,a.style.width=`${c}px`,a}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let e of this._rowElements)e.replaceChildren()}renderRows(e,t){let s=this._bufferService.buffer,o=s.ybase+s.y,a=Math.min(s.x,this._bufferService.cols-1),h=this._coreService.decPrivateModes.cursorBlink??this._optionsService.rawOptions.cursorBlink,c=this._coreService.decPrivateModes.cursorStyle??this._optionsService.rawOptions.cursorStyle,_=this._optionsService.rawOptions.cursorInactiveStyle;for(let g=e;g<=t;g++){let p=g+s.ydisp,y=this._rowElements[g],v=s.lines.get(p);if(!y||!v)break;y.replaceChildren(...this._rowFactory.createRow(v,p,p===o,c,_,a,h,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${tu}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,s,o,a,h){s<0&&(e=0),o<0&&(t=0);let c=this._bufferService.rows-1;s=Math.max(Math.min(s,c),0),o=Math.max(Math.min(o,c),0),a=Math.min(a,this._bufferService.cols);let _=this._bufferService.buffer,g=_.ybase+_.y,p=Math.min(_.x,a-1),y=this._optionsService.rawOptions.cursorBlink,v=this._optionsService.rawOptions.cursorStyle,C=this._optionsService.rawOptions.cursorInactiveStyle;for(let w=s;w<=o;++w){let A=w+_.ydisp,T=this._rowElements[w],M=_.lines.get(A);if(!T||!M)break;T.replaceChildren(...this._rowFactory.createRow(M,A,A===g,v,C,p,y,this.dimensions.css.cell.width,this._widthCache,h?w===s?e:0:-1,h?(w===o?t:a)-1:-1))}}};ec=Ge([le(7,Pc),le(8,Wl),le(9,Ut),le(10,Mt),le(11,Rs),le(12,$r),le(13,Ds)],ec);var tc=class extends Ce{constructor(e,t,s){super(),this._optionsService=s,this.width=0,this.height=0,this._onCharSizeChange=this._register(new J),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this._register(new O1(this._optionsService))}catch{this._measureStrategy=this._register(new B1(e,t,this._optionsService))}this._register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let e=this._measureStrategy.measure();(e.width!==this.width||e.height!==this.height)&&(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};tc=Ge([le(2,Ut)],tc);var Am=class extends Ce{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(e,t){e!==void 0&&e>0&&t!==void 0&&t>0&&(this._result.width=e,this._result.height=t)}},B1=class extends Am{constructor(e,t,s){super(),this._document=e,this._parentElement=t,this._optionsService=s,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}},O1=class extends Am{constructor(e){super(),this._optionsService=e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");let t=this._ctx.measureText("W");if(!("width"in t&&"fontBoundingBoxAscent"in t&&"fontBoundingBoxDescent"in t))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;let e=this._ctx.measureText("W");return this._validateAndSet(e.width,e.fontBoundingBoxAscent+e.fontBoundingBoxDescent),this._result}},A1=class extends Ce{constructor(e,t,s){super(),this._textarea=e,this._window=t,this.mainDocument=s,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=this._register(new N1(this._window)),this._onDprChange=this._register(new J),this.onDprChange=this._onDprChange.event,this._onWindowChange=this._register(new J),this.onWindowChange=this._onWindowChange.event,this._register(this.onWindowChange(o=>this._screenDprMonitor.setWindow(o))),this._register(wt.forward(this._screenDprMonitor.onDprChange,this._onDprChange)),this._register(Se(this._textarea,"focus",()=>this._isFocused=!0)),this._register(Se(this._textarea,"blur",()=>this._isFocused=!1))}get window(){return this._window}set window(e){this._window!==e&&(this._window=e,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}},N1=class extends Ce{constructor(e){super(),this._parentWindow=e,this._windowResizeListener=this._register(new Es),this._onDprChange=this._register(new J),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this._register(qe(()=>this.clearListener()))}setWindow(e){this._parentWindow=e,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=Se(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var e;this._outerListener&&((e=this._resolutionMediaMatchList)==null||e.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){!this._resolutionMediaMatchList||!this._outerListener||(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}},I1=class extends Ce{constructor(){super(),this.linkProviders=[],this._register(qe(()=>this.linkProviders.length=0))}registerLinkProvider(e){return this.linkProviders.push(e),{dispose:()=>{let t=this.linkProviders.indexOf(e);t!==-1&&this.linkProviders.splice(t,1)}}}};function Nc(e,t,s){let o=s.getBoundingClientRect(),a=e.getComputedStyle(s),h=parseInt(a.getPropertyValue("padding-left")),c=parseInt(a.getPropertyValue("padding-top"));return[t.clientX-o.left-h,t.clientY-o.top-c]}function z1(e,t,s,o,a,h,c,_,g){if(!h)return;let p=Nc(e,t,s);if(p)return p[0]=Math.ceil((p[0]+(g?c/2:0))/c),p[1]=Math.ceil(p[1]/_),p[0]=Math.min(Math.max(p[0],1),o+(g?1:0)),p[1]=Math.min(Math.max(p[1],1),a),p}var rc=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,s,o,a){return z1(window,e,t,s,o,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,a)}getMouseReportCoords(e,t){let s=Nc(window,e,t);if(this._charSizeService.hasValidSize)return s[0]=Math.min(Math.max(s[0],0),this._renderService.dimensions.css.canvas.width-1),s[1]=Math.min(Math.max(s[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(s[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(s[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(s[0]),y:Math.floor(s[1])}}};rc=Ge([le(0,Kr),le(1,Wl)],rc);var W1=class{constructor(e,t){this._renderCallback=e,this._coreBrowserService=t,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(e){return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(e,t,s){this._rowCount=s,e=e!==void 0?e:0,t=t!==void 0?t:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,t):t,!this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0){this._runRefreshCallbacks();return}let e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let e of this._refreshCallbacks)e(0);this._refreshCallbacks=[]}},Nm=class{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,s=0,o=e.timeRemaining(),a=0;for(;this._i<this._tasks.length;){if(t=Date.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,Date.now()-t),s=Math.max(t,s),a=e.timeRemaining(),s*1.5>a){o-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-t))}ms`),this._start();return}o=a}this.clear()}},F1=class extends Nm{_requestCallback(e){return setTimeout(()=>e(this._createDeadline(16)))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){let t=Date.now()+e;return{timeRemaining:()=>Math.max(0,t-Date.now())}}},H1=class extends Nm{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}},Ol=!Fl&&"requestIdleCallback"in window?H1:F1,U1=class{constructor(){this._queue=new Ol}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}},ic=class extends Ce{constructor(e,t,s,o,a,h,c,_){super(),this._rowCount=e,this._charSizeService=o,this._renderer=this._register(new Es),this._pausedResizeTask=new U1,this._observerDisposable=this._register(new Es),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this._register(new J),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this._register(new J),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this._register(new J),this.onRender=this._onRender.event,this._onRefreshRequest=this._register(new J),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new W1((g,p)=>this._renderRows(g,p),c),this._register(this._renderDebouncer),this._register(c.onDprChange(()=>this.handleDevicePixelRatioChange())),this._register(h.onResize(()=>this._fullRefresh())),this._register(h.buffers.onBufferActivate(()=>{var g;return(g=this._renderer.value)==null?void 0:g.clear()})),this._register(s.onOptionChange(()=>this._handleOptionsChanged())),this._register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this._register(a.onDecorationRegistered(()=>this._fullRefresh())),this._register(a.onDecorationRemoved(()=>this._fullRefresh())),this._register(s.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(h.cols,h.rows),this._fullRefresh()})),this._register(s.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(h.buffer.y,h.buffer.y,!0))),this._register(_.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(c.window,t),this._register(c.onWindowChange(g=>this._registerIntersectionObserver(g,t)))}get dimensions(){return this._renderer.value.dimensions}_registerIntersectionObserver(e,t){if("IntersectionObserver"in e){let s=new e.IntersectionObserver(o=>this._handleIntersectionChange(o[o.length-1]),{threshold:0});s.observe(t),this._observerDisposable.value=qe(()=>s.disconnect())}}_handleIntersectionChange(e){this._isPaused=e.isIntersecting===void 0?e.intersectionRatio===0:!e.isIntersecting,!this._isPaused&&!this._charSizeService.hasValidSize&&this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,s=!1){if(this._isPaused){this._needsFullRefresh=!0;return}s||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount)}_renderRows(e,t){this._renderer.value&&(e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0)}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw(t=>this.refreshRows(t.start,t.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var e,t;this._renderer.value&&((t=(e=this._renderer.value).clearTextureAtlas)==null||t.call(e),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var s;return(s=this._renderer.value)==null?void 0:s.handleResize(e,t)}):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){var e;(e=this._renderer.value)==null||e.handleCharSizeChanged()}handleBlur(){var e;(e=this._renderer.value)==null||e.handleBlur()}handleFocus(){var e;(e=this._renderer.value)==null||e.handleFocus()}handleSelectionChanged(e,t,s){var o;this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=s,(o=this._renderer.value)==null||o.handleSelectionChanged(e,t,s)}handleCursorMove(){var e;(e=this._renderer.value)==null||e.handleCursorMove()}clear(){var e;(e=this._renderer.value)==null||e.clear()}};ic=Ge([le(2,Ut),le(3,Wl),le(4,Vn),le(5,Mt),le(6,$r),le(7,Ds)],ic);function j1(e,t,s,o){let a=s.buffer.x,h=s.buffer.y;if(!s.buffer.hasScrollback)return V1(a,h,e,t,s,o)+Hl(h,t,s,o)+q1(a,h,e,t,s,o);let c;if(h===t)return c=a>e?"D":"C",Hn(Math.abs(a-e),Fn(c,o));c=h>t?"D":"C";let _=Math.abs(h-t),g=K1(h>t?e:a,s)+(_-1)*s.cols+1+$1(h>t?a:e);return Hn(g,Fn(c,o))}function $1(e,t){return e-1}function K1(e,t){return t.cols-e}function V1(e,t,s,o,a,h){return Hl(t,o,a,h).length===0?"":Hn(zm(e,t,e,t-Hi(t,a),!1,a).length,Fn("D",h))}function Hl(e,t,s,o){let a=e-Hi(e,s),h=t-Hi(t,s),c=Math.abs(a-h)-X1(e,t,s);return Hn(c,Fn(Im(e,t),o))}function q1(e,t,s,o,a,h){let c;Hl(t,o,a,h).length>0?c=o-Hi(o,a):c=t;let _=o,g=Y1(e,t,s,o,a,h);return Hn(zm(e,c,s,_,g==="C",a).length,Fn(g,h))}function X1(e,t,s){var o;let a=0,h=e-Hi(e,s),c=t-Hi(t,s);for(let _=0;_<Math.abs(h-c);_++){let g=Im(e,t)==="A"?-1:1;(o=s.buffer.lines.get(h+g*_))!=null&&o.isWrapped&&a++}return a}function Hi(e,t){let s=0,o=t.buffer.lines.get(e),a=o==null?void 0:o.isWrapped;for(;a&&e>=0&&e<t.rows;)s++,o=t.buffer.lines.get(--e),a=o==null?void 0:o.isWrapped;return s}function Y1(e,t,s,o,a,h){let c;return Hl(s,o,a,h).length>0?c=o-Hi(o,a):c=t,e<s&&c<=o||e>=s&&c<o?"C":"D"}function Im(e,t){return e>t?"A":"B"}function zm(e,t,s,o,a,h){let c=e,_=t,g="";for(;c!==s||_!==o;)c+=a?1:-1,a&&c>h.cols-1?(g+=h.buffer.translateBufferLineToString(_,!1,e,c),c=0,e=0,_++):!a&&c<0&&(g+=h.buffer.translateBufferLineToString(_,!1,0,e+1),c=h.cols-1,e=c,_--);return g+h.buffer.translateBufferLineToString(_,!1,e,c)}function Fn(e,t){let s=t?"O":"[";return H.ESC+s+e}function Hn(e,t){e=Math.floor(e);let s="";for(let o=0;o<e;o++)s+=t;return s}var G1=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:!this.selectionEnd||!this.selectionStart?this.selectionStart:this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols===0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let e=this.selectionStart,t=this.selectionEnd;return!e||!t?!1:e[1]>t[1]||e[1]===t[1]&&e[0]>t[0]}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}};function Wp(e,t){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}var Fp=50,Q1=15,Z1=50,J1=500,eC="",tC=new RegExp(eC,"g"),sc=class extends Ce{constructor(e,t,s,o,a,h,c,_,g){super(),this._element=e,this._screenElement=t,this._linkifier=s,this._bufferService=o,this._coreService=a,this._mouseService=h,this._optionsService=c,this._renderService=_,this._coreBrowserService=g,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new sr,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this._register(new J),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this._register(new J),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this._register(new J),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this._register(new J),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=p=>this._handleMouseMove(p),this._mouseUpListener=p=>this._handleMouseUp(p),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(p=>this._handleTrim(p)),this._register(this._bufferService.buffers.onBufferActivate(p=>this._handleBufferActivate(p))),this.enable(),this._model=new G1(this._bufferService),this._activeSelectionMode=0,this._register(qe(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!e||!t?!1:e[0]!==t[0]||e[1]!==t[1]}get selectionText(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";let s=this._bufferService.buffer,o=[];if(this._activeSelectionMode===3){if(e[0]===t[0])return"";let a=e[0]<t[0]?e[0]:t[0],h=e[0]<t[0]?t[0]:e[0];for(let c=e[1];c<=t[1];c++){let _=s.translateBufferLineToString(c,!0,a,h);o.push(_)}}else{let a=e[1]===t[1]?t[0]:void 0;o.push(s.translateBufferLineToString(e[1],!0,e[0],a));for(let h=e[1]+1;h<=t[1]-1;h++){let c=s.lines.get(h),_=s.translateBufferLineToString(h,!0);c!=null&&c.isWrapped?o[o.length-1]+=_:o.push(_)}if(e[1]!==t[1]){let h=s.lines.get(t[1]),c=s.translateBufferLineToString(t[1],!0,0,t[0]);h&&h.isWrapped?o[o.length-1]+=c:o.push(c)}}return o.map(a=>a.replace(tC," ")).join(Bm?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),Ac&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(e){let t=this._getMouseBufferCoords(e),s=this._model.finalSelectionStart,o=this._model.finalSelectionEnd;return!s||!o||!t?!1:this._areCoordsInSelection(t,s,o)}isCellInSelection(e,t){let s=this._model.finalSelectionStart,o=this._model.finalSelectionEnd;return!s||!o?!1:this._areCoordsInSelection([e,t],s,o)}_areCoordsInSelection(e,t,s){return e[1]>t[1]&&e[1]<s[1]||t[1]===s[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<s[0]||t[1]<s[1]&&e[1]===s[1]&&e[0]<s[0]||t[1]<s[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){var s,o;let a=(o=(s=this._linkifier.currentLink)==null?void 0:s.link)==null?void 0:o.range;if(a)return this._model.selectionStart=[a.start.x-1,a.start.y-1],this._model.selectionStartLength=Wp(a,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let h=this._getMouseBufferCoords(e);return h?(this._selectWordAt(h,t),this._model.selectionEnd=void 0,!0):!1}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){let t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=Nc(this._coreBrowserService.window,e,this._screenElement)[1],s=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=s?0:(t>s&&(t-=s),t=Math.min(Math.max(t,-50),Fp),t/=Fp,t/Math.abs(t)+Math.round(t*(Q1-1)))}shouldForceSelection(e){return Ml?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,!(e.button===2&&this.hasSelection)&&e.button===0){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):e.detail===1?this._handleSingleClick(e):e.detail===2?this._handleDoubleClick(e):e.detail===3&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),Z1)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&t.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){let t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(Ml&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;let t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd){this.refresh(!0);return}this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let s=this._bufferService.buffer;if(this._model.selectionEnd[1]<s.lines.length){let o=s.lines.get(this._model.selectionEnd[1]);o&&o.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}(!t||t[0]!==this._model.selectionEnd[0]||t[1]!==this._model.selectionEnd[1])&&this.refresh(!0)}_dragScroll(){if(!(!this._model.selectionEnd||!this._model.selectionStart)&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let e=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){let t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<J1&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let s=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(s&&s[0]!==void 0&&s[1]!==void 0){let o=j1(s[0]-1,s[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(o,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,s=!!e&&!!t&&(e[0]!==t[0]||e[1]!==t[1]);if(!s){this._oldHasSelection&&this._fireOnSelectionChange(e,t,s);return}!e||!t||(!this._oldSelectionStart||!this._oldSelectionEnd||e[0]!==this._oldSelectionStart[0]||e[1]!==this._oldSelectionStart[1]||t[0]!==this._oldSelectionEnd[0]||t[1]!==this._oldSelectionEnd[1])&&this._fireOnSelectionChange(e,t,s)}_fireOnSelectionChange(e,t,s){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=s,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim(t=>this._handleTrim(t))}_convertViewportColToCharacterIndex(e,t){let s=t;for(let o=0;t>=o;o++){let a=e.loadCell(o,this._workCell).getChars().length;this._workCell.getWidth()===0?s--:a>1&&t!==o&&(s+=a-1)}return s}setSelection(e,t,s){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=s,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t,s=!0,o=!0){if(e[0]>=this._bufferService.cols)return;let a=this._bufferService.buffer,h=a.lines.get(e[1]);if(!h)return;let c=a.translateBufferLineToString(e[1],!1),_=this._convertViewportColToCharacterIndex(h,e[0]),g=_,p=e[0]-_,y=0,v=0,C=0,w=0;if(c.charAt(_)===" "){for(;_>0&&c.charAt(_-1)===" ";)_--;for(;g<c.length&&c.charAt(g+1)===" ";)g++}else{let M=e[0],X=e[0];h.getWidth(M)===0&&(y++,M--),h.getWidth(X)===2&&(v++,X++);let ie=h.getString(X).length;for(ie>1&&(w+=ie-1,g+=ie-1);M>0&&_>0&&!this._isCharWordSeparator(h.loadCell(M-1,this._workCell));){h.loadCell(M-1,this._workCell);let se=this._workCell.getChars().length;this._workCell.getWidth()===0?(y++,M--):se>1&&(C+=se-1,_-=se-1),_--,M--}for(;X<h.length&&g+1<c.length&&!this._isCharWordSeparator(h.loadCell(X+1,this._workCell));){h.loadCell(X+1,this._workCell);let se=this._workCell.getChars().length;this._workCell.getWidth()===2?(v++,X++):se>1&&(w+=se-1,g+=se-1),g++,X++}}g++;let A=_+p-y+C,T=Math.min(this._bufferService.cols,g-_+y+v-C-w);if(!(!t&&c.slice(_,g).trim()==="")){if(s&&A===0&&h.getCodePoint(0)!==32){let M=a.lines.get(e[1]-1);if(M&&h.isWrapped&&M.getCodePoint(this._bufferService.cols-1)!==32){let X=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(X){let ie=this._bufferService.cols-X.start;A-=ie,T+=ie}}}if(o&&A+T===this._bufferService.cols&&h.getCodePoint(this._bufferService.cols-1)!==32){let M=a.lines.get(e[1]+1);if(M!=null&&M.isWrapped&&M.getCodePoint(0)!==32){let X=this._getWordAt([0,e[1]+1],!1,!1,!0);X&&(T+=X.length)}}return{start:A,length:T}}}_selectWordAt(e,t){let s=this._getWordAt(e,t);if(s){for(;s.start<0;)s.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[s.start,e[1]],this._model.selectionStartLength=s.length}}_selectToWordAt(e){let t=this._getWordAt(e,!0);if(t){let s=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,s--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,s++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,s]}}_isCharWordSeparator(e){return e.getWidth()===0?!1:this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){let t=this._bufferService.buffer.getWrappedRangeForLine(e),s={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=Wp(s,this._bufferService.cols)}};sc=Ge([le(3,Mt),le(4,Rs),le(5,Lc),le(6,Ut),le(7,Kr),le(8,$r)],sc);var Hp=class{constructor(){this._data={}}set(e,t,s){this._data[e]||(this._data[e]={}),this._data[e][t]=s}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}},Up=class{constructor(){this._color=new Hp,this._css=new Hp}setCss(e,t,s){this._css.set(e,t,s)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,s){this._color.set(e,t,s)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}},ot=Object.freeze((()=>{let e=[Fe.toColor("#2e3436"),Fe.toColor("#cc0000"),Fe.toColor("#4e9a06"),Fe.toColor("#c4a000"),Fe.toColor("#3465a4"),Fe.toColor("#75507b"),Fe.toColor("#06989a"),Fe.toColor("#d3d7cf"),Fe.toColor("#555753"),Fe.toColor("#ef2929"),Fe.toColor("#8ae234"),Fe.toColor("#fce94f"),Fe.toColor("#729fcf"),Fe.toColor("#ad7fa8"),Fe.toColor("#34e2e2"),Fe.toColor("#eeeeec")],t=[0,95,135,175,215,255];for(let s=0;s<216;s++){let o=t[s/36%6|0],a=t[s/6%6|0],h=t[s%6];e.push({css:tt.toCss(o,a,h),rgba:tt.toRgba(o,a,h)})}for(let s=0;s<24;s++){let o=8+s*10;e.push({css:tt.toCss(o,o,o),rgba:tt.toRgba(o,o,o)})}return e})()),Bi=Fe.toColor("#ffffff"),Rn=Fe.toColor("#000000"),jp=Fe.toColor("#ffffff"),$p=Rn,kn={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117},rC=Bi,nc=class extends Ce{constructor(e){super(),this._optionsService=e,this._contrastCache=new Up,this._halfContrastCache=new Up,this._onChangeColors=this._register(new J),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:Bi,background:Rn,cursor:jp,cursorAccent:$p,selectionForeground:void 0,selectionBackgroundTransparent:kn,selectionBackgroundOpaque:Be.blend(Rn,kn),selectionInactiveBackgroundTransparent:kn,selectionInactiveBackgroundOpaque:Be.blend(Rn,kn),scrollbarSliderBackground:Be.opacity(Bi,.2),scrollbarSliderHoverBackground:Be.opacity(Bi,.4),scrollbarSliderActiveBackground:Be.opacity(Bi,.5),overviewRulerBorder:Bi,ansi:ot.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this._register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(e={}){let t=this._colors;if(t.foreground=Te(e.foreground,Bi),t.background=Te(e.background,Rn),t.cursor=Be.blend(t.background,Te(e.cursor,jp)),t.cursorAccent=Be.blend(t.background,Te(e.cursorAccent,$p)),t.selectionBackgroundTransparent=Te(e.selectionBackground,kn),t.selectionBackgroundOpaque=Be.blend(t.background,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundTransparent=Te(e.selectionInactiveBackground,t.selectionBackgroundTransparent),t.selectionInactiveBackgroundOpaque=Be.blend(t.background,t.selectionInactiveBackgroundTransparent),t.selectionForeground=e.selectionForeground?Te(e.selectionForeground,Np):void 0,t.selectionForeground===Np&&(t.selectionForeground=void 0),Be.isOpaque(t.selectionBackgroundTransparent)&&(t.selectionBackgroundTransparent=Be.opacity(t.selectionBackgroundTransparent,.3)),Be.isOpaque(t.selectionInactiveBackgroundTransparent)&&(t.selectionInactiveBackgroundTransparent=Be.opacity(t.selectionInactiveBackgroundTransparent,.3)),t.scrollbarSliderBackground=Te(e.scrollbarSliderBackground,Be.opacity(t.foreground,.2)),t.scrollbarSliderHoverBackground=Te(e.scrollbarSliderHoverBackground,Be.opacity(t.foreground,.4)),t.scrollbarSliderActiveBackground=Te(e.scrollbarSliderActiveBackground,Be.opacity(t.foreground,.5)),t.overviewRulerBorder=Te(e.overviewRulerBorder,rC),t.ansi=ot.slice(),t.ansi[0]=Te(e.black,ot[0]),t.ansi[1]=Te(e.red,ot[1]),t.ansi[2]=Te(e.green,ot[2]),t.ansi[3]=Te(e.yellow,ot[3]),t.ansi[4]=Te(e.blue,ot[4]),t.ansi[5]=Te(e.magenta,ot[5]),t.ansi[6]=Te(e.cyan,ot[6]),t.ansi[7]=Te(e.white,ot[7]),t.ansi[8]=Te(e.brightBlack,ot[8]),t.ansi[9]=Te(e.brightRed,ot[9]),t.ansi[10]=Te(e.brightGreen,ot[10]),t.ansi[11]=Te(e.brightYellow,ot[11]),t.ansi[12]=Te(e.brightBlue,ot[12]),t.ansi[13]=Te(e.brightMagenta,ot[13]),t.ansi[14]=Te(e.brightCyan,ot[14]),t.ansi[15]=Te(e.brightWhite,ot[15]),e.extendedAnsi){let s=Math.min(t.ansi.length-16,e.extendedAnsi.length);for(let o=0;o<s;o++)t.ansi[o+16]=Te(e.extendedAnsi[o],ot[o+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(e===void 0){for(let t=0;t<this._restoreColors.ansi.length;++t)this._colors.ansi[t]=this._restoreColors.ansi[t];return}switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};nc=Ge([le(0,Ut)],nc);function Te(e,t){if(e!==void 0)try{return Fe.toColor(e)}catch{}return t}var iC=class{constructor(...e){this._entries=new Map;for(let[t,s]of e)this.set(t,s)}set(e,t){let s=this._entries.get(e);return this._entries.set(e,t),s}forEach(e){for(let[t,s]of this._entries.entries())e(t,s)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}},sC=class{constructor(){this._services=new iC,this._services.set(Pc,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e,...t){let s=iw(e).sort((h,c)=>h.index-c.index),o=[];for(let h of s){let c=this._services.get(h.id);if(!c)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${h.id}.`);o.push(c)}let a=s.length>0?s[0].index:t.length;if(t.length!==a)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${t.length} static arguments`);return new e(...t,...o)}},nC={trace:0,debug:1,info:2,warn:3,error:4,off:5},oC="xterm.js: ",oc=class extends Ce{constructor(e){super(),this._optionsService=e,this._logLevel=5,this._updateLogLevel(),this._register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}get logLevel(){return this._logLevel}_updateLogLevel(){this._logLevel=nC[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)typeof e[t]=="function"&&(e[t]=e[t]())}_log(e,t,s){this._evalLazyOptionalParams(s),e.call(console,(this._optionsService.options.logger?"":oC)+t,...s)}trace(e,...t){var s;this._logLevel<=0&&this._log(((s=this._optionsService.options.logger)==null?void 0:s.trace.bind(this._optionsService.options.logger))??console.log,e,t)}debug(e,...t){var s;this._logLevel<=1&&this._log(((s=this._optionsService.options.logger)==null?void 0:s.debug.bind(this._optionsService.options.logger))??console.log,e,t)}info(e,...t){var s;this._logLevel<=2&&this._log(((s=this._optionsService.options.logger)==null?void 0:s.info.bind(this._optionsService.options.logger))??console.info,e,t)}warn(e,...t){var s;this._logLevel<=3&&this._log(((s=this._optionsService.options.logger)==null?void 0:s.warn.bind(this._optionsService.options.logger))??console.warn,e,t)}error(e,...t){var s;this._logLevel<=4&&this._log(((s=this._optionsService.options.logger)==null?void 0:s.error.bind(this._optionsService.options.logger))??console.error,e,t)}};oc=Ge([le(0,Ut)],oc);var Kp=class extends Ce{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this._register(new J),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this._register(new J),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this._register(new J),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;let t=new Array(e);for(let s=0;s<Math.min(e,this.length);s++)t[s]=this._array[this._getCyclicIndex(s)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t,...s){if(t){for(let o=e;o<this._length-t;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let o=this._length-1;o>=e;o--)this._array[this._getCyclicIndex(o+s.length)]=this._array[this._getCyclicIndex(o)];for(let o=0;o<s.length;o++)this._array[this._getCyclicIndex(e+o)]=s[o];if(s.length&&this.onInsertEmitter.fire({index:e,amount:s.length}),this._length+s.length>this._maxLength){let o=this._length+s.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=s.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,s){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+s<0)throw new Error("Cannot shift elements in list beyond index 0");if(s>0){for(let a=t-1;a>=0;a--)this.set(e+a+s,this.get(e+a));let o=e+t+s-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let o=0;o<t;o++)this.set(e+o+s,this.get(e+o))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}},be=3,Ve=Object.freeze(new Kn),pl=0,ru=2,Dn=class Wm{constructor(t,s,o=!1){this.isWrapped=o,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(t*be);let a=s||sr.fromCharData([0,lm,1,0]);for(let h=0;h<t;++h)this.setCell(h,a);this.length=t}get(t){let s=this._data[t*be+0],o=s&2097151;return[this._data[t*be+1],s&2097152?this._combined[t]:o?gi(o):"",s>>22,s&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):o]}set(t,s){this._data[t*be+1]=s[0],s[1].length>1?(this._combined[t]=s[1],this._data[t*be+0]=t|2097152|s[2]<<22):this._data[t*be+0]=s[1].charCodeAt(0)|s[2]<<22}getWidth(t){return this._data[t*be+0]>>22}hasWidth(t){return this._data[t*be+0]&12582912}getFg(t){return this._data[t*be+1]}getBg(t){return this._data[t*be+2]}hasContent(t){return this._data[t*be+0]&4194303}getCodePoint(t){let s=this._data[t*be+0];return s&2097152?this._combined[t].charCodeAt(this._combined[t].length-1):s&2097151}isCombined(t){return this._data[t*be+0]&2097152}getString(t){let s=this._data[t*be+0];return s&2097152?this._combined[t]:s&2097151?gi(s&2097151):""}isProtected(t){return this._data[t*be+2]&536870912}loadCell(t,s){return pl=t*be,s.content=this._data[pl+0],s.fg=this._data[pl+1],s.bg=this._data[pl+2],s.content&2097152&&(s.combinedData=this._combined[t]),s.bg&268435456&&(s.extended=this._extendedAttrs[t]),s}setCell(t,s){s.content&2097152&&(this._combined[t]=s.combinedData),s.bg&268435456&&(this._extendedAttrs[t]=s.extended),this._data[t*be+0]=s.content,this._data[t*be+1]=s.fg,this._data[t*be+2]=s.bg}setCellFromCodepoint(t,s,o,a){a.bg&268435456&&(this._extendedAttrs[t]=a.extended),this._data[t*be+0]=s|o<<22,this._data[t*be+1]=a.fg,this._data[t*be+2]=a.bg}addCodepointToCell(t,s,o){let a=this._data[t*be+0];a&2097152?this._combined[t]+=gi(s):a&2097151?(this._combined[t]=gi(a&2097151)+gi(s),a&=-2097152,a|=2097152):a=s|1<<22,o&&(a&=-12582913,a|=o<<22),this._data[t*be+0]=a}insertCells(t,s,o){if(t%=this.length,t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,o),s<this.length-t){let a=new sr;for(let h=this.length-t-s-1;h>=0;--h)this.setCell(t+s+h,this.loadCell(t+h,a));for(let h=0;h<s;++h)this.setCell(t+h,o)}else for(let a=t;a<this.length;++a)this.setCell(a,o);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,o)}deleteCells(t,s,o){if(t%=this.length,s<this.length-t){let a=new sr;for(let h=0;h<this.length-t-s;++h)this.setCell(t+h,this.loadCell(t+s+h,a));for(let h=this.length-s;h<this.length;++h)this.setCell(h,o)}else for(let a=t;a<this.length;++a)this.setCell(a,o);t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,o),this.getWidth(t)===0&&!this.hasContent(t)&&this.setCellFromCodepoint(t,0,1,o)}replaceCells(t,s,o,a=!1){if(a){for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodepoint(t-1,0,1,o),s<this.length&&this.getWidth(s-1)===2&&!this.isProtected(s)&&this.setCellFromCodepoint(s,0,1,o);t<s&&t<this.length;)this.isProtected(t)||this.setCell(t,o),t++;return}for(t&&this.getWidth(t-1)===2&&this.setCellFromCodepoint(t-1,0,1,o),s<this.length&&this.getWidth(s-1)===2&&this.setCellFromCodepoint(s,0,1,o);t<s&&t<this.length;)this.setCell(t++,o)}resize(t,s){if(t===this.length)return this._data.length*4*ru<this._data.buffer.byteLength;let o=t*be;if(t>this.length){if(this._data.buffer.byteLength>=o*4)this._data=new Uint32Array(this._data.buffer,0,o);else{let a=new Uint32Array(o);a.set(this._data),this._data=a}for(let a=this.length;a<t;++a)this.setCell(a,s)}else{this._data=this._data.subarray(0,o);let a=Object.keys(this._combined);for(let c=0;c<a.length;c++){let _=parseInt(a[c],10);_>=t&&delete this._combined[_]}let h=Object.keys(this._extendedAttrs);for(let c=0;c<h.length;c++){let _=parseInt(h[c],10);_>=t&&delete this._extendedAttrs[_]}}return this.length=t,o*4*ru<this._data.buffer.byteLength}cleanupMemory(){if(this._data.length*4*ru<this._data.buffer.byteLength){let t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,s=!1){if(s){for(let o=0;o<this.length;++o)this.isProtected(o)||this.setCell(o,t);return}this._combined={},this._extendedAttrs={};for(let o=0;o<this.length;++o)this.setCell(o,t)}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(let s in t._combined)this._combined[s]=t._combined[s];this._extendedAttrs={};for(let s in t._extendedAttrs)this._extendedAttrs[s]=t._extendedAttrs[s];this.isWrapped=t.isWrapped}clone(){let t=new Wm(0);t._data=new Uint32Array(this._data),t.length=this.length;for(let s in this._combined)t._combined[s]=this._combined[s];for(let s in this._extendedAttrs)t._extendedAttrs[s]=this._extendedAttrs[s];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*be+0]&4194303)return t+(this._data[t*be+0]>>22);return 0}getNoBgTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(this._data[t*be+0]&4194303||this._data[t*be+2]&50331648)return t+(this._data[t*be+0]>>22);return 0}copyCellsFrom(t,s,o,a,h){let c=t._data;if(h)for(let g=a-1;g>=0;g--){for(let p=0;p<be;p++)this._data[(o+g)*be+p]=c[(s+g)*be+p];c[(s+g)*be+2]&268435456&&(this._extendedAttrs[o+g]=t._extendedAttrs[s+g])}else for(let g=0;g<a;g++){for(let p=0;p<be;p++)this._data[(o+g)*be+p]=c[(s+g)*be+p];c[(s+g)*be+2]&268435456&&(this._extendedAttrs[o+g]=t._extendedAttrs[s+g])}let _=Object.keys(t._combined);for(let g=0;g<_.length;g++){let p=parseInt(_[g],10);p>=s&&(this._combined[p-s+o]=t._combined[p])}}translateToString(t,s,o,a){s=s??0,o=o??this.length,t&&(o=Math.min(o,this.getTrimmedLength())),a&&(a.length=0);let h="";for(;s<o;){let c=this._data[s*be+0],_=c&2097151,g=c&2097152?this._combined[s]:_?gi(_):mi;if(h+=g,a)for(let p=0;p<g.length;++p)a.push(s);s+=c>>22||1}return a&&a.push(s),h}};function lC(e,t,s,o,a,h){let c=[];for(let _=0;_<e.length-1;_++){let g=_,p=e.get(++g);if(!p.isWrapped)continue;let y=[e.get(_)];for(;g<e.length&&p.isWrapped;)y.push(p),p=e.get(++g);if(!h&&o>=_&&o<g){_+=y.length-1;continue}let v=0,C=Un(y,v,t),w=1,A=0;for(;w<y.length;){let M=Un(y,w,t),X=M-A,ie=s-C,se=Math.min(X,ie);y[v].copyCellsFrom(y[w],A,C,se,!1),C+=se,C===s&&(v++,C=0),A+=se,A===M&&(w++,A=0),C===0&&v!==0&&y[v-1].getWidth(s-1)===2&&(y[v].copyCellsFrom(y[v-1],s-1,C++,1,!1),y[v-1].setCell(s-1,a))}y[v].replaceCells(C,s,a);let T=0;for(let M=y.length-1;M>0&&(M>v||y[M].getTrimmedLength()===0);M--)T++;T>0&&(c.push(_+y.length-T),c.push(T)),_+=y.length-1}return c}function aC(e,t){let s=[],o=0,a=t[o],h=0;for(let c=0;c<e.length;c++)if(a===c){let _=t[++o];e.onDeleteEmitter.fire({index:c-h,amount:_}),c+=_-1,h+=_,a=t[++o]}else s.push(c);return{layout:s,countRemoved:h}}function hC(e,t){let s=[];for(let o=0;o<t.length;o++)s.push(e.get(t[o]));for(let o=0;o<s.length;o++)e.set(o,s[o]);e.length=t.length}function uC(e,t,s){let o=[],a=e.map((g,p)=>Un(e,p,t)).reduce((g,p)=>g+p),h=0,c=0,_=0;for(;_<a;){if(a-_<s){o.push(a-_);break}h+=s;let g=Un(e,c,t);h>g&&(h-=g,c++);let p=e[c].getWidth(h-1)===2;p&&h--;let y=p?s-1:s;o.push(y),_+=y}return o}function Un(e,t,s){if(t===e.length-1)return e[t].getTrimmedLength();let o=!e[t].hasContent(s-1)&&e[t].getWidth(s-1)===1,a=e[t+1].getWidth(0)===2;return o&&a?s-1:s}var Fm=class Hm{constructor(t){this.line=t,this.isDisposed=!1,this._disposables=[],this._id=Hm._nextId++,this._onDispose=this.register(new J),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),Fi(this._disposables),this._disposables.length=0)}register(t){return this._disposables.push(t),t}};Fm._nextId=1;var cC=Fm,at={},Oi=at.B;at[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""};at.A={"#":""};at.B=void 0;at[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""};at.C=at[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};at.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};at.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};at.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""};at.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""};at.E=at[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};at.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""};at.H=at[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""};at["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""};var Vp=4294967295,qp=class{constructor(e,t,s){this._hasScrollback=e,this._optionsService=t,this._bufferService=s,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=Ve.clone(),this.savedCharset=Oi,this.markers=[],this._nullCell=sr.fromCharData([0,lm,1,0]),this._whitespaceCell=sr.fromCharData([0,mi,1,32]),this._isClearing=!1,this._memoryCleanupQueue=new Ol,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new Kp(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new Dl),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new Dl),this._whitespaceCell}getBlankLine(e,t){return new Dn(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;let t=e+this._optionsService.rawOptions.scrollback;return t>Vp?Vp:t}fillViewportRows(e){if(this.lines.length===0){e===void 0&&(e=Ve);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new Kp(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){let s=this.getNullCell(Ve),o=0,a=this._getCorrectBufferLength(t);if(a>this.lines.maxLength&&(this.lines.maxLength=a),this.lines.length>0){if(this._cols<e)for(let c=0;c<this.lines.length;c++)o+=+this.lines.get(c).resize(e,s);let h=0;if(this._rows<t)for(let c=this._rows;c<t;c++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new Dn(e,s)):this.ybase>0&&this.lines.length<=this.ybase+this.y+h+1?(this.ybase--,h++,this.ydisp>0&&this.ydisp--):this.lines.push(new Dn(e,s)));else for(let c=this._rows;c>t;c--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(a<this.lines.maxLength){let c=this.lines.length-a;c>0&&(this.lines.trimStart(c),this.ybase=Math.max(this.ybase-c,0),this.ydisp=Math.max(this.ydisp-c,0),this.savedY=Math.max(this.savedY-c,0)),this.lines.maxLength=a}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),h&&(this.y+=h),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let h=0;h<this.lines.length;h++)o+=+this.lines.get(h).resize(e,s);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),o>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){let e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&e.backend==="conpty"&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){let s=this._optionsService.rawOptions.reflowCursorLine,o=lC(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(Ve),s);if(o.length>0){let a=aC(this.lines,o);hC(this.lines,a.layout),this._reflowLargerAdjustViewport(e,t,a.countRemoved)}}_reflowLargerAdjustViewport(e,t,s){let o=this.getNullCell(Ve),a=s;for(;a-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new Dn(e,o))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-s,0)}_reflowSmaller(e,t){let s=this._optionsService.rawOptions.reflowCursorLine,o=this.getNullCell(Ve),a=[],h=0;for(let c=this.lines.length-1;c>=0;c--){let _=this.lines.get(c);if(!_||!_.isWrapped&&_.getTrimmedLength()<=e)continue;let g=[_];for(;_.isWrapped&&c>0;)_=this.lines.get(--c),g.unshift(_);if(!s){let se=this.ybase+this.y;if(se>=c&&se<c+g.length)continue}let p=g[g.length-1].getTrimmedLength(),y=uC(g,this._cols,e),v=y.length-g.length,C;this.ybase===0&&this.y!==this.lines.length-1?C=Math.max(0,this.y-this.lines.maxLength+v):C=Math.max(0,this.lines.length-this.lines.maxLength+v);let w=[];for(let se=0;se<v;se++){let W=this.getBlankLine(Ve,!0);w.push(W)}w.length>0&&(a.push({start:c+g.length+h,newLines:w}),h+=w.length),g.push(...w);let A=y.length-1,T=y[A];T===0&&(A--,T=y[A]);let M=g.length-v-1,X=p;for(;M>=0;){let se=Math.min(X,T);if(g[A]===void 0)break;if(g[A].copyCellsFrom(g[M],X-se,T-se,se,!0),T-=se,T===0&&(A--,T=y[A]),X-=se,X===0){M--;let W=Math.max(M,0);X=Un(g,W,this._cols)}}for(let se=0;se<g.length;se++)y[se]<e&&g[se].setCell(y[se],o);let ie=v-C;for(;ie-- >0;)this.ybase===0?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+h)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+v,this.ybase+t-1)}if(a.length>0){let c=[],_=[];for(let T=0;T<this.lines.length;T++)_.push(this.lines.get(T));let g=this.lines.length,p=g-1,y=0,v=a[y];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+h);let C=0;for(let T=Math.min(this.lines.maxLength-1,g+h-1);T>=0;T--)if(v&&v.start>p+C){for(let M=v.newLines.length-1;M>=0;M--)this.lines.set(T--,v.newLines[M]);T++,c.push({index:p+1,amount:v.newLines.length}),C+=v.newLines.length,v=a[++y]}else this.lines.set(T,_[p--]);let w=0;for(let T=c.length-1;T>=0;T--)c[T].index+=w,this.lines.onInsertEmitter.fire(c[T]),w+=c[T].amount;let A=Math.max(0,g+h-this.lines.maxLength);A>0&&this.lines.onTrimEmitter.fire(A)}}translateBufferLineToString(e,t,s=0,o){let a=this.lines.get(e);return a?a.translateToString(t,s,o):""}getWrappedRangeForLine(e){let t=e,s=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;s+1<this.lines.length&&this.lines.get(s+1).isWrapped;)s++;return{first:t,last:s}}setupTabStops(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose();this.markers.length=0,this._isClearing=!1}addMarker(e){let t=new cC(e);return this.markers.push(t),t.register(this.lines.onTrim(s=>{t.line-=s,t.line<0&&t.dispose()})),t.register(this.lines.onInsert(s=>{t.line>=s.index&&(t.line+=s.amount)})),t.register(this.lines.onDelete(s=>{t.line>=s.index&&t.line<s.index+s.amount&&t.dispose(),t.line>s.index&&(t.line-=s.amount)})),t.register(t.onDispose(()=>this._removeMarker(t))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}},dC=class extends Ce{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this._register(new J),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this._register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this._register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new qp(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new qp(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}},Um=2,jm=1,lc=class extends Ce{constructor(e){super(),this.isUserScrolling=!1,this._onResize=this._register(new J),this.onResize=this._onResize.event,this._onScroll=this._register(new J),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,Um),this.rows=Math.max(e.rawOptions.rows||0,jm),this.buffers=this._register(new dC(e,this))}get buffer(){return this.buffers.active}resize(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t})}reset(){this.buffers.reset(),this.isUserScrolling=!1}deleteLines(e,t){let s=this.buffer;if(t=Math.min(t,s.lines.length-e),s.lines.splice(e,t),s.y+s.ybase>=e&&(s.y=Math.max(0,s.y-t)),s.ydisp+s.scrollBottom>=e){let o=Math.max(s.ydisp-t,0)-s.ydisp;s.ydisp=Math.max(0,s.ydisp+o),s.y=Math.max(0,s.y-o)}s.ybase=Math.max(0,s.ybase-t)}insertLines(e,t){let s=this.buffer,o;o=this._cachedBlankLine,(!o||o.length!==this.cols)&&(o=s.getBlankLine(Ve.clone(),!1),this._cachedBlankLine=o);let a=[...Array(t)].map(()=>o.clone());s.lines.maxLength=Math.max(s.lines.maxLength,s.lines.length+t,s.y+s.ybase+t),s.lines.splice(e,0,...a),s.y+s.ybase>=e&&(s.y+=t);let h=t;for(;h&&s.lines.length-1>s.y+s.ydisp+1&&s.lines.length-1>e+t;){let c=s.lines.pop();if(h--,!(c&&c.getTrimmedLength()===0)&&c){s.lines.push(c);break}}if(s.ydisp+s.scrollBottom>=e){let c=Math.min(s.ydisp+h,s.lines.length-this.rows)-s.ydisp;s.ydisp=Math.max(0,s.ydisp+c),s.y=Math.max(0,s.y-c)}s.ybase+=h}scroll(e,t=!1){let s=this.buffer;e=e||Ve.clone();let o;o=this._cachedBlankLine,(!o||o.length!==this.cols||o.getFg(0)!==e.fg||o.getBg(0)!==e.bg)&&(o=s.getBlankLine(e,t),this._cachedBlankLine=o),o.isWrapped=t;let a=s.ybase+s.scrollTop,h=s.ybase+s.scrollBottom;if(s.scrollTop===0){let c=s.lines.isFull;h===s.lines.length-1?c?s.lines.recycle().copyFrom(o):s.lines.push(o.clone()):s.lines.splice(h+1,0,o.clone()),c?this.isUserScrolling&&(s.ydisp=Math.max(s.ydisp-1,0)):(s.ybase++,this.isUserScrolling||s.ydisp++)}else{let c=h-a+1;s.lines.shiftElements(a+1,c-1,-1),s.lines.set(h,o.clone())}this.isUserScrolling||(s.ydisp=s.ybase),this._onScroll.fire(s.ydisp)}scrollLines(e,t){let s=this.buffer;if(e<0){if(s.ydisp===0)return;this.isUserScrolling=!0}else e+s.ydisp>=s.ybase&&(this.isUserScrolling=!1);let o=s.ydisp;s.ydisp=Math.max(Math.min(s.ydisp+e,s.ybase),0),o!==s.ydisp&&(t||this._onScroll.fire(s.ydisp))}};lc=Ge([le(0,Ut)],lc);var gs={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},reflowCursorLine:!1,rescaleOverlappingGlyphs:!1,rightClickSelectsWord:Ml,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRuler:{}},fC=["normal","bold","100","200","300","400","500","600","700","800","900"],_C=class extends Ce{constructor(e){super(),this._onOptionChange=this._register(new J),this.onOptionChange=this._onOptionChange.event;let t={...gs};for(let s in e)if(s in t)try{let o=e[s];t[s]=this._sanitizeAndValidateOption(s,o)}catch(o){console.error(o)}this.rawOptions=t,this.options={...t},this._setupOptions(),this._register(qe(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(e,t){return this.onOptionChange(s=>{s===e&&t(this.rawOptions[e])})}onMultipleOptionChange(e,t){return this.onOptionChange(s=>{e.indexOf(s)!==-1&&t()})}_setupOptions(){let e=s=>{if(!(s in gs))throw new Error(`No option with key "${s}"`);return this.rawOptions[s]},t=(s,o)=>{if(!(s in gs))throw new Error(`No option with key "${s}"`);o=this._sanitizeAndValidateOption(s,o),this.rawOptions[s]!==o&&(this.rawOptions[s]=o,this._onOptionChange.fire(s))};for(let s in this.rawOptions){let o={get:e.bind(this,s),set:t.bind(this,s)};Object.defineProperty(this.options,s,o)}}_sanitizeAndValidateOption(e,t){switch(e){case"cursorStyle":if(t||(t=gs[e]),!pC(t))throw new Error(`"${t}" is not a valid value for ${e}`);break;case"wordSeparator":t||(t=gs[e]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=fC.includes(t)?t:gs[e];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${e} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(t*10)/10));break;case"scrollback":if(t=Math.min(t,4294967295),t<0)throw new Error(`${e} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${t}`);break;case"rows":case"cols":if(!t&&t!==0)throw new Error(`${e} must be numeric, value: ${t}`);break;case"windowsPty":t=t??{};break}return t}};function pC(e){return e==="block"||e==="underline"||e==="bar"}function Tn(e,t=5){if(typeof e!="object")return e;let s=Array.isArray(e)?[]:{};for(let o in e)s[o]=t<=1?e[o]:e[o]&&Tn(e[o],t-1);return s}var Xp=Object.freeze({insertMode:!1}),Yp=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,cursorBlink:void 0,cursorStyle:void 0,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),ac=class extends Ce{constructor(e,t,s){super(),this._bufferService=e,this._logService=t,this._optionsService=s,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this._register(new J),this.onData=this._onData.event,this._onUserInput=this._register(new J),this.onUserInput=this._onUserInput.event,this._onBinary=this._register(new J),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this._register(new J),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=Tn(Xp),this.decPrivateModes=Tn(Yp)}reset(){this.modes=Tn(Xp),this.decPrivateModes=Tn(Yp)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;let s=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&s.ybase!==s.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`,()=>e.split("").map(o=>o.charCodeAt(0))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`,()=>e.split("").map(t=>t.charCodeAt(0))),this._onBinary.fire(e))}};ac=Ge([le(0,Mt),le(1,dm),le(2,Ut)],ac);var Gp={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>e.button===4||e.action!==1?!1:(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>e.action!==32},DRAG:{events:23,restrict:e=>!(e.action===32&&e.button===3)},ANY:{events:31,restrict:e=>!0}};function iu(e,t){let s=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return e.button===4?(s|=64,s|=e.action):(s|=e.button&3,e.button&4&&(s|=64),e.button&8&&(s|=128),e.action===32?s|=32:e.action===0&&!t&&(s|=3)),s}var su=String.fromCharCode,Qp={DEFAULT:e=>{let t=[iu(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":`\x1B[M${su(t[0])}${su(t[1])}${su(t[2])}`},SGR:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${iu(e,!0)};${e.col};${e.row}${t}`},SGR_PIXELS:e=>{let t=e.action===0&&e.button!==4?"m":"M";return`\x1B[<${iu(e,!0)};${e.x};${e.y}${t}`}},hc=class extends Ce{constructor(e,t){super(),this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this._register(new J),this.onProtocolChange=this._onProtocolChange.event;for(let s of Object.keys(Gp))this.addProtocol(s,Gp[s]);for(let s of Object.keys(Qp))this.addEncoding(s,Qp[s]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows||e.button===4&&e.action===32||e.button===3&&e.action!==32||e.button!==4&&(e.action===2||e.action===3)||(e.col++,e.row++,e.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,e,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(e))return!1;let t=this._encodings[this._activeEncoding](e);return t&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(e&1),up:!!(e&2),drag:!!(e&4),move:!!(e&8),wheel:!!(e&16)}}_equalEvents(e,t,s){if(s){if(e.x!==t.x||e.y!==t.y)return!1}else if(e.col!==t.col||e.row!==t.row)return!1;return!(e.button!==t.button||e.action!==t.action||e.ctrl!==t.ctrl||e.alt!==t.alt||e.shift!==t.shift)}};hc=Ge([le(0,Mt),le(1,Rs)],hc);var nu=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],gC=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],lt;function mC(e,t){let s=0,o=t.length-1,a;if(e<t[0][0]||e>t[o][1])return!1;for(;o>=s;)if(a=s+o>>1,e>t[a][1])s=a+1;else if(e<t[a][0])o=a-1;else return!0;return!1}var vC=class{constructor(){if(this.version="6",!lt){lt=new Uint8Array(65536),lt.fill(1),lt[0]=0,lt.fill(0,1,32),lt.fill(0,127,160),lt.fill(2,4352,4448),lt[9001]=2,lt[9002]=2,lt.fill(2,11904,42192),lt[12351]=1,lt.fill(2,44032,55204),lt.fill(2,63744,64256),lt.fill(2,65040,65050),lt.fill(2,65072,65136),lt.fill(2,65280,65377),lt.fill(2,65504,65511);for(let e=0;e<nu.length;++e)lt.fill(0,nu[e][0],nu[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?lt[e]:mC(e,gC)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,t){let s=this.wcwidth(e),o=s===0&&t!==0;if(o){let a=Ii.extractWidth(t);a===0?o=!1:a>s&&(s=a)}return Ii.createPropertyValue(0,s,o)}},Ii=class xl{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new J,this.onChange=this._onChange.event;let t=new vC;this.register(t),this._active=t.version,this._activeProvider=t}static extractShouldJoin(t){return(t&1)!==0}static extractWidth(t){return t>>1&3}static extractCharKind(t){return t>>3}static createPropertyValue(t,s,o=!1){return(t&16777215)<<3|(s&3)<<1|(o?1:0)}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(t){if(!this._providers[t])throw new Error(`unknown Unicode version "${t}"`);this._active=t,this._activeProvider=this._providers[t],this._onChange.fire(t)}register(t){this._providers[t.version]=t}wcwidth(t){return this._activeProvider.wcwidth(t)}getStringCellWidth(t){let s=0,o=0,a=t.length;for(let h=0;h<a;++h){let c=t.charCodeAt(h);if(55296<=c&&c<=56319){if(++h>=a)return s+this.wcwidth(c);let p=t.charCodeAt(h);56320<=p&&p<=57343?c=(c-55296)*1024+p-56320+65536:s+=this.wcwidth(p)}let _=this.charProperties(c,o),g=xl.extractWidth(_);xl.extractShouldJoin(_)&&(g-=xl.extractWidth(o)),s+=g,o=_}return s}charProperties(t,s){return this._activeProvider.charProperties(t,s)}},yC=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}};function Zp(e){var t;let s=(t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1))==null?void 0:t.get(e.cols-1),o=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);o&&s&&(o.isWrapped=s[3]!==0&&s[3]!==32)}var xn=2147483647,SC=256,$m=class uc{constructor(t=32,s=32){if(this.maxLength=t,this.maxSubParamsLength=s,s>SC)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(t),this.length=0,this._subParams=new Int32Array(s),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(t),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(t){let s=new uc;if(!t.length)return s;for(let o=Array.isArray(t[0])?1:0;o<t.length;++o){let a=t[o];if(Array.isArray(a))for(let h=0;h<a.length;++h)s.addSubParam(a[h]);else s.addParam(a)}return s}clone(){let t=new uc(this.maxLength,this.maxSubParamsLength);return t.params.set(this.params),t.length=this.length,t._subParams.set(this._subParams),t._subParamsLength=this._subParamsLength,t._subParamsIdx.set(this._subParamsIdx),t._rejectDigits=this._rejectDigits,t._rejectSubDigits=this._rejectSubDigits,t._digitIsSub=this._digitIsSub,t}toArray(){let t=[];for(let s=0;s<this.length;++s){t.push(this.params[s]);let o=this._subParamsIdx[s]>>8,a=this._subParamsIdx[s]&255;a-o>0&&t.push(Array.prototype.slice.call(this._subParams,o,a))}return t}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(t){if(this._digitIsSub=!1,this.length>=this.maxLength){this._rejectDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=t>xn?xn:t}addSubParam(t){if(this._digitIsSub=!0,!!this.length){if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength){this._rejectSubDigits=!0;return}if(t<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=t>xn?xn:t,this._subParamsIdx[this.length-1]++}}hasSubParams(t){return(this._subParamsIdx[t]&255)-(this._subParamsIdx[t]>>8)>0}getSubParams(t){let s=this._subParamsIdx[t]>>8,o=this._subParamsIdx[t]&255;return o-s>0?this._subParams.subarray(s,o):null}getSubParamsAll(){let t={};for(let s=0;s<this.length;++s){let o=this._subParamsIdx[s]>>8,a=this._subParamsIdx[s]&255;a-o>0&&(t[s]=this._subParams.slice(o,a))}return t}addDigit(t){let s;if(this._rejectDigits||!(s=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let o=this._digitIsSub?this._subParams:this.params,a=o[s-1];o[s-1]=~a?Math.min(a*10+t,xn):t}},En=[],wC=class{constructor(){this._state=0,this._active=En,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let s=this._handlers[e];return s.push(t),{dispose:()=>{let o=s.indexOf(t);o!==-1&&s.splice(o,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=En}reset(){if(this._state===2)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=En,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||En,!this._active.length)this._handlerFb(this._id,"START");else for(let e=this._active.length-1;e>=0;e--)this._active[e].start()}_put(e,t,s){if(!this._active.length)this._handlerFb(this._id,"PUT",zl(e,t,s));else for(let o=this._active.length-1;o>=0;o--)this._active[o].put(e,t,s)}start(){this.reset(),this._state=1}put(e,t,s){if(this._state!==3){if(this._state===1)for(;t<s;){let o=e[t++];if(o===59){this._state=2,this._start();break}if(o<48||57<o){this._state=3;return}this._id===-1&&(this._id=0),this._id=this._id*10+o-48}this._state===2&&s-t>0&&this._put(e,t,s)}}end(e,t=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),!this._active.length)this._handlerFb(this._id,"END",e);else{let s=!1,o=this._active.length-1,a=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,s=t,a=this._stack.fallThrough,this._stack.paused=!1),!a&&s===!1){for(;o>=0&&(s=this._active[o].end(e),s!==!0);o--)if(s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,s;o--}for(;o>=0;o--)if(s=this._active[o].end(!1),s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,s}this._active=En,this._id=-1,this._state=0}}},Xt=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,t,s){this._hitLimit||(this._data+=zl(e,t,s),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then(s=>(this._data="",this._hitLimit=!1,s));return this._data="",this._hitLimit=!1,t}},Pn=[],CC=class{constructor(){this._handlers=Object.create(null),this._active=Pn,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=Pn}registerHandler(e,t){this._handlers[e]===void 0&&(this._handlers[e]=[]);let s=this._handlers[e];return s.push(t),{dispose:()=>{let o=s.indexOf(t);o!==-1&&s.splice(o,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=Pn,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||Pn,!this._active.length)this._handlerFb(this._ident,"HOOK",t);else for(let s=this._active.length-1;s>=0;s--)this._active[s].hook(t)}put(e,t,s){if(!this._active.length)this._handlerFb(this._ident,"PUT",zl(e,t,s));else for(let o=this._active.length-1;o>=0;o--)this._active[o].put(e,t,s)}unhook(e,t=!0){if(!this._active.length)this._handlerFb(this._ident,"UNHOOK",e);else{let s=!1,o=this._active.length-1,a=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,s=t,a=this._stack.fallThrough,this._stack.paused=!1),!a&&s===!1){for(;o>=0&&(s=this._active[o].unhook(e),s!==!0);o--)if(s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,s;o--}for(;o>=0;o--)if(s=this._active[o].unhook(!1),s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,s}this._active=Pn,this._ident=0}},Mn=new $m;Mn.addParam(0);var Jp=class{constructor(e){this._handler=e,this._data="",this._params=Mn,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():Mn,this._data="",this._hitLimit=!1}put(e,t,s){this._hitLimit||(this._data+=zl(e,t,s),this._data.length>1e7&&(this._data="",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then(s=>(this._params=Mn,this._data="",this._hitLimit=!1,s));return this._params=Mn,this._data="",this._hitLimit=!1,t}},bC=class{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,s,o){this.table[t<<8|e]=s<<4|o}addMany(e,t,s,o){for(let a=0;a<e.length;a++)this.table[t<<8|e[a]]=s<<4|o}},ir=160,kC=function(){let e=new bC(4095),t=Array.apply(null,Array(256)).map((_,g)=>g),s=(_,g)=>t.slice(_,g),o=s(32,127),a=s(0,24);a.push(25),a.push.apply(a,s(28,32));let h=s(0,14),c;e.setDefault(1,0),e.addMany(o,0,2,0);for(c in h)e.addMany([24,26,153,154],c,3,0),e.addMany(s(128,144),c,3,0),e.addMany(s(144,152),c,3,0),e.add(156,c,0,0),e.add(27,c,11,1),e.add(157,c,4,8),e.addMany([152,158,159],c,0,7),e.add(155,c,11,3),e.add(144,c,11,9);return e.addMany(a,0,3,0),e.addMany(a,1,3,1),e.add(127,1,0,1),e.addMany(a,8,0,8),e.addMany(a,3,3,3),e.add(127,3,0,3),e.addMany(a,4,3,4),e.add(127,4,0,4),e.addMany(a,6,3,6),e.addMany(a,5,3,5),e.add(127,5,0,5),e.addMany(a,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(o,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(s(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(o,7,0,7),e.addMany(a,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(s(64,127),3,7,0),e.addMany(s(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(s(48,60),4,8,4),e.addMany(s(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(s(32,64),6,0,6),e.add(127,6,0,6),e.addMany(s(64,127),6,0,0),e.addMany(s(32,48),3,9,5),e.addMany(s(32,48),5,9,5),e.addMany(s(48,64),5,0,6),e.addMany(s(64,127),5,7,0),e.addMany(s(32,48),4,9,5),e.addMany(s(32,48),1,9,2),e.addMany(s(32,48),2,9,2),e.addMany(s(48,127),2,10,0),e.addMany(s(48,80),1,10,0),e.addMany(s(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(s(96,127),1,10,0),e.add(80,1,11,9),e.addMany(a,9,0,9),e.add(127,9,0,9),e.addMany(s(28,32),9,0,9),e.addMany(s(32,48),9,9,12),e.addMany(s(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(a,11,0,11),e.addMany(s(32,128),11,0,11),e.addMany(s(28,32),11,0,11),e.addMany(a,10,0,10),e.add(127,10,0,10),e.addMany(s(28,32),10,0,10),e.addMany(s(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(s(32,48),10,9,12),e.addMany(a,12,0,12),e.add(127,12,0,12),e.addMany(s(28,32),12,0,12),e.addMany(s(32,48),12,9,12),e.addMany(s(48,64),12,0,11),e.addMany(s(64,127),12,12,13),e.addMany(s(64,127),10,12,13),e.addMany(s(64,127),9,12,13),e.addMany(a,13,13,13),e.addMany(o,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(ir,0,2,0),e.add(ir,8,5,8),e.add(ir,6,0,6),e.add(ir,11,0,11),e.add(ir,13,13,13),e}(),xC=class extends Ce{constructor(e=kC){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new $m,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(t,s,o)=>{},this._executeHandlerFb=t=>{},this._csiHandlerFb=(t,s)=>{},this._escHandlerFb=t=>{},this._errorHandlerFb=t=>t,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this._register(qe(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this._register(new wC),this._dcsParser=this._register(new CC),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(e,t=[64,126]){let s=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(s=e.prefix.charCodeAt(0),s&&60>s||s>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let a=0;a<e.intermediates.length;++a){let h=e.intermediates.charCodeAt(a);if(32>h||h>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");s<<=8,s|=h}}if(e.final.length!==1)throw new Error("final must be a single byte");let o=e.final.charCodeAt(0);if(t[0]>o||o>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return s<<=8,s|=o,s}identToString(e){let t=[];for(;e;)t.push(String.fromCharCode(e&255)),e>>=8;return t.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){let s=this._identifier(e,[48,126]);this._escHandlers[s]===void 0&&(this._escHandlers[s]=[]);let o=this._escHandlers[s];return o.push(t),{dispose:()=>{let a=o.indexOf(t);a!==-1&&o.splice(a,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){let s=this._identifier(e);this._csiHandlers[s]===void 0&&(this._csiHandlers[s]=[]);let o=this._csiHandlers[s];return o.push(t),{dispose:()=>{let a=o.indexOf(t);a!==-1&&o.splice(a,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,s,o,a){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=s,this._parseStack.transition=o,this._parseStack.chunkPos=a}parse(e,t,s){let o=0,a=0,h=0,c;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,h=this._parseStack.chunkPos+1;else{if(s===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let _=this._parseStack.handlers,g=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(s===!1&&g>-1){for(;g>=0&&(c=_[g](this._params),c!==!0);g--)if(c instanceof Promise)return this._parseStack.handlerPos=g,c}this._parseStack.handlers=[];break;case 4:if(s===!1&&g>-1){for(;g>=0&&(c=_[g](),c!==!0);g--)if(c instanceof Promise)return this._parseStack.handlerPos=g,c}this._parseStack.handlers=[];break;case 6:if(o=e[this._parseStack.chunkPos],c=this._dcsParser.unhook(o!==24&&o!==26,s),c)return c;o===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(o=e[this._parseStack.chunkPos],c=this._oscParser.end(o!==24&&o!==26,s),c)return c;o===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break}this._parseStack.state=0,h=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=this._parseStack.transition&15}for(let _=h;_<t;++_){switch(o=e[_],a=this._transitions.table[this.currentState<<8|(o<160?o:ir)],a>>4){case 2:for(let C=_+1;;++C){if(C>=t||(o=e[C])<32||o>126&&o<ir){this._printHandler(e,_,C),_=C-1;break}if(++C>=t||(o=e[C])<32||o>126&&o<ir){this._printHandler(e,_,C),_=C-1;break}if(++C>=t||(o=e[C])<32||o>126&&o<ir){this._printHandler(e,_,C),_=C-1;break}if(++C>=t||(o=e[C])<32||o>126&&o<ir){this._printHandler(e,_,C),_=C-1;break}}break;case 3:this._executeHandlers[o]?this._executeHandlers[o]():this._executeHandlerFb(o),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:_,code:o,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let g=this._csiHandlers[this._collect<<8|o],p=g?g.length-1:-1;for(;p>=0&&(c=g[p](this._params),c!==!0);p--)if(c instanceof Promise)return this._preserveStack(3,g,p,a,_),c;p<0&&this._csiHandlerFb(this._collect<<8|o,this._params),this.precedingJoinState=0;break;case 8:do switch(o){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(o-48)}while(++_<t&&(o=e[_])>47&&o<60);_--;break;case 9:this._collect<<=8,this._collect|=o;break;case 10:let y=this._escHandlers[this._collect<<8|o],v=y?y.length-1:-1;for(;v>=0&&(c=y[v](),c!==!0);v--)if(c instanceof Promise)return this._preserveStack(4,y,v,a,_),c;v<0&&this._escHandlerFb(this._collect<<8|o),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|o,this._params);break;case 13:for(let C=_+1;;++C)if(C>=t||(o=e[C])===24||o===26||o===27||o>127&&o<ir){this._dcsParser.put(e,_,C),_=C-1;break}break;case 14:if(c=this._dcsParser.unhook(o!==24&&o!==26),c)return this._preserveStack(6,[],0,a,_),c;o===27&&(a|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let C=_+1;;C++)if(C>=t||(o=e[C])<32||o>127&&o<ir){this._oscParser.put(e,_,C),_=C-1;break}break;case 6:if(c=this._oscParser.end(o!==24&&o!==26),c)return this._preserveStack(5,[],0,a,_),c;o===27&&(a|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break}this.currentState=a&15}}},EC=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,PC=/^[\da-f]+$/;function eg(e){if(!e)return;let t=e.toLowerCase();if(t.indexOf("rgb:")===0){t=t.slice(4);let s=EC.exec(t);if(s){let o=s[1]?15:s[4]?255:s[7]?4095:65535;return[Math.round(parseInt(s[1]||s[4]||s[7]||s[10],16)/o*255),Math.round(parseInt(s[2]||s[5]||s[8]||s[11],16)/o*255),Math.round(parseInt(s[3]||s[6]||s[9]||s[12],16)/o*255)]}}else if(t.indexOf("#")===0&&(t=t.slice(1),PC.exec(t)&&[3,6,9,12].includes(t.length))){let s=t.length/3,o=[0,0,0];for(let a=0;a<3;++a){let h=parseInt(t.slice(s*a,s*a+s),16);o[a]=s===1?h<<4:s===2?h:s===3?h>>4:h>>8}return o}}function ou(e,t){let s=e.toString(16),o=s.length<2?"0"+s:s;switch(t){case 4:return s[0];case 8:return o;case 12:return(o+o).slice(0,3);default:return o+o}}function LC(e,t=16){let[s,o,a]=e;return`rgb:${ou(s,t)}/${ou(o,t)}/${ou(a,t)}`}var RC={"(":0,")":1,"*":2,"+":3,"-":1,".":2},_i=131072,tg=10;function rg(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var ig=5e3,sg=0,DC=class extends Ce{constructor(e,t,s,o,a,h,c,_,g=new xC){super(),this._bufferService=e,this._charsetService=t,this._coreService=s,this._logService=o,this._optionsService=a,this._oscLinkService=h,this._coreMouseService=c,this._unicodeService=_,this._parser=g,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new tw,this._utf8Decoder=new rw,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=Ve.clone(),this._eraseAttrDataInternal=Ve.clone(),this._onRequestBell=this._register(new J),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this._register(new J),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this._register(new J),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this._register(new J),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this._register(new J),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this._register(new J),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this._register(new J),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this._register(new J),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this._register(new J),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this._register(new J),this.onLineFeed=this._onLineFeed.event,this._onScroll=this._register(new J),this.onScroll=this._onScroll.event,this._onTitleChange=this._register(new J),this.onTitleChange=this._onTitleChange.event,this._onColor=this._register(new J),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this._register(this._parser),this._dirtyRowTracker=new cc(this._bufferService),this._activeBuffer=this._bufferService.buffer,this._register(this._bufferService.buffers.onBufferActivate(p=>this._activeBuffer=p.activeBuffer)),this._parser.setCsiHandlerFallback((p,y)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(p),params:y.toArray()})}),this._parser.setEscHandlerFallback(p=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(p)})}),this._parser.setExecuteHandlerFallback(p=>{this._logService.debug("Unknown EXECUTE code: ",{code:p})}),this._parser.setOscHandlerFallback((p,y,v)=>{this._logService.debug("Unknown OSC code: ",{identifier:p,action:y,data:v})}),this._parser.setDcsHandlerFallback((p,y,v)=>{y==="HOOK"&&(v=v.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(p),action:y,payload:v})}),this._parser.setPrintHandler((p,y,v)=>this.print(p,y,v)),this._parser.registerCsiHandler({final:"@"},p=>this.insertChars(p)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},p=>this.scrollLeft(p)),this._parser.registerCsiHandler({final:"A"},p=>this.cursorUp(p)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},p=>this.scrollRight(p)),this._parser.registerCsiHandler({final:"B"},p=>this.cursorDown(p)),this._parser.registerCsiHandler({final:"C"},p=>this.cursorForward(p)),this._parser.registerCsiHandler({final:"D"},p=>this.cursorBackward(p)),this._parser.registerCsiHandler({final:"E"},p=>this.cursorNextLine(p)),this._parser.registerCsiHandler({final:"F"},p=>this.cursorPrecedingLine(p)),this._parser.registerCsiHandler({final:"G"},p=>this.cursorCharAbsolute(p)),this._parser.registerCsiHandler({final:"H"},p=>this.cursorPosition(p)),this._parser.registerCsiHandler({final:"I"},p=>this.cursorForwardTab(p)),this._parser.registerCsiHandler({final:"J"},p=>this.eraseInDisplay(p,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},p=>this.eraseInDisplay(p,!0)),this._parser.registerCsiHandler({final:"K"},p=>this.eraseInLine(p,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},p=>this.eraseInLine(p,!0)),this._parser.registerCsiHandler({final:"L"},p=>this.insertLines(p)),this._parser.registerCsiHandler({final:"M"},p=>this.deleteLines(p)),this._parser.registerCsiHandler({final:"P"},p=>this.deleteChars(p)),this._parser.registerCsiHandler({final:"S"},p=>this.scrollUp(p)),this._parser.registerCsiHandler({final:"T"},p=>this.scrollDown(p)),this._parser.registerCsiHandler({final:"X"},p=>this.eraseChars(p)),this._parser.registerCsiHandler({final:"Z"},p=>this.cursorBackwardTab(p)),this._parser.registerCsiHandler({final:"`"},p=>this.charPosAbsolute(p)),this._parser.registerCsiHandler({final:"a"},p=>this.hPositionRelative(p)),this._parser.registerCsiHandler({final:"b"},p=>this.repeatPrecedingCharacter(p)),this._parser.registerCsiHandler({final:"c"},p=>this.sendDeviceAttributesPrimary(p)),this._parser.registerCsiHandler({prefix:">",final:"c"},p=>this.sendDeviceAttributesSecondary(p)),this._parser.registerCsiHandler({final:"d"},p=>this.linePosAbsolute(p)),this._parser.registerCsiHandler({final:"e"},p=>this.vPositionRelative(p)),this._parser.registerCsiHandler({final:"f"},p=>this.hVPosition(p)),this._parser.registerCsiHandler({final:"g"},p=>this.tabClear(p)),this._parser.registerCsiHandler({final:"h"},p=>this.setMode(p)),this._parser.registerCsiHandler({prefix:"?",final:"h"},p=>this.setModePrivate(p)),this._parser.registerCsiHandler({final:"l"},p=>this.resetMode(p)),this._parser.registerCsiHandler({prefix:"?",final:"l"},p=>this.resetModePrivate(p)),this._parser.registerCsiHandler({final:"m"},p=>this.charAttributes(p)),this._parser.registerCsiHandler({final:"n"},p=>this.deviceStatus(p)),this._parser.registerCsiHandler({prefix:"?",final:"n"},p=>this.deviceStatusPrivate(p)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},p=>this.softReset(p)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},p=>this.setCursorStyle(p)),this._parser.registerCsiHandler({final:"r"},p=>this.setScrollRegion(p)),this._parser.registerCsiHandler({final:"s"},p=>this.saveCursor(p)),this._parser.registerCsiHandler({final:"t"},p=>this.windowOptions(p)),this._parser.registerCsiHandler({final:"u"},p=>this.restoreCursor(p)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},p=>this.insertColumns(p)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},p=>this.deleteColumns(p)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},p=>this.selectProtected(p)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},p=>this.requestMode(p,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},p=>this.requestMode(p,!1)),this._parser.setExecuteHandler(H.BEL,()=>this.bell()),this._parser.setExecuteHandler(H.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(H.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(H.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(H.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(H.BS,()=>this.backspace()),this._parser.setExecuteHandler(H.HT,()=>this.tab()),this._parser.setExecuteHandler(H.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(H.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(An.IND,()=>this.index()),this._parser.setExecuteHandler(An.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(An.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new Xt(p=>(this.setTitle(p),this.setIconName(p),!0))),this._parser.registerOscHandler(1,new Xt(p=>this.setIconName(p))),this._parser.registerOscHandler(2,new Xt(p=>this.setTitle(p))),this._parser.registerOscHandler(4,new Xt(p=>this.setOrReportIndexedColor(p))),this._parser.registerOscHandler(8,new Xt(p=>this.setHyperlink(p))),this._parser.registerOscHandler(10,new Xt(p=>this.setOrReportFgColor(p))),this._parser.registerOscHandler(11,new Xt(p=>this.setOrReportBgColor(p))),this._parser.registerOscHandler(12,new Xt(p=>this.setOrReportCursorColor(p))),this._parser.registerOscHandler(104,new Xt(p=>this.restoreIndexedColor(p))),this._parser.registerOscHandler(110,new Xt(p=>this.restoreFgColor(p))),this._parser.registerOscHandler(111,new Xt(p=>this.restoreBgColor(p))),this._parser.registerOscHandler(112,new Xt(p=>this.restoreCursorColor(p))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let p in at)this._parser.registerEscHandler({intermediates:"(",final:p},()=>this.selectCharset("("+p)),this._parser.registerEscHandler({intermediates:")",final:p},()=>this.selectCharset(")"+p)),this._parser.registerEscHandler({intermediates:"*",final:p},()=>this.selectCharset("*"+p)),this._parser.registerEscHandler({intermediates:"+",final:p},()=>this.selectCharset("+"+p)),this._parser.registerEscHandler({intermediates:"-",final:p},()=>this.selectCharset("-"+p)),this._parser.registerEscHandler({intermediates:".",final:p},()=>this.selectCharset("."+p)),this._parser.registerEscHandler({intermediates:"/",final:p},()=>this.selectCharset("/"+p));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(p=>(this._logService.error("Parsing error: ",p),p)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new Jp((p,y)=>this.requestStatusString(p,y)))}getAttrData(){return this._curAttrData}_preserveStack(e,t,s,o){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=s,this._parseStack.position=o}_logSlowResolvingAsync(e){this._logService.logLevel<=3&&Promise.race([e,new Promise((t,s)=>setTimeout(()=>s("#SLOW_TIMEOUT"),ig))]).catch(t=>{if(t!=="#SLOW_TIMEOUT")throw t;console.warn(`async parser handler taking longer than ${ig} ms`)})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let s,o=this._activeBuffer.x,a=this._activeBuffer.y,h=0,c=this._parseStack.paused;if(c){if(s=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(s),s;o=this._parseStack.cursorStartX,a=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>_i&&(h=this._parseStack.position+_i)}if(this._logService.logLevel<=1&&this._logService.debug(`parsing data${typeof e=="string"?` "${e}"`:` "${Array.prototype.map.call(e,p=>String.fromCharCode(p)).join("")}"`}`,typeof e=="string"?e.split("").map(p=>p.charCodeAt(0)):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<_i&&(this._parseBuffer=new Uint32Array(Math.min(e.length,_i))),c||this._dirtyRowTracker.clearRange(),e.length>_i)for(let p=h;p<e.length;p+=_i){let y=p+_i<e.length?p+_i:e.length,v=typeof e=="string"?this._stringDecoder.decode(e.substring(p,y),this._parseBuffer):this._utf8Decoder.decode(e.subarray(p,y),this._parseBuffer);if(s=this._parser.parse(this._parseBuffer,v))return this._preserveStack(o,a,v,p),this._logSlowResolvingAsync(s),s}else if(!c){let p=typeof e=="string"?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(s=this._parser.parse(this._parseBuffer,p))return this._preserveStack(o,a,p,0),this._logSlowResolvingAsync(s),s}(this._activeBuffer.x!==o||this._activeBuffer.y!==a)&&this._onCursorMove.fire();let _=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),g=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);g<this._bufferService.rows&&this._onRequestRefreshRows.fire({start:Math.min(g,this._bufferService.rows-1),end:Math.min(_,this._bufferService.rows-1)})}print(e,t,s){let o,a,h=this._charsetService.charset,c=this._optionsService.rawOptions.screenReaderMode,_=this._bufferService.cols,g=this._coreService.decPrivateModes.wraparound,p=this._coreService.modes.insertMode,y=this._curAttrData,v=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&s-t>0&&v.getWidth(this._activeBuffer.x-1)===2&&v.setCellFromCodepoint(this._activeBuffer.x-1,0,1,y);let C=this._parser.precedingJoinState;for(let w=t;w<s;++w){if(o=e[w],o<127&&h){let X=h[String.fromCharCode(o)];X&&(o=X.charCodeAt(0))}let A=this._unicodeService.charProperties(o,C);a=Ii.extractWidth(A);let T=Ii.extractShouldJoin(A),M=T?Ii.extractWidth(C):0;if(C=A,c&&this._onA11yChar.fire(gi(o)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+a-M>_){if(g){let X=v,ie=this._activeBuffer.x-M;for(this._activeBuffer.x=M,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),v=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),M>0&&v instanceof Dn&&v.copyCellsFrom(X,ie,0,M,!1);ie<_;)X.setCellFromCodepoint(ie++,0,1,y)}else if(this._activeBuffer.x=_-1,a===2)continue}if(T&&this._activeBuffer.x){let X=v.getWidth(this._activeBuffer.x-1)?1:2;v.addCodepointToCell(this._activeBuffer.x-X,o,a);for(let ie=a-M;--ie>=0;)v.setCellFromCodepoint(this._activeBuffer.x++,0,0,y);continue}if(p&&(v.insertCells(this._activeBuffer.x,a-M,this._activeBuffer.getNullCell(y)),v.getWidth(_-1)===2&&v.setCellFromCodepoint(_-1,0,1,y)),v.setCellFromCodepoint(this._activeBuffer.x++,o,a,y),a>0)for(;--a;)v.setCellFromCodepoint(this._activeBuffer.x++,0,0,y)}this._parser.precedingJoinState=C,this._activeBuffer.x<_&&s-t>0&&v.getWidth(this._activeBuffer.x)===0&&!v.hasContent(this._activeBuffer.x)&&v.setCellFromCodepoint(this._activeBuffer.x,0,1,y),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return e.final==="t"&&!e.prefix&&!e.intermediates?this._parser.registerCsiHandler(e,s=>rg(s.params[0],this._optionsService.rawOptions.windowOptions)?t(s):!0):this._parser.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new Jp(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new Xt(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var e;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&e.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);t.hasWidth(this._activeBuffer.x)&&!t.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._activeBuffer.lines.length-1,Math.max(0,this._activeBuffer.y)),this._logService.debug("restricted cursor",{x:this._activeBuffer.x,y:this._activeBuffer.y,scrollTop:this._activeBuffer.scrollTop,scrollBottom:this._activeBuffer.scrollBottom,rows:this._bufferService.rows-1,origin:this._coreService.decPrivateModes.origin}),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._logService.debug("setting cursor",{x:e,y:t,origin:this._coreService.decPrivateModes.origin}),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._logService.debug("after assigning cursor",{x:this._activeBuffer.x,y:this._activeBuffer.y,origin:this._coreService.decPrivateModes.origin}),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){let t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){let t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){let t=e.params[0];return t===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:t===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){let t=e.params[0];return t===1&&(this._curAttrData.bg|=536870912),(t===2||t===0)&&(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,s,o=!1,a=!1){let h=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);h.replaceCells(t,s,this._activeBuffer.getNullCell(this._eraseAttrData()),a),o&&(h.isWrapped=!1)}_resetBufferLine(e,t=!1){let s=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);s&&(s.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),s.isWrapped=!1)}eraseInDisplay(e,t=!1){this._restrictCursor(this._bufferService.cols);let s;switch(e.params[0]){case 0:for(s=this._activeBuffer.y,this._dirtyRowTracker.markDirty(s),this._eraseInBufferLine(s++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);s<this._bufferService.rows;s++)this._resetBufferLine(s,t);this._dirtyRowTracker.markDirty(s);break;case 1:for(s=this._activeBuffer.y,this._dirtyRowTracker.markDirty(s),this._eraseInBufferLine(s,0,this._activeBuffer.x+1,!0,t),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(s+1).isWrapped=!1);s--;)this._resetBufferLine(s,t);this._dirtyRowTracker.markDirty(0);break;case 2:for(s=this._bufferService.rows,this._dirtyRowTracker.markDirty(s-1);s--;)this._resetBufferLine(s,t);this._dirtyRowTracker.markDirty(0);break;case 3:let o=this._activeBuffer.lines.length-this._bufferService.rows;o>0&&(this._activeBuffer.lines.trimStart(o),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-o,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-o,0),this._onScroll.fire(0));break}return!0}eraseInLine(e,t=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t);break}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let s=this._activeBuffer.ybase+this._activeBuffer.y,o=this._bufferService.rows-1-this._activeBuffer.scrollBottom,a=this._bufferService.rows-1+this._activeBuffer.ybase-o+1;for(;t--;)this._activeBuffer.lines.splice(a-1,1),this._activeBuffer.lines.splice(s,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let s=this._activeBuffer.ybase+this._activeBuffer.y,o;for(o=this._bufferService.rows-1-this._activeBuffer.scrollBottom,o=this._bufferService.rows-1+this._activeBuffer.ybase-o;t--;)this._activeBuffer.lines.splice(s,1),this._activeBuffer.lines.splice(o,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(Ve));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let s=this._activeBuffer.scrollTop;s<=this._activeBuffer.scrollBottom;++s){let o=this._activeBuffer.lines.get(this._activeBuffer.ybase+s);o.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),o.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let s=this._activeBuffer.scrollTop;s<=this._activeBuffer.scrollBottom;++s){let o=this._activeBuffer.lines.get(this._activeBuffer.ybase+s);o.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),o.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let s=this._activeBuffer.scrollTop;s<=this._activeBuffer.scrollBottom;++s){let o=this._activeBuffer.lines.get(this._activeBuffer.ybase+s);o.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),o.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let t=e.params[0]||1;for(let s=this._activeBuffer.scrollTop;s<=this._activeBuffer.scrollBottom;++s){let o=this._activeBuffer.lines.get(this._activeBuffer.ybase+s);o.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),o.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();let t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){let t=this._parser.precedingJoinState;if(!t)return!0;let s=e.params[0]||1,o=Ii.extractWidth(t),a=this._activeBuffer.x-o,h=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(a),c=new Uint32Array(h.length*s),_=0;for(let p=0;p<h.length;){let y=h.codePointAt(p)||0;c[_++]=y,p+=y>65535?2:1}let g=_;for(let p=1;p<s;++p)c.copyWithin(g,0,_),g+=_;return this.print(c,0,g),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(H.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(H.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(H.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(H.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(H.ESC+"[>83;40003;0c")),!0}_is(e){return(this._optionsService.rawOptions.termName+"").indexOf(e)===0}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0;break}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,Oi),this._charsetService.setgCharset(1,Oi),this._charsetService.setgCharset(2,Oi),this._charsetService.setgCharset(3,Oi);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0;break}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1;break}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),e.params[t]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(void 0),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1;break}return!0}requestMode(e,t){(A=>(A[A.NOT_RECOGNIZED=0]="NOT_RECOGNIZED",A[A.SET=1]="SET",A[A.RESET=2]="RESET",A[A.PERMANENTLY_SET=3]="PERMANENTLY_SET",A[A.PERMANENTLY_RESET=4]="PERMANENTLY_RESET"))(i={});let s=this._coreService.decPrivateModes,{activeProtocol:o,activeEncoding:a}=this._coreMouseService,h=this._coreService,{buffers:c,cols:_}=this._bufferService,{active:g,alt:p}=c,y=this._optionsService.rawOptions,v=(A,T)=>(h.triggerDataEvent(`${H.ESC}[${t?"":"?"}${A};${T}$y`),!0),C=A=>A?1:2,w=e.params[0];return t?w===2?v(w,4):w===4?v(w,C(h.modes.insertMode)):w===12?v(w,3):w===20?v(w,C(y.convertEol)):v(w,0):w===1?v(w,C(s.applicationCursorKeys)):w===3?v(w,y.windowOptions.setWinLines?_===80?2:_===132?1:0:0):w===6?v(w,C(s.origin)):w===7?v(w,C(s.wraparound)):w===8?v(w,3):w===9?v(w,C(o==="X10")):w===12?v(w,C(y.cursorBlink)):w===25?v(w,C(!h.isCursorHidden)):w===45?v(w,C(s.reverseWraparound)):w===66?v(w,C(s.applicationKeypad)):w===67?v(w,4):w===1e3?v(w,C(o==="VT200")):w===1002?v(w,C(o==="DRAG")):w===1003?v(w,C(o==="ANY")):w===1004?v(w,C(s.sendFocus)):w===1005?v(w,4):w===1006?v(w,C(a==="SGR")):w===1015?v(w,4):w===1016?v(w,C(a==="SGR_PIXELS")):w===1048?v(w,1):w===47||w===1047||w===1049?v(w,C(g===p)):w===2004?v(w,C(s.bracketedPasteMode)):v(w,0)}_updateAttrColor(e,t,s,o,a){return t===2?(e|=50331648,e&=-16777216,e|=Kn.fromColorRGB([s,o,a])):t===5&&(e&=-50331904,e|=33554432|s&255),e}_extractColor(e,t,s){let o=[0,0,-1,0,0,0],a=0,h=0;do{if(o[h+a]=e.params[t+h],e.hasSubParams(t+h)){let c=e.getSubParams(t+h),_=0;do o[1]===5&&(a=1),o[h+_+1+a]=c[_];while(++_<c.length&&_+h+1+a<o.length);break}if(o[1]===5&&h+a>=2||o[1]===2&&h+a>=5)break;o[1]&&(a=1)}while(++h+t<e.length&&h+a<o.length);for(let c=2;c<o.length;++c)o[c]===-1&&(o[c]=0);switch(o[0]){case 38:s.fg=this._updateAttrColor(s.fg,o[1],o[3],o[4],o[5]);break;case 48:s.bg=this._updateAttrColor(s.bg,o[1],o[3],o[4],o[5]);break;case 58:s.extended=s.extended.clone(),s.extended.underlineColor=this._updateAttrColor(s.extended.underlineColor,o[1],o[3],o[4],o[5])}return h}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,e===0&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=Ve.fg,e.bg=Ve.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(e.length===1&&e.params[0]===0)return this._processSGR0(this._curAttrData),!0;let t=e.length,s,o=this._curAttrData;for(let a=0;a<t;a++)s=e.params[a],s>=30&&s<=37?(o.fg&=-50331904,o.fg|=16777216|s-30):s>=40&&s<=47?(o.bg&=-50331904,o.bg|=16777216|s-40):s>=90&&s<=97?(o.fg&=-50331904,o.fg|=16777216|s-90|8):s>=100&&s<=107?(o.bg&=-50331904,o.bg|=16777216|s-100|8):s===0?this._processSGR0(o):s===1?o.fg|=134217728:s===3?o.bg|=67108864:s===4?(o.fg|=268435456,this._processUnderline(e.hasSubParams(a)?e.getSubParams(a)[0]:1,o)):s===5?o.fg|=536870912:s===7?o.fg|=67108864:s===8?o.fg|=1073741824:s===9?o.fg|=2147483648:s===2?o.bg|=134217728:s===21?this._processUnderline(2,o):s===22?(o.fg&=-134217729,o.bg&=-134217729):s===23?o.bg&=-67108865:s===24?(o.fg&=-268435457,this._processUnderline(0,o)):s===25?o.fg&=-536870913:s===27?o.fg&=-67108865:s===28?o.fg&=-1073741825:s===29?o.fg&=2147483647:s===39?(o.fg&=-67108864,o.fg|=Ve.fg&16777215):s===49?(o.bg&=-67108864,o.bg|=Ve.bg&16777215):s===38||s===48||s===58?a+=this._extractColor(e,a,o):s===53?o.bg|=1073741824:s===55?o.bg&=-1073741825:s===59?(o.extended=o.extended.clone(),o.extended.underlineColor=-1,o.updateExtended()):s===100?(o.fg&=-67108864,o.fg|=Ve.fg&16777215,o.bg&=-67108864,o.bg|=Ve.bg&16777215):this._logService.debug("Unknown SGR attribute: %d.",s);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${H.ESC}[0n`);break;case 6:let t=this._activeBuffer.y+1,s=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${H.ESC}[${t};${s}R`);break}return!0}deviceStatusPrivate(e){switch(e.params[0]){case 6:let t=this._activeBuffer.y+1,s=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${H.ESC}[?${t};${s}R`);break}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=Ve.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){let t=e.length===0?1:e.params[0];if(t===0)this._coreService.decPrivateModes.cursorStyle=void 0,this._coreService.decPrivateModes.cursorBlink=void 0;else{switch(t){case 1:case 2:this._coreService.decPrivateModes.cursorStyle="block";break;case 3:case 4:this._coreService.decPrivateModes.cursorStyle="underline";break;case 5:case 6:this._coreService.decPrivateModes.cursorStyle="bar";break}let s=t%2===1;this._coreService.decPrivateModes.cursorBlink=s}return!0}setScrollRegion(e){let t=e.params[0]||1,s;return(e.length<2||(s=e.params[1])>this._bufferService.rows||s===0)&&(s=this._bufferService.rows),s>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=s-1,this._setCursor(0,0)),!0}windowOptions(e){if(!rg(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;let t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:t!==2&&this._onRequestWindowsOptionsReport.fire(0);break;case 16:this._onRequestWindowsOptionsReport.fire(1);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${H.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:(t===0||t===2)&&(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>tg&&this._windowTitleStack.shift()),(t===0||t===1)&&(this._iconNameStack.push(this._iconName),this._iconNameStack.length>tg&&this._iconNameStack.shift());break;case 23:(t===0||t===2)&&this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),(t===0||t===1)&&this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop());break}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){let t=[],s=e.split(";");for(;s.length>1;){let o=s.shift(),a=s.shift();if(/^\d+$/.exec(o)){let h=parseInt(o);if(ng(h))if(a==="?")t.push({type:0,index:h});else{let c=eg(a);c&&t.push({type:1,index:h,color:c})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){let t=e.indexOf(";");if(t===-1)return!0;let s=e.slice(0,t).trim(),o=e.slice(t+1);return o?this._createHyperlink(s,o):s.trim()?!1:this._finishHyperlink()}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();let s=e.split(":"),o,a=s.findIndex(h=>h.startsWith("id="));return a!==-1&&(o=s[a].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:o,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){let s=e.split(";");for(let o=0;o<s.length&&!(t>=this._specialColors.length);++o,++t)if(s[o]==="?")this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{let a=eg(s[o]);a&&this._onColor.fire([{type:1,index:this._specialColors[t],color:a}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;let t=[],s=e.split(";");for(let o=0;o<s.length;++o)if(/^\d+$/.exec(s[o])){let a=parseInt(s[o]);ng(a)&&t.push({type:2,index:a})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,Oi),!0}selectCharset(e){return e.length!==2?(this.selectDefaultCharset(),!0):(e[0]==="/"||this._charsetService.setgCharset(RC[e[0]],at[e[1]]||Oi),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=Ve.clone(),this._eraseAttrDataInternal=Ve.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=this._curAttrData.bg&67108863,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){let e=new sr;e.content=1<<22|69,e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){let s=this._activeBuffer.ybase+this._activeBuffer.y+t,o=this._activeBuffer.lines.get(s);o&&(o.fill(e),o.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){let s=h=>(this._coreService.triggerDataEvent(`${H.ESC}${h}${H.ESC}\\`),!0),o=this._bufferService.buffer,a=this._optionsService.rawOptions;return s(e==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:e==='"p'?'P1$r61;1"p':e==="r"?`P1$r${o.scrollTop+1};${o.scrollBottom+1}r`:e==="m"?"P1$r0m":e===" q"?`P1$r${{block:2,underline:4,bar:6}[a.cursorStyle]-(a.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}},cc=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(sg=e,e=t,t=sg),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};cc=Ge([le(0,Mt)],cc);function ng(e){return 0<=e&&e<256}var TC=5e7,og=12,MC=50,BC=class extends Ce{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this._register(new J),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(t!==void 0&&this._syncCalls>t){this._syncCalls=0;return}if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;this._isSyncWriting=!0;let s;for(;s=this._writeBuffer.shift();){this._action(s);let o=this._callbacks.shift();o&&o()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>TC)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput){this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),this._innerWrite();return}setTimeout(()=>this._innerWrite())}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(e=0,t=!0){let s=e||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let o=this._writeBuffer[this._bufferOffset],a=this._action(o,t);if(a){let c=_=>Date.now()-s>=og?setTimeout(()=>this._innerWrite(0,_)):this._innerWrite(s,_);a.catch(_=>(queueMicrotask(()=>{throw _}),Promise.resolve(!1))).then(c);return}let h=this._callbacks[this._bufferOffset];if(h&&h(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-s>=og)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>MC&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}},dc=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){let t=this._bufferService.buffer;if(e.id===void 0){let _=t.addMarker(t.ybase+t.y),g={data:e,id:this._nextId++,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(g,_)),this._dataByLinkId.set(g.id,g),g.id}let s=e,o=this._getEntryIdKey(s),a=this._entriesWithId.get(o);if(a)return this.addLineToLink(a.id,t.ybase+t.y),a.id;let h=t.addMarker(t.ybase+t.y),c={id:this._nextId++,key:this._getEntryIdKey(s),data:s,lines:[h]};return h.onDispose(()=>this._removeMarkerFromLink(c,h)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(e,t){let s=this._dataByLinkId.get(e);if(s&&s.lines.every(o=>o.line!==t)){let o=this._bufferService.buffer.addMarker(t);s.lines.push(o),o.onDispose(()=>this._removeMarkerFromLink(s,o))}}getLinkData(e){var t;return(t=this._dataByLinkId.get(e))==null?void 0:t.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,t){let s=e.lines.indexOf(t);s!==-1&&(e.lines.splice(s,1),e.lines.length===0&&(e.data.id!==void 0&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};dc=Ge([le(0,Mt)],dc);var lg=!1,OC=class extends Ce{constructor(e){super(),this._windowsWrappingHeuristics=this._register(new Es),this._onBinary=this._register(new J),this.onBinary=this._onBinary.event,this._onData=this._register(new J),this.onData=this._onData.event,this._onLineFeed=this._register(new J),this.onLineFeed=this._onLineFeed.event,this._onResize=this._register(new J),this.onResize=this._onResize.event,this._onWriteParsed=this._register(new J),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this._register(new J),this._instantiationService=new sC,this.optionsService=this._register(new _C(e)),this._instantiationService.setService(Ut,this.optionsService),this._bufferService=this._register(this._instantiationService.createInstance(lc)),this._instantiationService.setService(Mt,this._bufferService),this._logService=this._register(this._instantiationService.createInstance(oc)),this._instantiationService.setService(dm,this._logService),this.coreService=this._register(this._instantiationService.createInstance(ac)),this._instantiationService.setService(Rs,this.coreService),this.coreMouseService=this._register(this._instantiationService.createInstance(hc)),this._instantiationService.setService(cm,this.coreMouseService),this.unicodeService=this._register(this._instantiationService.createInstance(Ii)),this._instantiationService.setService(ow,this.unicodeService),this._charsetService=this._instantiationService.createInstance(yC),this._instantiationService.setService(nw,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(dc),this._instantiationService.setService(fm,this._oscLinkService),this._inputHandler=this._register(new DC(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this._register(wt.forward(this._inputHandler.onLineFeed,this._onLineFeed)),this._register(this._inputHandler),this._register(wt.forward(this._bufferService.onResize,this._onResize)),this._register(wt.forward(this.coreService.onData,this._onData)),this._register(wt.forward(this.coreService.onBinary,this._onBinary)),this._register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom(!0))),this._register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this._register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this._register(this._bufferService.onScroll(()=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this._register(new BC((t,s)=>this._inputHandler.parse(t,s))),this._register(wt.forward(this._writeBuffer.onWriteParsed,this._onWriteParsed))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this._register(new J),this._onScroll.event(e=>{var t;(t=this._onScrollApi)==null||t.fire(e.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(let t in e)this.optionsService.options[t]=e[t]}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=3&&!lg&&(this._logService.warn("writeSync is unreliable and will be removed soon."),lg=!0),this._writeBuffer.writeSync(e,t)}input(e,t=!0){this.coreService.triggerDataEvent(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,Um),t=Math.max(t,jm),this._bufferService.resize(e,t))}scroll(e,t=!1){e=e||Ve.clone(),this._bufferService.scroll(e,t)}scrollLines(e,t){this._bufferService.scrollLines(e,t)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1,t=this.optionsService.rawOptions.windowsPty;t&&t.buildNumber!==void 0&&t.buildNumber!==void 0?e=t.backend==="conpty"&&t.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let e=[];e.push(this.onLineFeed(Zp.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},()=>(Zp(this._bufferService),!1))),this._windowsWrappingHeuristics.value=qe(()=>{for(let t of e)t.dispose()})}}},AC={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};function NC(e,t,s,o){var a;let h={type:0,cancel:!1,key:void 0},c=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:e.key==="UIKeyInputUpArrow"?t?h.key=H.ESC+"OA":h.key=H.ESC+"[A":e.key==="UIKeyInputLeftArrow"?t?h.key=H.ESC+"OD":h.key=H.ESC+"[D":e.key==="UIKeyInputRightArrow"?t?h.key=H.ESC+"OC":h.key=H.ESC+"[C":e.key==="UIKeyInputDownArrow"&&(t?h.key=H.ESC+"OB":h.key=H.ESC+"[B");break;case 8:h.key=e.ctrlKey?"\b":H.DEL,e.altKey&&(h.key=H.ESC+h.key);break;case 9:if(e.shiftKey){h.key=H.ESC+"[Z";break}h.key=H.HT,h.cancel=!0;break;case 13:h.key=e.altKey?H.ESC+H.CR:H.CR,h.cancel=!0;break;case 27:h.key=H.ESC,e.altKey&&(h.key=H.ESC+H.ESC),h.cancel=!0;break;case 37:if(e.metaKey)break;c?(h.key=H.ESC+"[1;"+(c+1)+"D",h.key===H.ESC+"[1;3D"&&(h.key=H.ESC+(s?"b":"[1;5D"))):t?h.key=H.ESC+"OD":h.key=H.ESC+"[D";break;case 39:if(e.metaKey)break;c?(h.key=H.ESC+"[1;"+(c+1)+"C",h.key===H.ESC+"[1;3C"&&(h.key=H.ESC+(s?"f":"[1;5C"))):t?h.key=H.ESC+"OC":h.key=H.ESC+"[C";break;case 38:if(e.metaKey)break;c?(h.key=H.ESC+"[1;"+(c+1)+"A",!s&&h.key===H.ESC+"[1;3A"&&(h.key=H.ESC+"[1;5A")):t?h.key=H.ESC+"OA":h.key=H.ESC+"[A";break;case 40:if(e.metaKey)break;c?(h.key=H.ESC+"[1;"+(c+1)+"B",!s&&h.key===H.ESC+"[1;3B"&&(h.key=H.ESC+"[1;5B")):t?h.key=H.ESC+"OB":h.key=H.ESC+"[B";break;case 45:!e.shiftKey&&!e.ctrlKey&&(h.key=H.ESC+"[2~");break;case 46:c?h.key=H.ESC+"[3;"+(c+1)+"~":h.key=H.ESC+"[3~";break;case 36:c?h.key=H.ESC+"[1;"+(c+1)+"H":t?h.key=H.ESC+"OH":h.key=H.ESC+"[H";break;case 35:c?h.key=H.ESC+"[1;"+(c+1)+"F":t?h.key=H.ESC+"OF":h.key=H.ESC+"[F";break;case 33:e.shiftKey?h.type=2:e.ctrlKey?h.key=H.ESC+"[5;"+(c+1)+"~":h.key=H.ESC+"[5~";break;case 34:e.shiftKey?h.type=3:e.ctrlKey?h.key=H.ESC+"[6;"+(c+1)+"~":h.key=H.ESC+"[6~";break;case 112:c?h.key=H.ESC+"[1;"+(c+1)+"P":h.key=H.ESC+"OP";break;case 113:c?h.key=H.ESC+"[1;"+(c+1)+"Q":h.key=H.ESC+"OQ";break;case 114:c?h.key=H.ESC+"[1;"+(c+1)+"R":h.key=H.ESC+"OR";break;case 115:c?h.key=H.ESC+"[1;"+(c+1)+"S":h.key=H.ESC+"OS";break;case 116:c?h.key=H.ESC+"[15;"+(c+1)+"~":h.key=H.ESC+"[15~";break;case 117:c?h.key=H.ESC+"[17;"+(c+1)+"~":h.key=H.ESC+"[17~";break;case 118:c?h.key=H.ESC+"[18;"+(c+1)+"~":h.key=H.ESC+"[18~";break;case 119:c?h.key=H.ESC+"[19;"+(c+1)+"~":h.key=H.ESC+"[19~";break;case 120:c?h.key=H.ESC+"[20;"+(c+1)+"~":h.key=H.ESC+"[20~";break;case 121:c?h.key=H.ESC+"[21;"+(c+1)+"~":h.key=H.ESC+"[21~";break;case 122:c?h.key=H.ESC+"[23;"+(c+1)+"~":h.key=H.ESC+"[23~";break;case 123:c?h.key=H.ESC+"[24;"+(c+1)+"~":h.key=H.ESC+"[24~";break;default:if(e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey)e.keyCode>=65&&e.keyCode<=90?h.key=String.fromCharCode(e.keyCode-64):e.keyCode===32?h.key=H.NUL:e.keyCode>=51&&e.keyCode<=55?h.key=String.fromCharCode(e.keyCode-51+27):e.keyCode===56?h.key=H.DEL:e.keyCode===219?h.key=H.ESC:e.keyCode===220?h.key=H.FS:e.keyCode===221&&(h.key=H.GS);else if((!s||o)&&e.altKey&&!e.metaKey){let _=(a=AC[e.keyCode])==null?void 0:a[e.shiftKey?1:0];if(_)h.key=H.ESC+_;else if(e.keyCode>=65&&e.keyCode<=90){let g=e.ctrlKey?e.keyCode-64:e.keyCode+32,p=String.fromCharCode(g);e.shiftKey&&(p=p.toUpperCase()),h.key=H.ESC+p}else if(e.keyCode===32)h.key=H.ESC+(e.ctrlKey?H.NUL:" ");else if(e.key==="Dead"&&e.code.startsWith("Key")){let g=e.code.slice(3,4);e.shiftKey||(g=g.toLowerCase()),h.key=H.ESC+g,h.cancel=!0}}else s&&!e.altKey&&!e.ctrlKey&&!e.shiftKey&&e.metaKey?e.keyCode===65&&(h.type=1):e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&e.key.length===1?h.key=e.key:e.key&&e.ctrlKey&&(e.key==="_"&&(h.key=H.US),e.key==="@"&&(h.key=H.NUL));break}return h}var et=0,IC=class{constructor(e){this._getKey=e,this._array=[],this._insertedValues=[],this._flushInsertedTask=new Ol,this._isFlushingInserted=!1,this._deletedIndices=[],this._flushDeletedTask=new Ol,this._isFlushingDeleted=!1}clear(){this._array.length=0,this._insertedValues.length=0,this._flushInsertedTask.clear(),this._isFlushingInserted=!1,this._deletedIndices.length=0,this._flushDeletedTask.clear(),this._isFlushingDeleted=!1}insert(e){this._flushCleanupDeleted(),this._insertedValues.length===0&&this._flushInsertedTask.enqueue(()=>this._flushInserted()),this._insertedValues.push(e)}_flushInserted(){let e=this._insertedValues.sort((a,h)=>this._getKey(a)-this._getKey(h)),t=0,s=0,o=new Array(this._array.length+this._insertedValues.length);for(let a=0;a<o.length;a++)s>=this._array.length||this._getKey(e[t])<=this._getKey(this._array[s])?(o[a]=e[t],t++):o[a]=this._array[s++];this._array=o,this._insertedValues.length=0}_flushCleanupInserted(){!this._isFlushingInserted&&this._insertedValues.length>0&&this._flushInsertedTask.flush()}delete(e){if(this._flushCleanupInserted(),this._array.length===0)return!1;let t=this._getKey(e);if(t===void 0||(et=this._search(t),et===-1)||this._getKey(this._array[et])!==t)return!1;do if(this._array[et]===e)return this._deletedIndices.length===0&&this._flushDeletedTask.enqueue(()=>this._flushDeleted()),this._deletedIndices.push(et),!0;while(++et<this._array.length&&this._getKey(this._array[et])===t);return!1}_flushDeleted(){this._isFlushingDeleted=!0;let e=this._deletedIndices.sort((a,h)=>a-h),t=0,s=new Array(this._array.length-e.length),o=0;for(let a=0;a<this._array.length;a++)e[t]===a?t++:s[o++]=this._array[a];this._array=s,this._deletedIndices.length=0,this._isFlushingDeleted=!1}_flushCleanupDeleted(){!this._isFlushingDeleted&&this._deletedIndices.length>0&&this._flushDeletedTask.flush()}*getKeyIterator(e){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(et=this._search(e),!(et<0||et>=this._array.length)&&this._getKey(this._array[et])===e))do yield this._array[et];while(++et<this._array.length&&this._getKey(this._array[et])===e)}forEachByKey(e,t){if(this._flushCleanupInserted(),this._flushCleanupDeleted(),this._array.length!==0&&(et=this._search(e),!(et<0||et>=this._array.length)&&this._getKey(this._array[et])===e))do t(this._array[et]);while(++et<this._array.length&&this._getKey(this._array[et])===e)}values(){return this._flushCleanupInserted(),this._flushCleanupDeleted(),[...this._array].values()}_search(e){let t=0,s=this._array.length-1;for(;s>=t;){let o=t+s>>1,a=this._getKey(this._array[o]);if(a>e)s=o-1;else if(a<e)t=o+1;else{for(;o>0&&this._getKey(this._array[o-1])===e;)o--;return o}}return t}},lu=0,ag=0,zC=class extends Ce{constructor(){super(),this._decorations=new IC(e=>e==null?void 0:e.marker.line),this._onDecorationRegistered=this._register(new J),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this._register(new J),this.onDecorationRemoved=this._onDecorationRemoved.event,this._register(qe(()=>this.reset()))}get decorations(){return this._decorations.values()}registerDecoration(e){if(e.marker.isDisposed)return;let t=new WC(e);if(t){let s=t.marker.onDispose(()=>t.dispose()),o=t.onDispose(()=>{o.dispose(),t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),s.dispose())});this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(let e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,s){let o=0,a=0;for(let h of this._decorations.getKeyIterator(t))o=h.options.x??0,a=o+(h.options.width??1),e>=o&&e<a&&(!s||(h.options.layer??"bottom")===s)&&(yield h)}forEachDecorationAtCell(e,t,s,o){this._decorations.forEachByKey(t,a=>{lu=a.options.x??0,ag=lu+(a.options.width??1),e>=lu&&e<ag&&(!s||(a.options.layer??"bottom")===s)&&o(a)})}},WC=class extends vi{constructor(e){super(),this.options=e,this.onRenderEmitter=this.add(new J),this.onRender=this.onRenderEmitter.event,this._onDispose=this.add(new J),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=Fe.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=Fe.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}},FC=1e3,HC=class{constructor(e,t=FC){this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,s){this._rowCount=s,e=e!==void 0?e:0,t=t!==void 0?t:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,e):e,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,t):t;let o=Date.now();if(o-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=o,this._innerRefresh();else if(!this._additionalRefreshRequested){let a=o-this._lastRefreshMs,h=this._debounceThresholdMS-a;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},h)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}},hg=20,Al=class extends Ce{constructor(e,t,s,o){super(),this._terminal=e,this._coreBrowserService=s,this._renderService=o,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="";let a=this._coreBrowserService.mainDocument;this._accessibilityContainer=a.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=a.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let h=0;h<this._terminal.rows;h++)this._rowElements[h]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[h]);if(this._topBoundaryFocusListener=h=>this._handleBoundaryFocus(h,0),this._bottomBoundaryFocusListener=h=>this._handleBoundaryFocus(h,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=a.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this._register(new HC(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this._register(this._terminal.onResize(h=>this._handleResize(h.rows))),this._register(this._terminal.onRender(h=>this._refreshRows(h.start,h.end))),this._register(this._terminal.onScroll(()=>this._refreshRows())),this._register(this._terminal.onA11yChar(h=>this._handleChar(h))),this._register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this._register(this._terminal.onA11yTab(h=>this._handleTab(h))),this._register(this._terminal.onKey(h=>this._handleKey(h.key))),this._register(this._terminal.onBlur(()=>this._clearLiveRegion())),this._register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._register(Se(a,"selectionchange",()=>this._handleSelectionChange())),this._register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRowsDimensions(),this._refreshRows(),this._register(qe(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<hg+1&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===hg+1&&(this._liveRegion.textContent+=Ru.get())))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){let s=this._terminal.buffer,o=s.lines.length.toString();for(let a=e;a<=t;a++){let h=s.lines.get(s.ydisp+a),c=[],_=(h==null?void 0:h.translateToString(!0,void 0,void 0,c))||"",g=(s.ydisp+a+1).toString(),p=this._rowElements[a];p&&(_.length===0?(p.innerText="",this._rowColumns.set(p,[0,1])):(p.textContent=_,this._rowColumns.set(p,c)),p.setAttribute("aria-posinset",g),p.setAttribute("aria-setsize",o),this._alignRowWidth(p))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,t){let s=e.target,o=this._rowElements[t===0?1:this._rowElements.length-2],a=s.getAttribute("aria-posinset"),h=t===0?"1":`${this._terminal.buffer.lines.length}`;if(a===h||e.relatedTarget!==o)return;let c,_;if(t===0?(c=s,_=this._rowElements.pop(),this._rowContainer.removeChild(_)):(c=this._rowElements.shift(),_=s,this._rowContainer.removeChild(c)),c.removeEventListener("focus",this._topBoundaryFocusListener),_.removeEventListener("focus",this._bottomBoundaryFocusListener),t===0){let g=this._createAccessibilityTreeNode();this._rowElements.unshift(g),this._rowContainer.insertAdjacentElement("afterbegin",g)}else{let g=this._createAccessibilityTreeNode();this._rowElements.push(g),this._rowContainer.appendChild(g)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(t===0?-1:1),this._rowElements[t===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){var e;if(this._rowElements.length===0)return;let t=this._coreBrowserService.mainDocument.getSelection();if(!t)return;if(t.isCollapsed){this._rowContainer.contains(t.anchorNode)&&this._terminal.clearSelection();return}if(!t.anchorNode||!t.focusNode){console.error("anchorNode and/or focusNode are null");return}let s={node:t.anchorNode,offset:t.anchorOffset},o={node:t.focusNode,offset:t.focusOffset};if((s.node.compareDocumentPosition(o.node)&Node.DOCUMENT_POSITION_PRECEDING||s.node===o.node&&s.offset>o.offset)&&([s,o]=[o,s]),s.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(s={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(s.node))return;let a=this._rowElements.slice(-1)[0];if(o.node.compareDocumentPosition(a)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(o={node:a,offset:((e=a.textContent)==null?void 0:e.length)??0}),!this._rowContainer.contains(o.node))return;let h=({node:g,offset:p})=>{let y=g instanceof Text?g.parentNode:g,v=parseInt(y==null?void 0:y.getAttribute("aria-posinset"),10)-1;if(isNaN(v))return console.warn("row is invalid. Race condition?"),null;let C=this._rowColumns.get(y);if(!C)return console.warn("columns is null. Race condition?"),null;let w=p<C.length?C[p]:C.slice(-1)[0]+1;return w>=this._terminal.cols&&(++v,w=0),{row:v,column:w}},c=h(s),_=h(o);if(!(!c||!_)){if(c.row>_.row||c.row===_.row&&c.column>=_.column)throw new Error("invalid range");this._terminal.select(c.column,c.row,(_.row-c.row)*this._terminal.cols-c.column+_.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let t=this._rowContainer.children.length;t<this._terminal.rows;t++)this._rowElements[t]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[t]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){Object.assign(this._accessibilityContainer.style,{width:`${this._renderService.dimensions.css.canvas.width}px`,fontSize:`${this._terminal.options.fontSize}px`}),this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e]),this._alignRowWidth(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}_alignRowWidth(e){var t,s;e.style.transform="";let o=e.getBoundingClientRect().width,a=(s=(t=this._rowColumns.get(e))==null?void 0:t.slice(-1))==null?void 0:s[0];if(!a)return;let h=a*this._renderService.dimensions.css.cell.width;e.style.transform=`scaleX(${h/o})`}};Al=Ge([le(1,Pc),le(2,$r),le(3,Kr)],Al);var fc=class extends Ce{constructor(e,t,s,o,a){super(),this._element=e,this._mouseService=t,this._renderService=s,this._bufferService=o,this._linkProviderService=a,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this._register(new J),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this._register(new J),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this._register(qe(()=>{var h;Fi(this._linkCacheDisposables),this._linkCacheDisposables.length=0,this._lastMouseEvent=void 0,(h=this._activeProviderReplies)==null||h.clear()})),this._register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this._register(Se(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this._register(Se(this._element,"mousemove",this._handleMouseMove.bind(this))),this._register(Se(this._element,"mousedown",this._handleMouseDown.bind(this))),this._register(Se(this._element,"mouseup",this._handleMouseUp.bind(this)))}get currentLink(){return this._currentLink}_handleMouseMove(e){this._lastMouseEvent=e;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;let s=e.composedPath();for(let o=0;o<s.length;o++){let a=s[o];if(a.classList.contains("xterm"))break;if(a.classList.contains("xterm-hover"))return}(!this._lastBufferCell||t.x!==this._lastBufferCell.x||t.y!==this._lastBufferCell.y)&&(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized){this._clearCurrentLink(),this._askForLink(e,!1),this._wasResized=!1;return}this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){var s,o;(!this._activeProviderReplies||!t)&&((s=this._activeProviderReplies)==null||s.forEach(h=>{h==null||h.forEach(c=>{c.link.dispose&&c.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);let a=!1;for(let[h,c]of this._linkProviderService.linkProviders.entries())t?(o=this._activeProviderReplies)!=null&&o.get(h)&&(a=this._checkLinkProviderResult(h,e,a)):c.provideLinks(e.y,_=>{var g,p;if(this._isMouseOut)return;let y=_==null?void 0:_.map(v=>({link:v}));(g=this._activeProviderReplies)==null||g.set(h,y),a=this._checkLinkProviderResult(h,e,a),((p=this._activeProviderReplies)==null?void 0:p.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)})}_removeIntersectingLinks(e,t){let s=new Set;for(let o=0;o<t.size;o++){let a=t.get(o);if(a)for(let h=0;h<a.length;h++){let c=a[h],_=c.link.range.start.y<e?0:c.link.range.start.x,g=c.link.range.end.y>e?this._bufferService.cols:c.link.range.end.x;for(let p=_;p<=g;p++){if(s.has(p)){a.splice(h--,1);break}s.add(p)}}}}_checkLinkProviderResult(e,t,s){var o;if(!this._activeProviderReplies)return s;let a=this._activeProviderReplies.get(e),h=!1;for(let c=0;c<e;c++)(!this._activeProviderReplies.has(c)||this._activeProviderReplies.get(c))&&(h=!0);if(!h&&a){let c=a.find(_=>this._linkAtPosition(_.link,t));c&&(s=!0,this._handleNewLink(c))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!s)for(let c=0;c<this._activeProviderReplies.size;c++){let _=(o=this._activeProviderReplies.get(c))==null?void 0:o.find(g=>this._linkAtPosition(g.link,t));if(_){s=!0,this._handleNewLink(_);break}}return s}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._currentLink)return;let t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink&&UC(this._mouseDownLink.link,this._currentLink.link)&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){!this._currentLink||!this._lastMouseEvent||(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,Fi(this._linkCacheDisposables),this._linkCacheDisposables.length=0)}_handleNewLink(e){if(!this._lastMouseEvent)return;let t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0?!0:e.link.decorations.underline,pointerCursor:e.link.decorations===void 0?!0:e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>{var s,o;return(o=(s=this._currentLink)==null?void 0:s.state)==null?void 0:o.decorations.pointerCursor},set:s=>{var o;(o=this._currentLink)!=null&&o.state&&this._currentLink.state.decorations.pointerCursor!==s&&(this._currentLink.state.decorations.pointerCursor=s,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",s))}},underline:{get:()=>{var s,o;return(o=(s=this._currentLink)==null?void 0:s.state)==null?void 0:o.decorations.underline},set:s=>{var o,a,h;(o=this._currentLink)!=null&&o.state&&((h=(a=this._currentLink)==null?void 0:a.state)==null?void 0:h.decorations.underline)!==s&&(this._currentLink.state.decorations.underline=s,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,s))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(s=>{if(!this._currentLink)return;let o=s.start===0?0:s.start+1+this._bufferService.buffer.ydisp,a=this._bufferService.buffer.ydisp+1+s.end;if(this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=a&&(this._clearCurrentLink(o,a),this._lastMouseEvent)){let h=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);h&&this._askForLink(h,!1)}})))}_linkHover(e,t,s){var o;(o=this._currentLink)!=null&&o.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(s,t.text)}_fireUnderlineEvent(e,t){let s=e.range,o=this._bufferService.buffer.ydisp,a=this._createLinkUnderlineEvent(s.start.x-1,s.start.y-o-1,s.end.x,s.end.y-o-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(a)}_linkLeave(e,t,s){var o;(o=this._currentLink)!=null&&o.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(s,t.text)}_linkAtPosition(e,t){let s=e.range.start.y*this._bufferService.cols+e.range.start.x,o=e.range.end.y*this._bufferService.cols+e.range.end.x,a=t.y*this._bufferService.cols+t.x;return s<=a&&a<=o}_positionFromMouseEvent(e,t,s){let o=s.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(o)return{x:o[0],y:o[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,s,o,a){return{x1:e,y1:t,x2:s,y2:o,cols:this._bufferService.cols,fg:a}}};fc=Ge([le(1,Lc),le(2,Kr),le(3,Mt),le(4,pm)],fc);function UC(e,t){return e.text===t.text&&e.range.start.x===t.range.start.x&&e.range.start.y===t.range.start.y&&e.range.end.x===t.range.end.x&&e.range.end.y===t.range.end.y}var jC=class extends OC{constructor(e={}){super(e),this._linkifier=this._register(new Es),this.browser=Dm,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this._register(new Es),this._onCursorMove=this._register(new J),this.onCursorMove=this._onCursorMove.event,this._onKey=this._register(new J),this.onKey=this._onKey.event,this._onRender=this._register(new J),this.onRender=this._onRender.event,this._onSelectionChange=this._register(new J),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this._register(new J),this.onTitleChange=this._onTitleChange.event,this._onBell=this._register(new J),this.onBell=this._onBell.event,this._onFocus=this._register(new J),this._onBlur=this._register(new J),this._onA11yCharEmitter=this._register(new J),this._onA11yTabEmitter=this._register(new J),this._onWillOpen=this._register(new J),this._setup(),this._decorationService=this._instantiationService.createInstance(zC),this._instantiationService.setService(Vn,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(I1),this._instantiationService.setService(pm,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(Tu)),this._register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this._register(this._inputHandler.onRequestRefreshRows(t=>this.refresh((t==null?void 0:t.start)??0,(t==null?void 0:t.end)??this.rows-1))),this._register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this._register(this._inputHandler.onRequestReset(()=>this.reset())),this._register(this._inputHandler.onRequestWindowsOptionsReport(t=>this._reportWindowsOptions(t))),this._register(this._inputHandler.onColor(t=>this._handleColorEvent(t))),this._register(wt.forward(this._inputHandler.onCursorMove,this._onCursorMove)),this._register(wt.forward(this._inputHandler.onTitleChange,this._onTitleChange)),this._register(wt.forward(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this._register(wt.forward(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this._register(this._bufferService.onResize(t=>this._afterResize(t.cols,t.rows))),this._register(qe(()=>{var t,s;this._customKeyEventHandler=void 0,(s=(t=this.element)==null?void 0:t.parentNode)==null||s.removeChild(this.element)}))}get linkifier(){return this._linkifier.value}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(e){if(this._themeService)for(let t of e){let s,o="";switch(t.index){case 256:s="foreground",o="10";break;case 257:s="background",o="11";break;case 258:s="cursor",o="12";break;default:s="ansi",o="4;"+t.index}switch(t.type){case 0:let a=Be.toColorRGB(s==="ansi"?this._themeService.colors.ansi[t.index]:this._themeService.colors[s]);this.coreService.triggerDataEvent(`${H.ESC}]${o};${LC(a)}${Qu.ST}`);break;case 1:if(s==="ansi")this._themeService.modifyColors(h=>h.ansi[t.index]=tt.toColor(...t.color));else{let h=s;this._themeService.modifyColors(c=>c[h]=tt.toColor(...t.color))}break;case 2:this._themeService.restoreColor(t.index);break}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Al,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(H.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var e;return(e=this.textarea)==null?void 0:e.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(H.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;let s=Math.min(this.buffer.x,this.cols-1),o=this._renderService.dimensions.css.cell.height,a=t.getWidth(s),h=this._renderService.dimensions.css.cell.width*a,c=this.buffer.y*this._renderService.dimensions.css.cell.height,_=s*this._renderService.dimensions.css.cell.width;this.textarea.style.left=_+"px",this.textarea.style.top=c+"px",this.textarea.style.width=h+"px",this.textarea.style.height=o+"px",this.textarea.style.lineHeight=o+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this._register(Se(this.element,"copy",t=>{this.hasSelection()&&JS(t,this._selectionService)}));let e=t=>ew(t,this.textarea,this.coreService,this.optionsService);this._register(Se(this.textarea,"paste",e)),this._register(Se(this.element,"paste",e)),Tm?this._register(Se(this.element,"mousedown",t=>{t.button===2&&cp(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this._register(Se(this.element,"contextmenu",t=>{cp(t,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),Ac&&this._register(Se(this.element,"auxclick",t=>{t.button===1&&om(t,this.textarea,this.screenElement)}))}_bindKeys(){this._register(Se(this.textarea,"keyup",e=>this._keyUp(e),!0)),this._register(Se(this.textarea,"keydown",e=>this._keyDown(e),!0)),this._register(Se(this.textarea,"keypress",e=>this._keyPress(e),!0)),this._register(Se(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this._register(Se(this.textarea,"compositionupdate",e=>this._compositionHelper.compositionupdate(e))),this._register(Se(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this._register(Se(this.textarea,"input",e=>this._inputEvent(e),!0)),this._register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(e){var t,s;if(!e)throw new Error("Terminal requires a parent element.");if(e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((t=this.element)==null?void 0:t.ownerDocument.defaultView)&&this._coreBrowserService&&((s=this.element)==null?void 0:s.isConnected)){this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView);return}this._document=e.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);let o=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),o.appendChild(this._viewportElement),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._register(Se(this.screenElement,"mousemove",c=>this.updateCursorStyle(c))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),o.appendChild(this.screenElement);let a=this.textarea=this._document.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",Lu.get()),Om||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._register(this.optionsService.onSpecificOptionChange("disableStdin",()=>a.readOnly=this.optionsService.rawOptions.disableStdin)),this.textarea.readOnly=this.optionsService.rawOptions.disableStdin,this._coreBrowserService=this._register(this._instantiationService.createInstance(A1,this.textarea,e.ownerDocument.defaultView??window,this._document??(typeof window<"u"?window.document:null))),this._instantiationService.setService($r,this._coreBrowserService),this._register(Se(this.textarea,"focus",c=>this._handleTextAreaFocus(c))),this._register(Se(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(tc,this._document,this._helperContainer),this._instantiationService.setService(Wl,this._charSizeService),this._themeService=this._instantiationService.createInstance(nc),this._instantiationService.setService(Ds,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(Bl),this._instantiationService.setService(_m,this._characterJoinerService),this._renderService=this._register(this._instantiationService.createInstance(ic,this.rows,this.screenElement)),this._instantiationService.setService(Kr,this._renderService),this._register(this._renderService.onRenderedViewportChange(c=>this._onRender.fire(c))),this.onResize(c=>this._renderService.resize(c.cols,c.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(Zu,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(rc),this._instantiationService.setService(Lc,this._mouseService);let h=this._linkifier.value=this._register(this._instantiationService.createInstance(fc,this.screenElement));this.element.appendChild(o);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this._register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this._register(this.onBlur(()=>this._renderService.handleBlur())),this._register(this.onFocus(()=>this._renderService.handleFocus())),this._viewport=this._register(this._instantiationService.createInstance(Yu,this.element,this.screenElement)),this._register(this._viewport.onRequestScrollLines(c=>{super.scrollLines(c,!1),this.refresh(0,this.rows-1)})),this._selectionService=this._register(this._instantiationService.createInstance(sc,this.element,this.screenElement,h)),this._instantiationService.setService(aw,this._selectionService),this._register(this._selectionService.onRequestScrollLines(c=>this.scrollLines(c.amount,c.suppressScrollEvent))),this._register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this._register(this._selectionService.onRequestRedraw(c=>this._renderService.handleSelectionChanged(c.start,c.end,c.columnSelectMode))),this._register(this._selectionService.onLinuxMouseSelection(c=>{this.textarea.value=c,this.textarea.focus(),this.textarea.select()})),this._register(this._onScroll.event(()=>this._selectionService.refresh())),this._register(this._instantiationService.createInstance(Gu,this.screenElement)),this._register(Se(this.element,"mousedown",c=>this._selectionService.handleMouseDown(c))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Al,this)),this._register(this.optionsService.onSpecificOptionChange("screenReaderMode",c=>this._handleScreenReaderModeOptionChange(c))),this.options.overviewRuler.width&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(Tl,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRuler",c=>{!this._overviewRulerRenderer&&c&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this._register(this._instantiationService.createInstance(Tl,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(ec,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){let e=this,t=this.element;function s(h){let c=e._mouseService.getMouseReportCoords(h,e.screenElement);if(!c)return!1;let _,g;switch(h.overrideType||h.type){case"mousemove":g=32,h.buttons===void 0?(_=3,h.button!==void 0&&(_=h.button<3?h.button:3)):_=h.buttons&1?0:h.buttons&4?1:h.buttons&2?2:3;break;case"mouseup":g=0,_=h.button<3?h.button:3;break;case"mousedown":g=1,_=h.button<3?h.button:3;break;case"wheel":if(e._customWheelEventHandler&&e._customWheelEventHandler(h)===!1)return!1;let p=h.deltaY;if(p===0)return!1;g=p<0?0:1,_=4;break;default:return!1}return g===void 0||_===void 0||_>4?!1:e.coreMouseService.triggerMouseEvent({col:c.col,row:c.row,x:c.x,y:c.y,button:_,action:g,ctrl:h.ctrlKey,alt:h.altKey,shift:h.shiftKey})}let o={mouseup:null,wheel:null,mousedrag:null,mousemove:null},a={mouseup:h=>(s(h),h.buttons||(this._document.removeEventListener("mouseup",o.mouseup),o.mousedrag&&this._document.removeEventListener("mousemove",o.mousedrag)),this.cancel(h)),wheel:h=>(s(h),this.cancel(h,!0)),mousedrag:h=>{h.buttons&&s(h)},mousemove:h=>{h.buttons||s(h)}};this._register(this.coreMouseService.onProtocolChange(h=>{h?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(h)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),h&8?o.mousemove||(t.addEventListener("mousemove",a.mousemove),o.mousemove=a.mousemove):(t.removeEventListener("mousemove",o.mousemove),o.mousemove=null),h&16?o.wheel||(t.addEventListener("wheel",a.wheel,{passive:!1}),o.wheel=a.wheel):(t.removeEventListener("wheel",o.wheel),o.wheel=null),h&2?o.mouseup||(o.mouseup=a.mouseup):(this._document.removeEventListener("mouseup",o.mouseup),o.mouseup=null),h&4?o.mousedrag||(o.mousedrag=a.mousedrag):(this._document.removeEventListener("mousemove",o.mousedrag),o.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this._register(Se(t,"mousedown",h=>{if(h.preventDefault(),this.focus(),!(!this.coreMouseService.areMouseEventsActive||this._selectionService.shouldForceSelection(h)))return s(h),o.mouseup&&this._document.addEventListener("mouseup",o.mouseup),o.mousedrag&&this._document.addEventListener("mousemove",o.mousedrag),this.cancel(h)})),this._register(Se(t,"wheel",h=>{if(!o.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(h)===!1)return!1;if(!this.buffer.hasScrollback){if(h.deltaY===0)return!1;let c=H.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(h.deltaY<0?"A":"B");return this.coreService.triggerDataEvent(c,!0),this.cancel(h,!0)}}},{passive:!1}))}refresh(e,t){var s;(s=this._renderService)==null||s.refreshRows(e,t)}updateCursorStyle(e){var t;(t=this._selectionService)!=null&&t.shouldColumnSelect(e)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t){this._viewport?this._viewport.scrollLines(e):super.scrollLines(e,t),this.refresh(0,this.rows-1)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(e){e&&this._viewport?this._viewport.scrollToLine(this.buffer.ybase,!0):this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){let t=e-this._bufferService.buffer.ydisp;t!==0&&this.scrollLines(t)}paste(e){nm(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}attachCustomWheelEventHandler(e){this._customWheelEventHandler=e}registerLinkProvider(e){return this._linkProviderService.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return this._selectionService?this._selectionService.hasSelection:!1}select(e,t,s){this._selectionService.setSelection(e,t,s)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(!(!this._selectionService||!this._selectionService.hasSelection))return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var e;(e=this._selectionService)==null||e.clearSelection()}selectAll(){var e;(e=this._selectionService)==null||e.selectAll()}selectLines(e,t){var s;(s=this._selectionService)==null||s.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;let t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(!0),!1;!t&&(e.key==="Dead"||e.key==="AltGraph")&&(this._unprocessedDeadKey=!0);let s=NC(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),s.type===3||s.type===2){let o=this.rows-1;return this.scrollLines(s.type===2?-o:o),this.cancel(e,!0)}if(s.type===1&&this.selectAll(),this._isThirdLevelShift(this.browser,e)||(s.cancel&&this.cancel(e,!0),!s.key)||e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.key.length===1&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)return!0;if(this._unprocessedDeadKey)return this._unprocessedDeadKey=!1,!0;if((s.key===H.ETX||s.key===H.CR)&&(this.textarea.value=""),this._onKey.fire({key:s.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(s.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey)return this.cancel(e,!0);this._keyDownHandled=!0}_isThirdLevelShift(e,t){let s=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return t.type==="keypress"?s:s&&(!t.keyCode||t.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,!(this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)&&($C(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(e)===!1)return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(e.which===null||e.which===void 0)t=e.keyCode;else if(e.which!==0&&e.charCode!==0)t=e.which;else return!1;return!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)?!1:(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,!0)}_inputEvent(e){if(e.data&&e.inputType==="insertText"&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){if(e===this.cols&&t===this.rows){this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure();return}super.resize(e,t)}_afterResize(e,t){var s;(s=this._charSizeService)==null||s.measure()}clear(){if(!(this.buffer.ybase===0&&this.buffer.y===0)){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(Ve));this._onScroll.fire({position:this.buffer.ydisp}),this.refresh(0,this.rows-1)}}reset(){var e;this.options.rows=this.rows,this.options.cols=this.cols;let t=this._customKeyEventHandler;this._setup(),super.reset(),(e=this._selectionService)==null||e.reset(),this._decorationService.reset(),this._customKeyEventHandler=t,this.refresh(0,this.rows-1)}clearTextureAtlas(){var e;(e=this._renderService)==null||e.clearTextureAtlas()}_reportFocus(){var e;(e=this.element)!=null&&e.classList.contains("focus")?this.coreService.triggerDataEvent(H.ESC+"[I"):this.coreService.triggerDataEvent(H.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case 0:let t=this._renderService.dimensions.css.canvas.width.toFixed(0),s=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${H.ESC}[4;${s};${t}t`);break;case 1:let o=this._renderService.dimensions.css.cell.width.toFixed(0),a=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${H.ESC}[6;${a};${o}t`);break}}cancel(e,t){if(!(!this.options.cancelEvents&&!t))return e.preventDefault(),e.stopPropagation(),!1}get emptyBufferLines(){var e;let t=0,s=this.buffer;for(let o=s.lines.length-1;o>=0&&((e=s.lines.get(o))==null?void 0:e.translateToString(!0))==="";o--)t++;return t}get screen(){var e;return(e=this.element)==null?void 0:e.getElementsByClassName("xterm-screen")[0]}get cellDimensions(){if(!this.screen)return{width:0,height:0};let{width:e,height:t}=this.screen.getBoundingClientRect();return{width:e/this.cols,height:t/this.rows}}calculateCells(e,t){if(!this.element||!this.screen)return{width:0,height:0};let{width:s,height:o}=this.cellDimensions;return s=Math.ceil(e/s),o=Math.ceil(t/o),{width:s,height:o}}attachElementToMarker(e,t){let s=this.registerDecoration({marker:t,layer:"top"}),o=null;return new Promise(a=>{let h=!1;s==null||s.onRender(async c=>{var _;let{width:g}=((_=this.screen)==null?void 0:_.getBoundingClientRect())||{width:0};c.style.width="fit-content",c.style.height="fit-content",e.style.width=`${g}px`,Array.from(c.children).includes(e)||c.appendChild(e);let p=e.getBoundingClientRect(),{height:y}=this.calculateCells(p.width,p.height);if(y!==o&&t.line>-1){let v=o!==null?y-o:Math.max(y-1,0);if(!v){h||(h=!0,a(s));return}this._logService.info("rendering decoration",{height:o,newHeight:y,deltaRows:v,marker:t});let C=0;this.buffer.y+this.buffer.ybase==t.line&&(C=1),t.line-=C,v>0?this._bufferService.insertLines(t.line+1,v):v<0&&this._bufferService.deleteLines(t.line+1,-v),t.line+=C,o=y,this._logService.info("inserted/deleted newlines",{y:this.buffer.y,ydisp:this.buffer.ydisp,ybase:this.buffer.ybase,deltaRows:v}),this.refresh(0,this.rows),await new Promise(w=>window.requestAnimationFrame(w)),h||(h=!0,a(s))}})})}};function $C(e){return e.keyCode===16||e.keyCode===17||e.keyCode===18}var KC=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){let s={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(s),t.dispose=()=>this._wrappedAddonDispose(s),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let s=0;s<this._addons.length;s++)if(this._addons[s]===e){t=s;break}if(t===-1)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}},VC=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new sr)}translateToString(e,t,s){return this._line.translateToString(e,t,s)}},ug=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){let t=this._buffer.lines.get(e);if(t)return new VC(t)}getNullCell(){return new sr}},qC=class extends Ce{constructor(e){super(),this._core=e,this._onBufferChange=this._register(new J),this.onBufferChange=this._onBufferChange.event,this._normal=new ug(this._core.buffers.normal,"normal"),this._alternate=new ug(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}},XC=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,s=>t(s.toArray()))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,(s,o)=>t(s,o.toArray()))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}},YC=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}},GC=["cols","rows"],br=0,QC=class extends Ce{constructor(e){super(),this._core=this._register(new jC(e)),this._addonManager=this._register(new KC),this._publicOptions={...this._core.options};let t=o=>this._core.options[o],s=(o,a)=>{this._checkReadonlyOptions(o),this._core.options[o]=a};for(let o in this._core.options){let a={get:t.bind(this,o),set:s.bind(this,o)};Object.defineProperty(this._publicOptions,o,a)}}_checkReadonlyOptions(e){if(GC.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new XC(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new YC(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this._register(new qC(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let e=this._core.coreService.decPrivateModes,t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any";break}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(let t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}input(e,t=!0){this._core.input(e,t)}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}attachCustomWheelEventHandler(e){this._core.attachCustomWheelEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){return this._checkProposedApi(),this._verifyPositiveIntegers(e.x??0,e.width??0,e.height??0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,s){this._verifyIntegers(e,t,s),this._core.select(e,t,s)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write(`\r
`,t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return{get promptLabel(){return Lu.get()},set promptLabel(e){Lu.set(e)},get tooMuchOutput(){return Ru.get()},set tooMuchOutput(e){Ru.set(e)}}}_verifyIntegers(...e){for(br of e)if(br===1/0||isNaN(br)||br%1!==0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(br of e)if(br&&(br===1/0||isNaN(br)||br%1!==0||br<0))throw new Error("This API only accepts positive integers")}attachElementToMarker(e,t){return this._core.attachElementToMarker(e,t)}};class ZC extends QC{constructor(){super(...arguments),Object.defineProperty(this,"process",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:!1})}getActiveBuffer(t=!1,s=!0){const o=this.buffer.active;let a="";for(let h=0;h<o.length;h++){if(s&&h<o.viewportY)continue;const c=o.getLine(h),_=c==null?void 0:c.translateToString(!1);if(t){const g=" ".repeat((Math.log(o.length)*Math.LOG10E+1|0)-(Math.log(h)*Math.LOG10E+1|0||1)),p=o.cursorY+o.viewportY===h,y=this.markers.filter(v=>v.line===h);a+=`[${g}${h}] `+_,a+=c!=null&&c.isWrapped?"[wraps]":"",a+=p?"<-- cursor":"",y.forEach(v=>{a+=`<-- marker [${v.id}]`}),a+=`
`}else a+=_+`
`}return a}printBuffer(){if(!this.debug)return;this.getActiveBuffer(this.debug);const t=this.buffer.active;t.length,t.cursorY,t.cursorX,t.viewportY,t.baseY,this.rows,this.cols,this.markers}async writeAsync(t){return new Promise(s=>super.write(t,s))}async write(t,s){return this.writeAsync(t).then(()=>s==null?void 0:s())}async writelnAsync(t){return new Promise(s=>super.writeln(t,s))}async writeln(t,s){return this.writelnAsync(t).then(()=>s==null?void 0:s())}getWritableStream(){return new WritableStream({write:async t=>{this.write(t)}})}registerDecoration(t){const s=super.registerDecoration(t);if(s)return{...s,hasRendered:new Promise(o=>{const a=s==null?void 0:s.onRender(()=>{o(),this.printBuffer(),a.dispose()})})}}}const JC={cursorBlink:!0,allowProposedApi:!0,screenReaderMode:!0,fontFamily:'Emoji, Consolas, Menlo, Monaco, "Lucida Console", "Liberation Mono", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Courier New", monospace, serif',convertEol:!0,theme:{foreground:"#f8f8f2",background:"#252525",cursor:"#bbbbbb",black:"#000000",brightBlack:"#555555",red:"#ff5555",brightRed:"#ff5555",green:"#50fa7b",brightGreen:"#50fa7b",yellow:"#f1fa8c",brightYellow:"#f1fa8c",blue:"#bd93f9",brightBlue:"#bd93f9",magenta:"#fe5858",brightMagenta:"#feae58",cyan:"#8be9fd",brightCyan:"#8be9fd",white:"#bbbbbb",brightWhite:"#ffffff"}};function eb({ref:e,process:t,options:s}){const[o,a]=De.useState(null),[h,c]=De.useState(null);return De.useEffect(()=>{const _=async()=>{!o||!h||(await new Promise(p=>window.requestAnimationFrame(p)),h==null||h.fit(),t&&t.resize({cols:o.cols,rows:o.rows}))},g=new ResizeObserver(p=>{for(const y of p)y.target===e.current&&_()});return e.current&&g.observe(e.current),()=>{e.current&&g.unobserve(e.current),g.disconnect()}},[e,o,t,h]),De.useEffect(()=>{var _;let g=null;if(e.current&&!o){s={...JC,...s,logger:{trace:console.trace,debug:console.debug,info:(...v)=>{console.info(...v),g==null||g.printBuffer()},warn:console.warn,error:console.error}},g=new ZC(s),g.attachCustomKeyEventHandler(v=>{if(v.ctrlKey&&v.code==="KeyC"&&v.type==="keydown"){const C=g.getSelection();if(C)return navigator.clipboard.writeText(C),!1}return!(v.ctrlKey&&v.code==="KeyV"&&v.type==="keydown")});const p=new q0;g.loadAddon(p),g.loadAddon(new X0.ClipboardAddon),g.loadAddon(new Y0.WebLinksAddon),g.loadAddon(new XS),g.open(e.current),p.fit();const y=e.current.querySelector(".xterm-viewport");y&&(_=s.theme)!=null&&_.background&&(y.style.backgroundColor=s.theme.background),a(g),c(p),requestAnimationFrame(()=>{setTimeout(()=>g==null?void 0:g.focus(),0)})}return()=>{g==null||g.dispose(),a(null)}},[e]),{terminal:o,setTerminal:a}}var Ke=function(e,t,s,o){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?o:s==="a"?o.call(e):o?o.value:t.get(e)},ms=function(e,t,s,o,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,s),s},Ht,ys,dr,Ss;class tb extends Ce{get instance(){return Ke(this,Ht,"f")}constructor(t,s,o,a=!1){super(),Ht.set(this,void 0),ys.set(this,void 0),dr.set(this,void 0),Ss.set(this,void 0),Object.defineProperty(this,"_onClose",{enumerable:!0,configurable:!0,writable:!0,value:this._register(new J)}),Object.defineProperty(this,"onClose",{enumerable:!0,configurable:!0,writable:!0,value:this._onClose.event}),Object.defineProperty(this,"_onSave",{enumerable:!0,configurable:!0,writable:!0,value:this._register(new J)}),Object.defineProperty(this,"onSave",{enumerable:!0,configurable:!0,writable:!0,value:this._onSave.event}),Object.defineProperty(this,"_onOpen",{enumerable:!0,configurable:!0,writable:!0,value:this._register(new J)}),Object.defineProperty(this,"onOpen",{enumerable:!0,configurable:!0,writable:!0,value:this._onOpen.event}),ms(this,Ht,t),ms(this,dr,s),ms(this,ys,o),ms(this,Ss,a),this._register(Ke(this,Ht,"f").onDidChangeModel(h=>{var c,_;({...h},h.newModelUrl&&h.newModelUrl.path!==((c=h.oldModelUrl)==null?void 0:c.path)?(ms(this,Ss,!0),this._onOpen.fire({uri:h.newModelUrl.path})):!h.newModelUrl&&h.oldModelUrl&&(ms(this,Ss,!1),this._onClose.fire({uri:(_=h.oldModelUrl)==null?void 0:_.path})))}))}async open(t,s){t=Ke(this,ys,"f").fs.resolve(t,s);const o=Ke(this,dr,"f").Uri.file(t),a=Ke(this,dr,"f").editor.getModel(o);if(a)return Ke(this,Ht,"f").setModel(a);try{const h=await Ke(this,ys,"f").fs.readFile(t,"utf8"),c=Ke(this,dr,"f").editor.createModel(h,void 0,o);return Ke(this,Ht,"f").setModel(c)}catch(h){if(h.toString().indexOf("ENOENT")>-1){const c=Ke(this,dr,"f").editor.createModel("",void 0,o);return Ke(this,Ht,"f").setModel(c)}throw h}}async close(){Ke(this,Ht,"f").setModel(null)}async save(){const t=Ke(this,Ht,"f").getModel();if(t){const s=Ke(this,Ht,"f").getValue();await Ke(this,ys,"f").fs.writeFile(t.uri.path,new TextEncoder().encode(s)),this._onSave.fire({uri:t.uri.path})}}addDefaultCommands(){Ke(this,Ht,"f").addCommand(Ke(this,dr,"f").KeyMod.CtrlCmd|Ke(this,dr,"f").KeyCode.KeyS,async()=>await this.save()),Ke(this,Ht,"f").addCommand(Ke(this,dr,"f").KeyMod.CtrlCmd|Ke(this,dr,"f").KeyCode.KeyQ,async()=>await this.close())}get isOpen(){return Ke(this,Ss,"f")}focus(t={preventScroll:!0}){var s,o;(o=(s=Ke(this,Ht,"f").getDomNode())==null?void 0:s.querySelector(".inputarea.monaco-mouse-cursor-text"))==null||o.focus(t)}}Ht=new WeakMap,ys=new WeakMap,dr=new WeakMap,Ss=new WeakMap;function rb({ref:e,parentRef:t,container:s,options:o}){const[a,h]=De.useState(null),[c,_]=De.useState(null),[g,p]=De.useState(null);return De.useEffect(()=>{const y=()=>{a&&a.layout(void 0,!0)};return window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y),a==null||a.dispose()}},[a,e.current]),De.useEffect(()=>{const y=g==null?void 0:g.onOpen(async()=>{e.current&&(e.current.scrollIntoView({behavior:"smooth",block:"start"}),g.focus())});return()=>{y==null||y.dispose()}},[g,t,e]),{monacoLib:c,editor:g,init:async()=>{const y=await vs(()=>import("./editor.main-BTJN0Ilp.js").then(A=>A.e),__vite__mapDeps([0,1]),import.meta.url);y.languages.typescript.typescriptDefaults.setCompilerOptions({jsx:y.languages.typescript.JsxEmit.React}),y.editor.defineTheme("jsnix",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":"#1a1a1a"}});const v=y.editor.create(e.current,{minimap:{enabled:!1},automaticLayout:!0,fixedOverflowWidgets:!0,overflowWidgetsDomNode:document.body,scrollBeyondLastLine:!1,theme:"jsnix",wordWrap:"on",fontSize:15,...o}),C=document.querySelector("body");C&&!C.classList.contains("monaco-editor")&&C.classList.add("monaco-editor");const w=new tb(v,y,s);return w.addDefaultCommands(),h(v),_(y),p(w),{monaco:a,editor:w}}}}function kr(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function cg(e,t){for(var s="",o=0,a=-1,h=0,c,_=0;_<=e.length;++_){if(_<e.length)c=e.charCodeAt(_);else{if(c===47)break;c=47}if(c===47){if(!(a===_-1||h===1))if(a!==_-1&&h===2){if(s.length<2||o!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var g=s.lastIndexOf("/");if(g!==s.length-1){g===-1?(s="",o=0):(s=s.slice(0,g),o=s.length-1-s.lastIndexOf("/")),a=_,h=0;continue}}else if(s.length===2||s.length===1){s="",o=0,a=_,h=0;continue}}t&&(s.length>0?s+="/..":s="..",o=2)}else s.length>0?s+="/"+e.slice(a+1,_):s=e.slice(a+1,_),o=_-a-1;a=_,h=0}else c===46&&h!==-1?++h:h=-1}return s}function ib(e,t){var s=t.dir||t.root,o=t.base||(t.name||"")+(t.ext||"");return s?s===t.root?s+o:s+e+o:o}var bs={resolve:function(){for(var e="",t=!1,s,o=arguments.length-1;o>=-1&&!t;o--){var a;o>=0?a=arguments[o]:(s===void 0&&(s=process.cwd()),a=s),kr(a),a.length!==0&&(e=a+"/"+e,t=a.charCodeAt(0)===47)}return e=cg(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(kr(e),e.length===0)return".";var t=e.charCodeAt(0)===47,s=e.charCodeAt(e.length-1)===47;return e=cg(e,!t),e.length===0&&!t&&(e="."),e.length>0&&s&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return kr(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var s=arguments[t];kr(s),s.length>0&&(e===void 0?e=s:e+="/"+s)}return e===void 0?".":bs.normalize(e)},relative:function(e,t){if(kr(e),kr(t),e===t||(e=bs.resolve(e),t=bs.resolve(t),e===t))return"";for(var s=1;s<e.length&&e.charCodeAt(s)===47;++s);for(var o=e.length,a=o-s,h=1;h<t.length&&t.charCodeAt(h)===47;++h);for(var c=t.length,_=c-h,g=a<_?a:_,p=-1,y=0;y<=g;++y){if(y===g){if(_>g){if(t.charCodeAt(h+y)===47)return t.slice(h+y+1);if(y===0)return t.slice(h+y)}else a>g&&(e.charCodeAt(s+y)===47?p=y:y===0&&(p=0));break}var v=e.charCodeAt(s+y),C=t.charCodeAt(h+y);if(v!==C)break;v===47&&(p=y)}var w="";for(y=s+p+1;y<=o;++y)(y===o||e.charCodeAt(y)===47)&&(w.length===0?w+="..":w+="/..");return w.length>0?w+t.slice(h+p):(h+=p,t.charCodeAt(h)===47&&++h,t.slice(h))},_makeLong:function(e){return e},dirname:function(e){if(kr(e),e.length===0)return".";for(var t=e.charCodeAt(0),s=t===47,o=-1,a=!0,h=e.length-1;h>=1;--h)if(t=e.charCodeAt(h),t===47){if(!a){o=h;break}}else a=!1;return o===-1?s?"/":".":s&&o===1?"//":e.slice(0,o)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');kr(e);var s=0,o=-1,a=!0,h;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var c=t.length-1,_=-1;for(h=e.length-1;h>=0;--h){var g=e.charCodeAt(h);if(g===47){if(!a){s=h+1;break}}else _===-1&&(a=!1,_=h+1),c>=0&&(g===t.charCodeAt(c)?--c===-1&&(o=h):(c=-1,o=_))}return s===o?o=_:o===-1&&(o=e.length),e.slice(s,o)}else{for(h=e.length-1;h>=0;--h)if(e.charCodeAt(h)===47){if(!a){s=h+1;break}}else o===-1&&(a=!1,o=h+1);return o===-1?"":e.slice(s,o)}},extname:function(e){kr(e);for(var t=-1,s=0,o=-1,a=!0,h=0,c=e.length-1;c>=0;--c){var _=e.charCodeAt(c);if(_===47){if(!a){s=c+1;break}continue}o===-1&&(a=!1,o=c+1),_===46?t===-1?t=c:h!==1&&(h=1):t!==-1&&(h=-1)}return t===-1||o===-1||h===0||h===1&&t===o-1&&t===s+1?"":e.slice(t,o)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return ib("/",e)},parse:function(e){kr(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var s=e.charCodeAt(0),o=s===47,a;o?(t.root="/",a=1):a=0;for(var h=-1,c=0,_=-1,g=!0,p=e.length-1,y=0;p>=a;--p){if(s=e.charCodeAt(p),s===47){if(!g){c=p+1;break}continue}_===-1&&(g=!1,_=p+1),s===46?h===-1?h=p:y!==1&&(y=1):h!==-1&&(y=-1)}return h===-1||_===-1||y===0||y===1&&h===_-1&&h===c+1?_!==-1&&(c===0&&o?t.base=t.name=e.slice(1,_):t.base=t.name=e.slice(c,_)):(c===0&&o?(t.name=e.slice(1,h),t.base=e.slice(1,_)):(t.name=e.slice(c,h),t.base=e.slice(c,_)),t.ext=e.slice(h,_)),c>0?t.dir=e.slice(0,c-1):o&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};bs.posix=bs;var sb=bs;const au=M0(sb);var dg=function(e,t,s,o,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,s),s},Et=function(e,t,s,o){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?o:s==="a"?o.call(e):o?o.value:t.get(e)},dt,El;class Ic extends Pl{static async boot(t){const s=await super.boot(t);return Object.setPrototypeOf(s,Ic.prototype),s.fs=new nb(s.fs,{cwd:s.workdir}),s}async loadSnapshot(){return null}async mount(t,{autoSave:s=!0,...o}){let a=s?await this.loadSnapshot():null;return a||(a=typeof t=="function"?await t():t),super.mount(a||{},o)}}class nb{constructor(t,{cwd:s}){dt.set(this,void 0),El.set(this,void 0),dg(this,dt,t),dg(this,El,s)}resolve(t,s){return s?au.relative(Et(this,El,"f"),au.isAbsolute(t)?t:au.join(s,t)):t}async readdir(t,s){const o=this.resolve(t,s==null?void 0:s.cwd);return(s==null?void 0:s.encoding)==="buffer"&&s!=null&&s.withFileTypes?Et(this,dt,"f").readdir(o,{encoding:"buffer",withFileTypes:!0}):(s==null?void 0:s.encoding)==="buffer"?Et(this,dt,"f").readdir(o,{encoding:"buffer"}):Et(this,dt,"f").readdir(o,s)}async readFile(t,s,o){const a=this.resolve(t,o==null?void 0:o.cwd);return s?Et(this,dt,"f").readFile(a,s):Et(this,dt,"f").readFile(a,s)}async writeFile(t,s,o){const a=this.resolve(t,o==null?void 0:o.cwd);return typeof o=="string"||o!=null&&o.encoding?Et(this,dt,"f").writeFile(a,s,o):Et(this,dt,"f").writeFile(a,s,o)}async mkdir(t,s){const o=this.resolve(t,s==null?void 0:s.cwd);return s!=null&&s.recursive?Et(this,dt,"f").mkdir(o,{recursive:!0}):Et(this,dt,"f").mkdir(o,{recursive:!1})}async rm(t,s){const o=this.resolve(t,s==null?void 0:s.cwd);return Et(this,dt,"f").rm(o,s)}async rename(t,s,o){const a=this.resolve(t,o==null?void 0:o.cwd),h=this.resolve(s,o==null?void 0:o.cwd);return Et(this,dt,"f").rename(a,h)}watch(t,s,o){if(typeof s=="function"){const a=this.resolve(t);return Et(this,dt,"f").watch(a,void 0,s)}else{if(typeof s=="string"||s===null){const h=this.resolve(t);return Et(this,dt,"f").watch(h,s,o)}const a=this.resolve(t,s==null?void 0:s.cwd);return Et(this,dt,"f").watch(a,s,o)}}_teardown(){Et(this,dt,"f")._teardown()}}dt=new WeakMap,El=new WeakMap;const gl=[];class zc{constructor({text:t,frames:s,interval:o,index:a=0,stream:h,level:c=0,sibling:_}){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lastFrame",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"level",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sibling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"icons",{enumerable:!0,configurable:!0,writable:!0,value:{success:"",error:"",warning:""}}),this.text=t,this.frames=s,this.interval=o,this.index=a,this.timer=null,this.stream=h,this.lastFrame=null,this.level=c,this.sibling=_,c===0&&gl.length>0&&(gl[gl.length-1].sibling=this),gl.push(this)}addChild(t){const s=new zc({stream:this.stream,level:this.level+1,...t});return this.children.length>0&&(this.children[this.children.length-1].sibling=s),this.children.push(s),s}start(){this.timer=setInterval(async()=>{await this.render()},this.interval),this.children.forEach(t=>t.start())}clearFrame(){this.lastFrame=null,this.children.forEach(t=>t.clearFrame())}async clearTimer(){this.timer&&(clearInterval(this.timer),this.timer=null),this.children.forEach(t=>t.clearTimer())}async stop(t){if(!this.timer)return;this.clearTimer();const s=this.stream.getWriter();try{await s.ready,await this.clear(s),this.clearFrame(),await this.write(t||null,s)}finally{s.releaseLock()}}async render(){if(!this.timer)return;const t=this.stream.getWriter();try{await t.ready,await this.clear(t),this.next(),await this.write(this.frame(),t)}finally{t.releaseLock()}}next(){this.index=(this.index+1)%this.frames.length}async clearLine(t){await t.write("\x1B[F\x1B[2K")}async clear(t){this.sibling&&await this.sibling.clear(t),this.children.length>0&&await this.children[0].clear(t),this.lastFrame&&await this.clearLine(t)}indent(){return" ".repeat(this.level*2)}frame(){return`${this.frames[this.index]} ${this.text||""}`}async write(t,s){t&&await s.write(this.indent()+t+`
`),this.lastFrame=t,this.children.length>0&&await this.children[0].write(this.children[0].lastFrame,s),this.sibling&&await this.sibling.write(this.sibling.lastFrame,s)}}const Nl={interval:80,frames:["","","","","","","","","",""]};_r.level=3;let xr=null;function ob({fs:e,mountPoint:t="/",bootOptions:s={workdirName:"workspace"},onTeardown:o}){const[a,h]=De.useState(xr),c=async g=>{if(!xr){let p=g==null?void 0:g.addChild({text:"booting webcontainer",...Nl});p==null||p.start(),xr=await Ic.boot(s),await(p==null?void 0:p.stop(_r.green("")+" webcontainer booted")),p=g==null?void 0:g.addChild({text:"mounting filesystem",...Nl}),p==null||p.start(),await xr.mount(e,{mountPoint:t}),await(p==null?void 0:p.stop(_r.green("")+" filesystem mounted")),h(xr)}return xr},_=async()=>{xr&&(xr.teardown(),xr=null,o&&o(),h(xr))};return De.useEffect(()=>()=>{_()},[]),{init:c,container:a,setWebContainer:h}}const fg="\x1B]",_g="\x07",ml=";",lb=(e,t)=>[fg,"8",ml,ml,t,_g,e,fg,"8",ml,ml,_g].join(""),ab=async e=>JSON.stringify({...e,type:"request"}),hb=async e=>{try{const t=typeof e=="string"?JSON.parse(e):e,{status:s,statusText:o,headers:a,body:h}=t;return new Response(h,{status:s,statusText:o,headers:a})}catch(t){return console.error("Error deserializing response:",t),new Response(JSON.stringify({error:t}),{status:500})}},ub=async function*(e,t,s){const o=new TextDecoder("utf8");let a="";try{for(;;){const{done:h,value:c}=await e.read();if(h)break;t&&JSON.stringify({type:"debug",value:c,id:s}),a+=typeof c=="string"?c:o.decode(c,{stream:!0})+`\r
`,t&&JSON.stringify({type:"debug",buffer:a,id:s});const _=a.split(`\r
`);a=_.pop(),t&&JSON.stringify({type:"debug",parts_length:_.length,id:s});for(const g of _)t&&JSON.stringify({type:"debug",part:g,id:s}),g.trim()&&(yield JSON.parse(g))}a.trim()&&(yield JSON.parse(a))}catch{}},cb=new Error("request for lock canceled");var db=function(e,t,s,o){function a(h){return h instanceof s?h:new s(function(c){c(h)})}return new(s||(s=Promise))(function(h,c){function _(y){try{p(o.next(y))}catch(v){c(v)}}function g(y){try{p(o.throw(y))}catch(v){c(v)}}function p(y){y.done?h(y.value):a(y.value).then(_,g)}p((o=o.apply(e,t||[])).next())})};class fb{constructor(t,s=cb){this._value=t,this._cancelError=s,this._queue=[],this._weightedWaiters=[]}acquire(t=1,s=0){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);return new Promise((o,a)=>{const h={resolve:o,reject:a,weight:t,priority:s},c=Km(this._queue,_=>s<=_.priority);c===-1&&t<=this._value?this._dispatchItem(h):this._queue.splice(c+1,0,h)})}runExclusive(t){return db(this,arguments,void 0,function*(s,o=1,a=0){const[h,c]=yield this.acquire(o,a);try{return yield s(h)}finally{c()}})}waitForUnlock(t=1,s=0){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);return this._couldLockImmediately(t,s)?Promise.resolve():new Promise(o=>{this._weightedWaiters[t-1]||(this._weightedWaiters[t-1]=[]),_b(this._weightedWaiters[t-1],{resolve:o,priority:s})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(t){this._value=t,this._dispatchQueue()}release(t=1){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);this._value+=t,this._dispatchQueue()}cancel(){this._queue.forEach(t=>t.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(t){const s=this._value;this._value-=t.weight,t.resolve([s,this._newReleaser(t.weight)])}_newReleaser(t){let s=!1;return()=>{s||(s=!0,this.release(t))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let t=this._value;t>0;t--){const s=this._weightedWaiters[t-1];s&&(s.forEach(o=>o.resolve()),this._weightedWaiters[t-1]=[])}else{const t=this._queue[0].priority;for(let s=this._value;s>0;s--){const o=this._weightedWaiters[s-1];if(!o)continue;const a=o.findIndex(h=>h.priority<=t);(a===-1?o:o.splice(0,a)).forEach(h=>h.resolve())}}}_couldLockImmediately(t,s){return(this._queue.length===0||this._queue[0].priority<s)&&t<=this._value}}function _b(e,t){const s=Km(e,o=>t.priority<=o.priority);e.splice(s+1,0,t)}function Km(e,t){for(let s=e.length-1;s>=0;s--)if(t(e[s]))return s;return-1}var pb=function(e,t,s,o){function a(h){return h instanceof s?h:new s(function(c){c(h)})}return new(s||(s=Promise))(function(h,c){function _(y){try{p(o.next(y))}catch(v){c(v)}}function g(y){try{p(o.throw(y))}catch(v){c(v)}}function p(y){y.done?h(y.value):a(y.value).then(_,g)}p((o=o.apply(e,t||[])).next())})};class gb{constructor(t){this._semaphore=new fb(1,t)}acquire(){return pb(this,arguments,void 0,function*(t=0){const[,s]=yield this._semaphore.acquire(1,t);return s})}runExclusive(t,s=0){return this._semaphore.runExclusive(()=>t(),1,s)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(t=0){return this._semaphore.waitForUnlock(1,t)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}_r.level=3;const mb=`press any key to ${_r.greenBright("start")}`,vb=`${_r.magenta(lb("jsnix","https://github.com/tbrockman/jsnix"))} ${_r.dim("(v0.0.51)")}`,pg={FORCE_HYPERLINK:1,WEBCONTAINER:!0,USER_AGENT:navigator==null?void 0:navigator.userAgent.toLowerCase()},yb={entrypoint:["jsh"],prompt:mb,banner:vb,jsnixExports:[],mountPoint:"/",globalInstallDir:"/bin",workdirName:"workspace",env:{},terminalOptions:{logLevel:"warn"},onSetup:()=>{},onPort:async()=>{},onTeardown:()=>{}},gg=`
${_r.yellow("note:")}
${_r.white("a bug in one of my dependencies (which can be fixed by reloading the page) may cause random freezes. sorry ")}
`;let vl=null,hu,uu;const Sb=new gb;function wb({fs:e,options:t}){const{entrypoint:s,prompt:o,banner:a,bootstrap:h,jsnixExports:c,globalInstallDir:_,mountPoint:g,workdirName:p,env:y,terminalOptions:v,editorOptions:C,onSetup:w,onTeardown:A}={...yb,...t},{init:T,container:M}=ob({fs:e,mountPoint:g,bootOptions:{workdirName:p},onTeardown:A}),X=De.useRef(null),ie=De.useRef(null),se=De.useRef(null),[W,G]=De.useState(null),[ee,fe]=De.useState(null),{editor:we,init:pe}=rb({ref:ie,parentRef:se,container:M,options:C}),{terminal:xe}=eb({process:ee,ref:X,options:v}),[Le,I]=De.useState(!1),P=async()=>{var j,te;try{if(vl)return vl;if(!M)return console.warn("Can't start relay, container is null"),null;const Q=await M.spawn("npm",["install","@jsnix/relay"],{cwd:_});await(Q==null?void 0:Q.exit);const re=await M.spawn("node",["node_modules/@jsnix/relay/dist/relay/main.js"],{cwd:_,output:!0});hu=(j=re.input)==null?void 0:j.getWriter(),uu=(te=re.output)==null?void 0:te.getReader();const{value:oe,done:ue}=await uu.read();vl=re}catch(Q){console.error("relay error",Q)}return vl},B=j=>async te=>{const Q=await Sb.acquire(),re=null;try{if(!await P())throw new Error("Container relay unavailable, can't fetch");te.headers={...te.headers,"Relay-Request-Id":window.crypto.randomUUID(),"Relay-Request-Origin":"client"};const oe=await ab({...te,url:j});await hu.ready,await hu.write(oe+"\r");for await(const ue of ub(uu,!1,"client")){const{type:ve,...D}=ue;if(ve==="response")return await hb(D)}}catch(oe){console.error(oe)}finally{Q()}return re||null},E=async(j,te)=>{if(!M){console.warn("webcontainer is unavailable, can't create binary aliases");return}await(await M.spawn("jsh",["--exec",`echo "alias ${te}='${j}'" >> ~/.jshrc`],{cwd:"/"})).exit};De.useEffect(()=>{const j=[];if(M){const te=M==null?void 0:M.on("server-ready",async(re,oe)=>{re===5173&&G({port:re,url:oe}),c==null||c.forEach(async ue=>{if(ue.onServerReady)try{await ue.onServerReady({container:M,port:re,url:oe,fetch:B(oe),editor:we,terminal:xe,initEditor:pe})}catch(ve){console.error(ve)}})}),Q=M==null?void 0:M.on("port",async(re,oe,ue)=>{re===5173&&oe==="close"&&G(null),c==null||c.forEach(async ve=>{if(ve.onPort)try{await ve.onPort({port:re,url:ue,type:oe,container:M,fetch:B(ue),editor:we,terminal:xe,initEditor:pe})}catch(D){console.error(D)}})});j.push(te,Q)}return()=>{j.forEach(te=>te())}},[c,M,we,xe]),De.useEffect(()=>{let j;return Le&&xe&&!M&&(o?(typeof o=="string"?xe.writeln(o):o.forEach(te=>xe.writeln(te)),j=xe.onKey(async()=>{M||(j==null||j.dispose(),j=void 0,await U(xe))})):U(xe)),()=>{j&&j.dispose()}},[Le,xe,M]);const z=async()=>{const j=(c==null?void 0:c.filter(te=>te.name&&te.bin).map(async te=>{var Q;await Promise.all(((Q=te.bin)==null?void 0:Q.map(async re=>await E(`jsnix ${te.name}`,re)))||[])}))||[];await Promise.all(j)};De.useEffect(()=>{M&&z()},[M,c]),De.useEffect(()=>{var j;const te=[];return xe&&((j=c==null?void 0:c.filter(Q=>!!Q.osc))==null||j.map(Q=>Q.osc).forEach(({id:Q,handler:re})=>{if(!Q||!re)return;const oe=xe.parser.registerOscHandler(Q,async ue=>re({data:ue,container:M,process:ee,terminal:xe,document,editor:we,initEditor:pe}));te.push(oe)}),I(!0)),()=>{te.forEach(Q=>Q.dispose())}},[c,M,ee,xe,document,we]);const U=async j=>{gg&&j.writeln(gg);const te=j.getWritableStream(),Q=new zc({text:"preparing webcontainer",stream:te,...Nl});Q.start();const re=await T(Q);if(h){const oe=Q.addChild({text:"bootstraping webcontainer",...Nl});oe.start();for(const{cmd:ue,options:ve}of h)if(ue&&ue.length>0){const[D,...ae]=ue,{detached:Qe,...He}=ve||{},Bt=await re.spawn(D,ae,He),vt=He!=null&&He.output?await q(Bt,j):null;!Qe&&await Bt.exit,await(vt==null?void 0:vt())}await oe.stop(`${_r.green("")} bootstrap complete`)}if(await Q.stop(`${_r.green("")} webcontainer started`),await te.close(),j.write("\x1Bc"),a&&j.writeln(a),s){const oe=await N(s,re,j),ue=await q(oe,j);oe&&fe(oe),oe==null||oe.exit.then(async()=>await(ue==null?void 0:ue()))}w&&w(re,j)},N=async(j,te,Q)=>{const[re,...oe]=j,ue=await te.spawn(re,oe,{terminal:{cols:Q.cols,rows:Q.rows},env:{...pg,...y}});return ue.exit.then(async ve=>{if(j.pop()!=="jsh"){const D=await te.spawn("jsh",[],{terminal:{cols:Q.cols,rows:Q.rows},env:{...pg,...y}});q(D,Q),fe(D)}}),ue},q=async(j,te)=>{j==null||j.output.pipeTo(new WritableStream({write:oe=>{te.write(oe)}}));const Q=j==null?void 0:j.input.getWriter();await Q.ready,te.process={input:Q};const re=te.onData(oe=>{Q==null||Q.write(oe)});return async()=>{re.dispose(),await Q.close()}},$=De.useRef(0),k=De.useRef(0),F=De.useRef(0);return De.useEffect(()=>{const j=se.current;if(!j)return;const te=re=>{$.current=re.touches[0].clientY,F.current=re.timeStamp},Q=re=>{k.current=re.changedTouches[0].clientY;const oe=re.timeStamp,ue=k.current-$.current,ve=oe-F.current,D=Math.abs(ue/ve),ae=.5,Qe=50,He=re.target,Bt=He.scrollHeight>He.clientHeight,vt=He.scrollTop===0,Vr=He.scrollTop+He.clientHeight>=He.scrollHeight;if(!(Bt&&!(ue<0&&vt||ue>0&&Vr))&&D>ae&&Math.abs(ue)>Qe){const pr=ue<0,Ms=j.offsetHeight;j.scrollBy({top:pr?Ms:-Ms,behavior:"smooth"})}};return j.addEventListener("touchstart",te),j.addEventListener("touchend",Q),()=>{j.removeEventListener("touchstart",te),j.removeEventListener("touchend",Q)}},[]),wn.jsxs("div",{ref:se,className:"jsnix-container",children:[wn.jsx("div",{className:"jsnix-editor-container jsnix-window",children:wn.jsx("div",{ref:ie,className:"jsnix-editor"})}),wn.jsx("div",{ref:X,className:"jsnix-terminal-container jsnix-window"}),W&&wn.jsx("iframe",{className:"jsnix-terminal-preview jsnix-window loaded",src:W.url})]})}const Cb=async(e,t=6e4)=>{const s=new Promise((o,a)=>setTimeout(()=>a(`timed out after ${t} milliseconds`),t));return Promise.race([new Promise(e),s]).then(o=>o).catch(o=>{throw Error(o)})},bb=async(e,t,s,o=5e3)=>Cb(async(a,h)=>{try{const c=await(e==null?void 0:e.spawn("node",["-e",`
                const fs = require('fs');
                const path = '${t}';
            
                // Write data to the file
                fs.writeFileSync(path, \`${s}\`);
                
                // Watch for changes to the file
                fs.watch(path, (eventType) => {
                    process.exit(0); // Exit when file changes
                });
              `]));await(c==null?void 0:c.exit)}catch(c){h(c)}finally{a()}},o),kb=e=>async({data:t,container:s,terminal:o,...a})=>{const[h,c,_]=t.split(";");if(h!=="data"||!c||!_)return!1;const g=JSON.parse(new TextDecoder().decode(Uint8Array.from(atob(_),C=>C.charCodeAt(0)))),p=await e({data:g,container:s,terminal:o,...a});if(!s)return typeof p=="string"&&console.warn("WebContainer unavailable, will be unable to use OSC handler output.",p),!0;const y=`/tmp/${c}`;return await bb(s,y,typeof p=="string"?p:""),typeof p=="string"?!0:p},xb=async e=>await Promise.all(Object.values(e).map(async t=>{var s;try{const o=(s=t==null?void 0:t.name)==null?void 0:s.split("/");let a;o&&(o.length==1?a=o[0]:o.length>2&&(a=o[o.length-3]));const{osc:h,bin:c,onServerReady:_,onPort:g}=await t();let p={bin:c,name:a,onServerReady:_,onPort:g};if(h){if(!h.handler)throw new Error("Exported `osc` missing a handler");if(!h.id)throw new Error("Exported `osc` missing an id");p={...p,osc:{id:h.id,handler:kb(h.handler)}}}return p}catch(o){return console.error("Error loading command:",o),null}})),cu=10,mg=(e=0)=>t=>`\x1B[${t+e}m`,vg=(e=0)=>t=>`\x1B[${38+e};5;${t}m`,yg=(e=0)=>(t,s,o)=>`\x1B[${38+e};2;${t};${s};${o}m`,We={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(We.modifier);const Eb=Object.keys(We.color),Pb=Object.keys(We.bgColor);[...Eb,...Pb];function Lb(){const e=new Map;for(const[t,s]of Object.entries(We)){for(const[o,a]of Object.entries(s))We[o]={open:`\x1B[${a[0]}m`,close:`\x1B[${a[1]}m`},s[o]=We[o],e.set(a[0],a[1]);Object.defineProperty(We,t,{value:s,enumerable:!1})}return Object.defineProperty(We,"codes",{value:e,enumerable:!1}),We.color.close="\x1B[39m",We.bgColor.close="\x1B[49m",We.color.ansi=mg(),We.color.ansi256=vg(),We.color.ansi16m=yg(),We.bgColor.ansi=mg(cu),We.bgColor.ansi256=vg(cu),We.bgColor.ansi16m=yg(cu),Object.defineProperties(We,{rgbToAnsi256:{value(t,s,o){return t===s&&s===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(s/255*5)+Math.round(o/255*5)},enumerable:!1},hexToRgb:{value(t){const s=/[a-f\d]{6}|[a-f\d]{3}/i.exec(t.toString(16));if(!s)return[0,0,0];let[o]=s;o.length===3&&(o=[...o].map(h=>h+h).join(""));const a=Number.parseInt(o,16);return[a>>16&255,a>>8&255,a&255]},enumerable:!1},hexToAnsi256:{value:t=>We.rgbToAnsi256(...We.hexToRgb(t)),enumerable:!1},ansi256ToAnsi:{value(t){if(t<8)return 30+t;if(t<16)return 90+(t-8);let s,o,a;if(t>=232)s=((t-232)*10+8)/255,o=s,a=s;else{t-=16;const _=t%36;s=Math.floor(t/36)/5,o=Math.floor(_/6)/5,a=_%6/5}const h=Math.max(s,o,a)*2;if(h===0)return 30;let c=30+(Math.round(a)<<2|Math.round(o)<<1|Math.round(s));return h===2&&(c+=60),c},enumerable:!1},rgbToAnsi:{value:(t,s,o)=>We.ansi256ToAnsi(We.rgbToAnsi256(t,s,o)),enumerable:!1},hexToAnsi:{value:t=>We.ansi256ToAnsi(We.hexToAnsi256(t)),enumerable:!1}}),We}const Rr=Lb(),Sg=(()=>{if(!("navigator"in globalThis))return 0;if(globalThis.navigator.userAgentData){const e=navigator.userAgentData.brands.find(({brand:t})=>t==="Chromium");if(e&&e.version>93)return 3}return/\b(Chrome|Chromium)\//.test(globalThis.navigator.userAgent)?1:0})(),wg=Sg!==0&&{level:Sg},Rb={stdout:wg,stderr:wg};function Db(e,t,s){let o=e.indexOf(t);if(o===-1)return e;const a=t.length;let h=0,c="";do c+=e.slice(h,o)+t+s,h=o+a,o=e.indexOf(t,h);while(o!==-1);return c+=e.slice(h),c}function Tb(e,t,s,o){let a=0,h="";do{const c=e[o-1]==="\r";h+=e.slice(a,c?o-1:o)+t+(c?`\r
`:`
`)+s,a=o+1,o=e.indexOf(`
`,a)}while(o!==-1);return h+=e.slice(a),h}const{stdout:Cg,stderr:bg}=Rb,_c=Symbol("GENERATOR"),Ps=Symbol("STYLER"),jn=Symbol("IS_EMPTY"),kg=["ansi","ansi","ansi256","ansi16m"],Ls=Object.create(null),Mb=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const s=Cg?Cg.level:0;e.level=t.level===void 0?s:t.level},Bb=e=>{const t=(...s)=>s.join(" ");return Mb(t,e),Object.setPrototypeOf(t,Yn.prototype),t};function Yn(e){return Bb(e)}Object.setPrototypeOf(Yn.prototype,Function.prototype);for(const[e,t]of Object.entries(Rr))Ls[e]={get(){const s=Il(this,gc(t.open,t.close,this[Ps]),this[jn]);return Object.defineProperty(this,e,{value:s}),s}};Ls.visible={get(){const e=Il(this,this[Ps],!0);return Object.defineProperty(this,"visible",{value:e}),e}};const pc=(e,t,s,...o)=>e==="rgb"?t==="ansi16m"?Rr[s].ansi16m(...o):t==="ansi256"?Rr[s].ansi256(Rr.rgbToAnsi256(...o)):Rr[s].ansi(Rr.rgbToAnsi(...o)):e==="hex"?pc("rgb",t,s,...Rr.hexToRgb(...o)):Rr[s][e](...o),Ob=["rgb","hex","ansi256"];for(const e of Ob){Ls[e]={get(){const{level:s}=this;return function(...o){const a=gc(pc(e,kg[s],"color",...o),Rr.color.close,this[Ps]);return Il(this,a,this[jn])}}};const t="bg"+e[0].toUpperCase()+e.slice(1);Ls[t]={get(){const{level:s}=this;return function(...o){const a=gc(pc(e,kg[s],"bgColor",...o),Rr.bgColor.close,this[Ps]);return Il(this,a,this[jn])}}}}const Ab=Object.defineProperties(()=>{},{...Ls,level:{enumerable:!0,get(){return this[_c].level},set(e){this[_c].level=e}}}),gc=(e,t,s)=>{let o,a;return s===void 0?(o=e,a=t):(o=s.openAll+e,a=t+s.closeAll),{open:e,close:t,openAll:o,closeAll:a,parent:s}},Il=(e,t,s)=>{const o=(...a)=>Nb(o,a.length===1?""+a[0]:a.join(" "));return Object.setPrototypeOf(o,Ab),o[_c]=e,o[Ps]=t,o[jn]=s,o},Nb=(e,t)=>{if(e.level<=0||!t)return e[jn]?"":t;let s=e[Ps];if(s===void 0)return t;const{openAll:o,closeAll:a}=s;if(t.includes("\x1B"))for(;s!==void 0;)t=Db(t,s.close,s.open),s=s.parent;const h=t.indexOf(`
`);return h!==-1&&(t=Tb(t,a,o,h)),o+t+a};Object.defineProperties(Yn.prototype,Ls);const Vm=Yn();Yn({level:bg?bg.level:0});function Ib(e){return new Worker(""+new URL("json.worker-BnUULff4.js",import.meta.url).href,{name:e==null?void 0:e.name})}function zb(e){return new Worker(""+new URL("css.worker-DGFkc2qH.js",import.meta.url).href,{name:e==null?void 0:e.name})}function Wb(e){return new Worker(""+new URL("html.worker-CltiozTZ.js",import.meta.url).href,{name:e==null?void 0:e.name})}function Fb(e){return new Worker(""+new URL("ts.worker-CYwyqEXc.js",import.meta.url).href,{name:e==null?void 0:e.name})}function Hb(e){return new Worker(""+new URL("editor.worker-oRlJJsnX.js",import.meta.url).href,{name:e==null?void 0:e.name})}Vm.level=3;const du={},Ub=e=>{switch(e){case"json":return new Ib;case"scss":case"less":case"css":return new zb;case"html":case"handlebars":case"razor":return new Wb;case"typescript":case"javascript":return new Fb;default:return new Hb}};self.MonacoEnvironment={getWorker:function(e,t){if(t in du)return du[t];const s=Ub(t);return du[t]=s,s}};function jb(){const[e,t]=De.useState(void 0),s={env:{PATH:"/home/workspace/bin:/bin:/usr/bin:/usr/local/bin",NODE_OPTIONS:"--no-warnings --experimental-global-webcrypto"},prompt:["","","\x1B]80085;data;1d655ba9-0832-46f6-9fc8-6c2cdd3c3af5;eyJodG1sIjoiPGRpdiBzdHlsZT1cIndpZHRoOiAxMDAlO1xuXHRkaXNwbGF5OiBmbGV4O1xuXHRib3gtc2l6aW5nOiBib3JkZXItYm94O1xuXHRqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcblx0cGFkZGluZzogMXJlbTtcIj5cblx0PGRpdiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICMzODM4Mzg7XG5cdFx0XHRcdGJveC1zaGFkb3c6IC0xcmVtIDFyZW0gIzE3MTcxNztcblx0XHRcdFx0cGFkZGluZzogMXJlbTtcblx0XHRcdFx0cGFkZGluZy1ib3R0b206IDJyZW07XG5cdFx0XHRcdHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcblx0XHRcdFx0Zm9udC1mYW1pbHk6IG1vbm9zcGFjZTtcblx0XHRcdFx0Y29sb3I6IHdoaXRlO1xuXHRcdFx0XHRib3JkZXI6IDRweCBzb2xpZCAjMGEwYTBhO1xuXHRcdFx0XHR3aWR0aDogMTAwJTtcblx0XHRcdFx0ZGlzcGxheTogZmxleDtcblx0XHRcdFx0Ym94LXNpemluZzogYm9yZGVyLWJveDtcblx0XHRcdFx0anVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG5cdFx0XHRcdGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuXHRcdFx0XHRsaW5lLWhlaWdodDogaW5pdGlhbDtcIj5cbuKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVl+KWiOKWiOKVlyAg4paI4paI4pWX4paI4paI4paI4paI4paI4paI4paI4pWXIOKWiOKWiOKWiOKWiOKWiOKWiOKVlyBcbuKVmuKVkOKVkOKWiOKWiOKVlOKVkOKVkOKVneKWiOKWiOKVkSAg4paI4paI4pWR4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWd4paI4paI4pWU4pWQ4pWQ4pWQ4paI4paI4pWXXG4gICDilojilojilZEgICDilojilojilojilojilojilojilojilZHilojilojilojilojilojilZcgIOKWiOKWiOKVkSAgIOKWiOKWiOKVkVxuICAg4paI4paI4pWRICAg4paI4paI4pWU4pWQ4pWQ4paI4paI4pWR4paI4paI4pWU4pWQ4pWQ4pWdICDilojilojilZEgICDilojilojilZFcbiAgIOKWiOKWiOKVkSAgIOKWiOKWiOKVkSAg4paI4paI4pWR4paI4paI4paI4paI4paI4paI4paI4pWX4pWa4paI4paI4paI4paI4paI4paI4pWU4pWdXG4gICDilZrilZDilZ0gICDilZrilZDilZ0gIOKVmuKVkOKVneKVmuKVkOKVkOKVkOKVkOKVkOKVkOKVnSDilZrilZDilZDilZDilZDilZDilZ1cblxuXG4gICAgIGRldiDwn5K7IGFydGlzdCDwn46oIGdvb2Yg8J+koVxuPC9kaXY+PC9kaXY+In0=\x07","",`press any key to ${Vm.greenBright("start")}`],bootstrap:[{cmd:["npm","i","@jsnix/cli"],options:{cwd:"/bin"}},{cmd:["ln","-s","node_modules/@jsnix/cli/dist/cli/index.js","jsnix"],options:{cwd:"/bin"}}],entrypoint:["jsnix"],terminalOptions:{logLevel:"warn"},jsnixExports:e},o=async()=>({jsnix:{directory:(await vs(()=>import("./snapshot-Sfkcv5es.js"),[],import.meta.url)).default},bin:{directory:{}},"HELLO.md":{file:{contents:"Howdy, stranger! Feel free to poke around.\n\n## Useful commands\n\n```sh\njsnix --help\n```\n\n```sh\nls /bin /usr/bin /usr/local/bin\n```\n\n```sh\ncat ~/.jshrc\n```\n\n```sh\ncd ~/workspace/jsnix/ && npm i && npm run dev\n```\n"}}}),a=async()=>{const c=await xb(Object.assign({"./node_modules/@jsnix/cli/dist/cli/commands/code/_app/jsnix.js":()=>vs(()=>import("./jsnix-Bw1DuI-z.js"),[],import.meta.url),"./node_modules/@jsnix/cli/dist/cli/commands/html/_app/jsnix.js":()=>vs(()=>import("./jsnix-B5-L5Hhl.js"),[],import.meta.url),"./node_modules/@jsnix/cli/dist/cli/commands/listen/_app/jsnix.js":()=>vs(()=>import("./jsnix-9v3uUpFf.js"),[],import.meta.url),"./node_modules/@jsnix/cli/dist/cli/commands/recruit/_app/jsnix.js":()=>vs(()=>import("./jsnix-BV9xEAZY.js"),[],import.meta.url)}));t(c.filter(_=>_!==null))};return De.useEffect(()=>{a()},[]),e===void 0?null:fu.jsx(wb,{fs:o,options:s})}t0.createRoot(document.getElementById("jsnix")).render(fu.jsx(De.StrictMode,{children:fu.jsx(jb,{})}));export{Yy as R,vs as _,t0 as c};
