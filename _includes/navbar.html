<script>
    // Pre-initialize navbar position from localStorage to prevent flicker
    // This runs synchronously before the navbar HTML is parsed
    // Stores position info globally for the navbar container to read
    window.__navbarSavedPosition = null;
    (function() {
        if (window.innerWidth <= 800) {
            try {
                const saved = localStorage.getItem('navbar-fab-position');
                if (saved) {
                    const position = JSON.parse(saved);
                    window.__navbarSavedPosition = position;
                    // Mark document so CSS knows we have a saved position
                    document.documentElement.classList.add('navbar-position-saved');
                    // Add position class so CSS can position immediately
                    if (position.snapPointPosition) {
                        document.documentElement.classList.add('navbar-pos-' + position.snapPointPosition);
                        // Derive expand direction from snap point position (don't use saved direction)
                        // Left-side positions expand right, right-side positions expand left
                        const expandDir = position.snapPointPosition.includes('left') ? 'right' : 'left';
                        document.documentElement.classList.add('navbar-dir-' + expandDir);
                    }
                }
            } catch (e) {
                // Ignore errors, will use default position
            }
            
            // Load interact.js for dragging
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js';
            script.onload = function() {
                window.interactLoaded = true;
                window.dispatchEvent(new Event('interactLoaded'));
            };
            document.head.appendChild(script);
        }
    })();
</script>
<script src="/assets/js/navbar.js"></script>

<!-- Mobile floating action button with expandable nav items -->
<div id="navbar-fab-container" class="navbar-fab-container">
    <button id="navbar-fab" class="navbar-fab" aria-label="Open navigation menu">
        <span class="hamburger-icon">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </span>
    </button>
    <div id="navbar-items" class="navbar-items">
        <!-- Spacer creates room for FAB - items scroll underneath FAB, spacer prevents initial occlusion -->
        <div class="nav-spacer" aria-hidden="true"></div>
        <a href="/" title="home" class="nav-item {% if page.url == '/' %}selected{% endif %}">
            <span class="icon">ğŸ’»</span>
        </a>
        <a href="/blog" title="blog" class="nav-item {% if page.url contains '/blog' or page.url.size > 0 and page.url != '/' %}selected{% endif %}">
            <span class="icon">âœï¸</span>
        </a>
        <a href="https://github.com/tbrockman" title="github" class="nav-item">
            <span class="icon">ğŸ™</span>
        </a>
        <a href="https://www.linkedin.com/in/iamtheolol/" title="linkedin" class="nav-item">
            <span class="icon">ğŸ¤</span>
        </a>
        <a href="/resume" title="resume" class="nav-item">
            <span class="icon">ğŸ§‘â€ğŸ’¼</span>
        </a>
        <a href="/feed.xml" title="rss" class="nav-item">
            <span class="icon">ğŸ“»</span>
        </a>
    </div>
</div>

<!-- Desktop navbar (unchanged) -->
<nav id="navbar" class="navbar">
    <div id="navbar-header" class="container">
        <div class="{% if page.url == '/' %}selected{% endif %}">
            <a href="/" title="home">
                <span class="icon">ğŸ’»</span>
                <span class="label">home</span>
            </a>
        </div>
        <div class="{% if page.url contains '/blog' or page.url.size > 0 and page.url != '/' %}selected{% endif %}">
            <a href="/blog" title="blog">
                <span class="icon">âœï¸</span>
                <span class="label">blog</span>
            </a>
        </div>
        <!-- <div>
            <a href="/projects" title="projects">
                <span class="icon">ğŸ“</span>
                <span class="label">projects</span>
            </a>
        </div> -->
        <div>
            <a href="https://github.com/tbrockman" title="github">
                <span class="icon">ğŸ™</span>
                <span class="label">github</span>
            </a>
        </div>
        <div>
            <a href="https://www.linkedin.com/in/iamtheolol/" title="linkedin">
                <span class="icon">ğŸ¤</span>
                <span class="label">linkedin</span>
            </a>
        </div>
        <div>
            <a href="/resume" title="resume">
                <span class="icon">ğŸ§‘â€ğŸ’¼</span>
                <span class="label">resume</span>
            </a>
        </div>
        <div>
            <a href="/feed.xml" title="rss">
                <span class="icon">ğŸ“»</span>
                <span class="label">rss</span>
            </a>
        </div>
    </div>
</nav>
